(window["webpackJsonpthree.quarks-editor"]=window["webpackJsonpthree.quarks-editor"]||[]).push([[0],{220:function(e,t,n){e.exports=n(431)},249:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},419:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){},431:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),l=n(4),c=n(5),s=n(6),u=n(7),d=n(438),m=n(487),p=n(469),h=n(464),w=n(467),f=n(72),v=n(437),b=n(465),g=n(85),C=n.n(g),x=n(199),y=n.n(x),S=Object(h.a)((function(e){return{root:{flexGrow:1},menuIcon:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(1)},title:{marginRight:e.spacing(1)}}})),E=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).fileRef=void 0,r.openFileDialog=function(e){r.fileRef.current&&r.fileRef.current.click()},r.importFile=function(e){e.target.files&&r.props.onImport(e.target.files)},r.openDemo=function(e){r.props.onOpenDemo(e)},r.handleMenuClick=function(e){console.log(e.currentTarget),r.setState({anchorEl:e.currentTarget})},r.handleMenuClose=function(){r.setState({anchorEl:void 0})},r.state={anchorEl:void 0},r.fileRef=a.createRef(),r}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return a.createElement("div",{className:t.root},a.createElement(b.a,{position:"static"},a.createElement(w.a,{variant:"dense"},a.createElement(v.a,{edge:"start",className:t.menuIcon,color:"inherit","aria-label":"menu"},a.createElement(y.a,null)),a.createElement(f.a,{variant:"h6",className:t.title},"Three.Quarks"),a.createElement(d.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"file-button"},"File"),a.createElement(m.a,{id:"file-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"file-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},a.createElement(p.a,null,"New"),a.createElement(p.a,{onClick:this.openFileDialog},"Open"),a.createElement(p.a,{onClick:this.props.onSaveAs},"Download"),a.createElement("input",{ref:this.fileRef,type:"file",id:"fileElem",multiple:!0,accept:"application/json",style:{display:"none"},onChange:this.importFile})),a.createElement(d.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"demo-button"},"Demo"),a.createElement(m.a,{id:"demo-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"demo-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},a.createElement(p.a,{onClick:function(){return e.openDemo(0)}},"PlasmaProjectile"),a.createElement(p.a,{onClick:function(){return e.openDemo(1)}},"BulletMuzzle"),a.createElement(p.a,{onClick:function(){return e.openDemo(2)}},"BulletProjectile"),a.createElement(p.a,{onClick:function(){return e.openDemo(3)}},"ShipSmoke"),a.createElement(p.a,{onClick:function(){return e.openDemo(4)}},"HitImpact"),a.createElement(p.a,{onClick:function(){return e.openDemo(5)}},"Explosion"),a.createElement(p.a,{onClick:function(){return e.openDemo(6)}},"Levelup"),a.createElement(p.a,{onClick:function(){return e.openDemo(7)}},"Pickup"),a.createElement(p.a,{onClick:function(){return e.openDemo(8)}},"ElectricBall"),a.createElement(p.a,{onClick:function(){return e.openDemo(9)}},"ShipTrail"),a.createElement(p.a,{onClick:function(){return e.openDemo(10)}},"Explosion2")))))}}]),n}(a.PureComponent),j=C()(S,{withTheme:!0})(E),O=n(200),B=n.n(O),k={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',a=document.createElement("div");return a.id="webglmessage",a.style.fontFamily="monospace",a.style.fontSize="13px",a.style.fontWeight="normal",a.style.textAlign="center",a.style.background="#fff",a.style.color="#000",a.style.padding="1.5em",a.style.width="400px",a.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),a.innerHTML=n,a}},P=n(2),T=n(201),M=n(1),z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).particles=void 0,a.smoke=void 0,a.glowBeam=void 0,a.mainBeam=void 0;var r=e[0].texture;return a.mainBeam=new M.m({duration:1,looping:!0,startLife:new M.j(.1,.15),startSpeed:new M.f(0),startSize:new M.f(1.25),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(40),shape:new M.v({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10}),a.mainBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.mainBeam.emitter.renderOrder=2,a.mainBeam.emitter.name="mainBeam",a.add(a.mainBeam.emitter),a.glowBeam=new M.m({duration:1,looping:!0,startLife:new M.j(.1,.15),startSpeed:new M.f(0),startSize:new M.f(3.5),startColor:new M.e(new P.fb(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(40),shape:new M.v({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.glowBeam.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.glowBeam.emitter.renderOrder=2,a.glowBeam.emitter.name="glowBeam",a.add(a.glowBeam.emitter),a.particles=new M.m({duration:1,looping:!0,startLife:new M.j(.3,.6),startSpeed:new M.j(2,5),startSize:new M.j(.1,.4),startColor:new M.q(new P.fb(1,1,1,.5),new P.fb(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(60),shape:new M.d({angle:4.8423/180*Math.PI,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,renderMode:M.r.StretchedBillBoard,speedFactor:.01,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.particles.emitter.renderOrder=0,a.particles.emitter.rotateY(-Math.PI/2),a.particles.emitter.name="particles",a.add(a.particles.emitter),a.smoke=new M.m({startLife:new M.j(.25,.3),startSpeed:new M.f(0),startSize:new M.j(.75,1.25),startRotation:new M.j(0,2*Math.PI),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(20),shape:new M.v({radius:.2,thickness:1}),texture:r,blending:P.P,startTileIndex:2,uTileCount:10,vTileCount:10}),a.smoke.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.smoke.addBehavior(new M.b(new M.c(new P.fb(1,.1509503,.07352942,1),new P.fb(0,0,0,0)))),a.smoke.addBehavior(new M.s(new M.j(2*-Math.PI,2*Math.PI))),a.smoke.emitter.renderOrder=-2,a.smoke.emitter.name="smoke",a.add(a.smoke.emitter),a.userData={script:"    this.position.x += delta * 30;\n    if (this.position.x > 20)\n        this.position.x = -20;\n"},a.userData.func=new Function("delta",a.userData.script),a}return Object(c.a)(n,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e)}}]),n}(P.u),I=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).beam=void 0,a.muzzle1=void 0,a.muzzle2=void 0,a.flash=void 0,a.smoke=void 0,a.particles=void 0;var r=e[0].texture;a.beam=new M.m({duration:1,looping:!1,startLife:new M.j(.1,.2),startSpeed:new M.f(0),startSize:new M.f(4),startColor:new M.e(new P.fb(1,.585716,.1691176,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.beam.emitter.renderOrder=0,a.beam.emitter.name="beam",a.beam.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.add(a.beam.emitter);var o={duration:1,looping:!1,startLife:new M.j(.1,.2),startSpeed:new M.f(0),startSize:new M.j(1,5),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:91,uTileCount:10,vTileCount:10,renderMode:M.r.LocalSpaceBillBoard};return a.muzzle1=new M.m(o),a.muzzle1.addBehavior(new M.b(new M.c(new P.fb(1,.3882312,.125,1),new P.fb(1,.826827,.3014706,1)))),a.muzzle1.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.muzzle1.addBehavior(new M.h(new M.n([[new M.a(91,94,97,100),0]]))),a.muzzle1.emitter.renderOrder=2,a.muzzle1.emitter.name="muzzle1",a.muzzle1.emitter.position.x=1,a.add(a.muzzle1.emitter),a.muzzle2=new M.m(o),a.muzzle2.addBehavior(new M.b(new M.c(new P.fb(1,.3882312,.125,1),new P.fb(1,.826827,.3014706,1)))),a.muzzle2.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.muzzle2.addBehavior(new M.h(new M.n([[new M.a(91,94,97,100),0]]))),a.muzzle2.emitter.renderOrder=2,a.muzzle2.emitter.name="muzzle2",a.muzzle2.emitter.position.x=1,a.muzzle2.emitter.rotation.x=Math.PI/2,a.add(a.muzzle2.emitter),a.flash=new M.m({duration:1,looping:!1,startLife:new M.j(.1,.2),startSpeed:new M.f(0),startSize:new M.j(1,2.5),startRotation:new M.j(-Math.PI,Math.PI),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.flash.addBehavior(new M.b(new M.c(new P.fb(1,.95,.82,1),new P.fb(1,.38,.12,1)))),a.flash.addBehavior(new M.h(new M.n([[new M.a(81,84.333,87.666,91),0]]))),a.flash.emitter.renderOrder=2,a.flash.emitter.name="flash",a.add(a.flash.emitter),a.smoke=new M.m({duration:2.5,looping:!1,startLife:new M.j(.6,.8),startSpeed:new M.j(.1,3),startSize:new M.j(.75,1.5),startRotation:new M.j(-Math.PI,Math.PI),startColor:new M.q(new P.fb(.6323,.6323,.6323,.31),new P.fb(1,1,1,.54)),worldSpace:!0,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:5,cycle:1,interval:.01,probability:1}],shape:new M.d({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,blending:P.P,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.smoke.addBehavior(new M.b(new M.c(new P.fb(1,1,1,1),new P.fb(1,1,1,0)))),a.smoke.addBehavior(new M.s(new M.j(-Math.PI/4,Math.PI/4))),a.smoke.addBehavior(new M.h(new M.n([[new M.a(28,31,34,37),0]]))),a.smoke.emitter.renderOrder=-2,a.smoke.emitter.name="smoke",a.smoke.emitter.rotation.y=Math.PI/2,a.add(a.smoke.emitter),a.particles=new M.m({duration:1,looping:!1,startLife:new M.j(.2,.6),startSpeed:new M.j(1,15),startSize:new M.j(.1,.3),startColor:new M.q(new P.fb(1,.91,.51,1),new P.fb(1,.44,.16,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new M.d({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.5}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.particles.emitter.renderOrder=1,a.particles.emitter.name="particles",a.particles.emitter.rotation.y=Math.PI/2,a.add(a.particles.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.beam.update(e),this.muzzle1.update(e),this.muzzle2.update(e),this.flash.update(e),this.smoke.update(e),this.particles.update(e)}}]),n}(P.u),L=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n),(e=t.call(this)).hProjectile=void 0,e.vProjectile=void 0;var a=(new P.ab).load("textures/projectile.png");a.name="textures/projectile.png";var r={duration:1,looping:!0,startLife:new M.f(.5),startSpeed:new M.f(0),startSize:new M.j(1,2),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(4),shape:new M.o,texture:a,blending:P.a,startTileIndex:0,uTileCount:1,vTileCount:1,instancingGeometry:[-2,-.5,0,0,0,2,-.5,0,1,0,2,.5,0,1,1,-2,.5,0,0,1],renderMode:M.r.LocalSpaceBillBoard};return e.hProjectile=new M.m(r),e.hProjectile.addBehavior(new M.b(new M.i([[new M.c(new P.fb(1,1,1,0),new P.fb(0,1,.25,1)),0],[new M.c(new P.fb(0,1,.25,1),new P.fb(1,1,1,0)),.5]]))),e.hProjectile.emitter.renderOrder=2,e.hProjectile.emitter.name="hProjectile",e.add(e.hProjectile.emitter),e.vProjectile=new M.m(r),e.vProjectile.addBehavior(new M.b(new M.i([[new M.c(new P.fb(1,1,1,0),new P.fb(0,1,.25,1)),0],[new M.c(new P.fb(0,1,.25,1),new P.fb(1,1,1,0)),.5]]))),e.vProjectile.emitter.renderOrder=2,e.vProjectile.emitter.name="vProjectile",e.vProjectile.emitter.rotation.x=Math.PI/2,e.add(e.vProjectile.emitter),e}return Object(c.a)(n,[{key:"update",value:function(e){this.hProjectile.update(e),this.vProjectile.update(e)}}]),n}(P.u),R=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).mainBeam=void 0,a.glowBeam=void 0,a.particles=void 0,a.beam=void 0,a.smoke=void 0,a.circle=void 0;var r=e[0].texture;return a.mainBeam=new M.m({duration:2,looping:!1,startLife:new M.j(.1,.3),startSpeed:new M.j(5,15),startSize:new M.j(1.5,1.25),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new M.d({angle:25*Math.PI/180,radius:.2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10}),a.mainBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.mainBeam.emitter.renderOrder=2,a.mainBeam.emitter.name="mainBeam",a.add(a.mainBeam.emitter),a.glowBeam=new M.m({duration:1,looping:!1,startLife:new M.j(1,1.6),startSpeed:new M.j(.7,1.5),startSize:new M.j(.4,.8),startColor:new M.e(new P.fb(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new M.d({angle:80*Math.PI/180,radius:.25,thickness:.5,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10}),a.glowBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.glowBeam.emitter.renderOrder=2,a.glowBeam.emitter.name="glowBeam",a.add(a.glowBeam.emitter),a.smoke=new M.m({duration:1,looping:!1,startLife:new M.j(.5,.8),startSpeed:new M.j(1,2.5),startSize:new M.j(1,1.5),startRotation:new M.j(0,2*Math.PI),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:.75,thickness:1}),texture:r,blending:P.P,startTileIndex:2,uTileCount:10,vTileCount:10}),a.smoke.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.smoke.addBehavior(new M.b(new M.c(new P.fb(1,.1509503,.07352942,1),new P.fb(0,0,0,0)))),a.smoke.addBehavior(new M.s(new M.j(2*-Math.PI,2*Math.PI))),a.smoke.emitter.renderOrder=-2,a.smoke.emitter.name="smoke",a.add(a.smoke.emitter),a.particles=new M.m({duration:1,looping:!1,startLife:new M.j(.6,1.2),startSpeed:new M.j(2,10),startSize:new M.j(.1,.4),startColor:new M.q(new P.fb(1,1,1,1),new P.fb(1,.1509503,.07352942,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new M.d({angle:50/180*Math.PI,radius:.5,thickness:1,arc:2*Math.PI}),texture:r,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.5}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.particles.emitter.renderOrder=0,a.particles.emitter.name="particles",a.add(a.particles.emitter),a.beam=new M.m({duration:1,looping:!1,startLife:new M.f(.2),startSpeed:new M.f(0),startSize:new M.f(7),startColor:new M.e(new P.fb(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.beam.emitter.renderOrder=0,a.beam.emitter.name="beam",a.beam.addBehavior(new M.t(new M.n([[new M.a(1,.66666,.33333,0),0]]))),a.add(a.beam.emitter),a.circle=new M.m({duration:1,looping:!1,startLife:new M.f(.4),startSpeed:new M.f(0),startSize:new M.f(4),startColor:new M.e(new P.fb(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:10,uTileCount:10,vTileCount:10}),a.circle.addBehavior(new M.t(new M.n([[new M.a(.3,.6,.9,1),0]]))),a.circle.addBehavior(new M.h(new M.n([[new M.a(10,13,16,19),0]]))),a.circle.emitter.renderOrder=2,a.circle.emitter.name="circle",a.add(a.circle.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e),this.beam.update(e),this.circle.update(e)}}]),n}(P.u),F=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).gatherParticles=void 0,a.mainBeam=void 0,a.glowBeam=void 0,a.smoke=void 0,a.particles=void 0,a.beam=void 0,a.circle=void 0;var r=e[0].texture,o=n.yellowColor,i=n.yellowColor2;return a.gatherParticles=new M.m({duration:1,looping:!1,startLife:new M.j(.3,.4),startSpeed:new M.j(-100,-150),startSize:new M.j(1,3),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:30,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:40,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.gatherParticles.addBehavior(new M.b(new M.c(new P.fb(o.x,o.y,o.z,.2),new P.fb(o.x,o.y,o.z,1)))),a.gatherParticles.emitter.renderOrder=2,a.gatherParticles.emitter.name="gatherParticles",a.add(a.gatherParticles.emitter),a.mainBeam=new M.m({duration:2,looping:!1,startLife:new M.j(.1,.3),startSpeed:new M.j(100,300),startSize:new M.j(1.5,12.5),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.mainBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.mainBeam.emitter.renderOrder=2,a.mainBeam.emitter.name="mainBeam",a.add(a.mainBeam.emitter),a.glowBeam=new M.m({duration:1,looping:!1,startLife:new M.j(1,1.6),startSpeed:new M.j(20,45),startSize:new M.j(4,8),startColor:new M.e(o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.glowBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.glowBeam.emitter.renderOrder=2,a.glowBeam.emitter.name="glowBeam",a.add(a.glowBeam.emitter),a.smoke=new M.m({duration:1,looping:!1,startLife:new M.j(.5,.8),startSpeed:new M.j(20,50),startSize:new M.j(10,15),startRotation:new M.j(0,2*Math.PI),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:7.5,thickness:1}),texture:r,blending:P.P,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.smoke.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.smoke.addBehavior(new M.b(new M.c(o,new P.fb(0,0,0,0)))),a.smoke.addBehavior(new M.s(new M.j(2*-Math.PI,2*Math.PI))),a.smoke.emitter.renderOrder=-2,a.smoke.emitter.name="smoke",a.add(a.smoke.emitter),a.particles=new M.m({duration:1,looping:!1,startLife:new M.j(.6,1.2),startSpeed:new M.j(40,200),startSize:new M.j(1,4),startColor:new M.q(new P.fb(1,1,1,1),o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.1}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.particles.emitter.renderOrder=0,a.particles.emitter.name="particles",a.add(a.particles.emitter),a.beam=new M.m({duration:1,looping:!1,startLife:new M.f(.2),startSpeed:new M.f(0),startSize:new M.f(100),startColor:new M.e(i),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:.35,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.beam.emitter.renderOrder=-2,a.beam.emitter.name="beam",a.beam.addBehavior(new M.t(new M.n([[new M.a(1,.66666,.33333,0),0]]))),a.add(a.beam.emitter),a.circle=new M.m({duration:1,looping:!1,startLife:new M.f(.4),startSpeed:new M.f(0),startSize:new M.f(40),startColor:new M.e(i),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.circle.addBehavior(new M.t(new M.n([[new M.a(.3,.6,.9,1),0]]))),a.circle.addBehavior(new M.h(new M.n([[new M.a(10,13,16,19),0]]))),a.circle.emitter.renderOrder=2,a.circle.emitter.name="circle",a.add(a.circle.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.gatherParticles.update(e),this.beam.update(e),this.mainBeam.update(e),this.glowBeam.update(e),this.circle.update(e),this.smoke.update(e),this.particles.update(e)}}]),n}(P.u);F.yellowColor=new P.fb(.9,.6,.25,1),F.yellowColor2=new P.fb(1,.95,.4,1);var N=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).gatherParticles=void 0,a.glow=void 0,a.glow2=void 0,a.particle=void 0,a.name="levelUp";var r=e[0].texture,o=new P.fb(.8,.8,.2,1);a.gatherParticles=new M.m({duration:.5,looping:!1,startLife:new M.j(.3,.4),startSpeed:new M.j(-100,-150),startSize:new M.j(1,2),startColor:new M.e(o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(100),shape:new M.v({radius:60,thickness:.8,arc:Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.05}),a.gatherParticles.addBehavior(new M.b(new M.c(new P.fb(.2,.2,.2,1),new P.fb(1,1,1,1)))),a.gatherParticles.emitter.name="gatherParticles",a.gatherParticles.emitter.renderOrder=2,a.add(a.gatherParticles.emitter);var i={duration:2,looping:!1,startLife:new M.f(2),startSpeed:new M.f(0),startSize:new M.j(60,80),startColor:new M.e(o),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10,instancingGeometry:[-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1],renderMode:M.r.LocalSpaceBillBoard};a.glow=new M.m(i),a.glow.addBehavior(new M.t(new M.n([[new M.a(0,.75,.9,1),0],[new M.a(1,.9,.75,0),.5]]))),a.glow.emitter.renderOrder=0,a.glow.emitter.name="glow",a.glow.emitter.rotation.x=-Math.PI/2,a.add(a.glow.emitter);var c={duration:2,looping:!1,startLife:new M.f(2),startSpeed:new M.f(0),startSize:new M.j(60,80),startColor:new M.e(o),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard};a.glow2=new M.m(c),a.glow2.addBehavior(new M.t(new M.n([[new M.a(0,.75,.9,1),0],[new M.a(1,.9,.75,0),.2]]))),a.glow2.emitter.renderOrder=0,a.glow2.emitter.name="glow2",a.add(a.glow2.emitter);var s={duration:1,looping:!1,startLife:new M.j(.6,.8),startSpeed:new M.j(120,180),startSize:new M.j(2,4),startColor:new M.e(o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.n([[new M.a(0,0,0,0),0],[new M.a(50,80,80,50),.4]]),shape:new M.d({radius:25,thickness:.2,angle:Math.PI/100}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard};return a.particle=new M.m(s),a.particle.addBehavior(new M.t(new M.n([[new M.a(0,.75,.9,1),0],[new M.a(1,.9,.75,0),.5]]))),a.particle.addBehavior(new M.k(new M.n([[new M.a(0,4*Math.PI*.75,4*Math.PI*.9,4*Math.PI),0]]))),a.particle.emitter.renderOrder=2,a.particle.emitter.name="particle",a.particle.emitter.rotation.x=-Math.PI/2,a.add(a.particle.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.gatherParticles.update(e),this.glow.update(e),this.glow2.update(e),this.particle.update(e)}}]),n}(P.u),D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).particles=void 0,a.circle=void 0,a.upflow=void 0,a.beam=void 0;var r=e[0].texture;return a.circle=new M.m({duration:1,looping:!1,startLife:new M.f(.6),startSpeed:new M.f(0),startSize:new M.j(2,10),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!1,maxParticle:2e3,emissionOverTime:new M.f(40),emissionBursts:[{time:0,count:100,cycle:1,interval:.01,probability:1}],shape:new M.d({radius:30,thickness:2,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.circle.addBehavior(new M.k(new M.j(6,8))),a.circle.addBehavior(new M.t(new M.n([[new M.a(0,.88,.88,0),0]]))),a.circle.addBehavior(new M.b(new M.c(new P.fb(.2,.6,1,1),new P.fb(.2,.2,1,1)))),a.circle.emitter.renderOrder=3,a.circle.emitter.name="mainBeam",a.add(a.circle.emitter),a.beam=new M.m({duration:1,looping:!1,startLife:new M.f(.6),startSpeed:new M.f(0),startSize:new M.f(100),startColor:new M.e(n.yellowColor),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.beam.emitter.renderOrder=0,a.beam.emitter.name="beam",a.beam.addBehavior(new M.t(new M.n([[new M.a(.3,.5,.6666,1),0]]))),a.add(a.beam.emitter),a.particles=new M.m({duration:1,looping:!1,startLife:new M.j(.6,.8),startSpeed:new M.j(20,30),startSize:new M.j(2,6),startColor:new M.q(n.darkOrangeColor,n.redColor),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:30,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:20,thickness:3,arc:2*Math.PI}),texture:r,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.1}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.3,.25,.1),0]]))),a.particles.emitter.renderOrder=2,a.particles.emitter.name="particles",a.add(a.particles.emitter),a.upflow=new M.m({duration:1,looping:!1,startLife:new M.f(.6),startSpeed:new M.f(0),startSize:new M.f(60),startColor:new M.q(new P.fb(1,.2,0,1),n.redColor),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:.4,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:M.r.LocalSpaceBillBoard}),a.upflow.addBehavior(new M.t(new M.n([[new M.a(1,.9,.6,.3),0]]))),a.upflow.addBehavior(new M.h(new M.n([[new M.a(38,39,40,46),0]]))),a.upflow.emitter.renderOrder=1,a.upflow.emitter.name="upflow",a.add(a.upflow.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.circle.update(e),this.beam.update(e),this.upflow.update(e),this.particles.update(e)}}]),n}(P.u);D.yellowColor=new P.fb(1,1,.3,1),D.darkOrangeColor=new P.fb(1,.7,.1,1),D.redColor=new P.fb(1,0,0,1);var V=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).smoke=void 0,a.name="shipSmoke";var r=e[0].texture,o=new P.fb(.5,.5,.5,1);return a.smoke=new M.m({duration:5,looping:!0,startLife:new M.j(1.5,3),startSpeed:new M.j(20,30),startSize:new M.j(10,15),startColor:new M.e(o),worldSpace:!0,maxParticle:100,emissionOverTime:new M.f(20),shape:new M.d({radius:10,thickness:1,angle:.2}),texture:r,blending:P.P,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.smoke.addBehavior(new M.b(new M.c(new P.fb(1,1,1,1),new P.fb(.8,.8,.8,0)))),a.smoke.addBehavior(new M.t(new M.n([[new M.a(.2,1,1,1),0]]))),a.smoke.emitter.name="smoke",a.smoke.emitter.renderOrder=2,a.smoke.emitter.rotation.x=-Math.PI/2,a.add(a.smoke.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.smoke.update(e)}}]),n}(P.u),W=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).beam=void 0,a.beamWorld=void 0,a.electricity=void 0,a.electricBall=void 0,a.name="ElectricBall";var r=e[1].texture;return a.beam=new M.m({duration:1,looping:!0,startLife:new M.f(1),startSpeed:new M.f(0),startSize:new M.f(15),startColor:new M.e(new P.fb(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(1),emissionBursts:[],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.beam.emitter.renderOrder=0,a.beam.emitter.name="beam",a.add(a.beam.emitter),a.beamWorld=new M.m({duration:1,looping:!0,startLife:new M.j(.1,.4),startSpeed:new M.f(0),startSize:new M.j(7.5,15),startColor:new M.q(new P.fb(.11176472,.28738328,.8,1),new P.fb(.8,.9275356*.8,.08235296,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.j(5,10),emissionBursts:[],shape:new M.v({radius:.01,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.beamWorld.emitter.renderOrder=0,a.beamWorld.emitter.name="beamWorld",a.beamWorld.addBehavior(new M.b(new M.c(new P.fb(1,1,1,1),new P.fb(0,0,0,1)))),a.add(a.beamWorld.emitter),a.electricity=new M.m({duration:.5,looping:!0,startLife:new M.j(.2,.3),startSpeed:new M.f(0),startSize:new M.j(3,6),startRotation:new M.j(-Math.PI,Math.PI),startColor:new M.q(new P.fb(.1397059,.3592291,1,1),new P.fb(1,.9275356,.1029412,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new M.j(5,10),emissionBursts:[],shape:new M.o,texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10}),a.electricity.addBehavior(new M.h(new M.n([[new M.a(53,56,59,62),0]]))),a.electricity.addBehavior(new M.t(new M.n([[new M.a(1,1,.75,0),0]]))),a.electricity.emitter.renderOrder=2,a.electricity.emitter.name="electricity",a.add(a.electricity.emitter),a.electricBall=new M.m({duration:.4,looping:!0,startLife:new M.j(.2,.4),startSpeed:new M.f(0),startSize:new M.j(5,10),startRotation:new M.j(-Math.PI,Math.PI),startColor:new M.q(new P.fb(.1397059,.3592291,1,1),new P.fb(1,.9275356,.1029412,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(3),emissionBursts:[],shape:new M.o,texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10}),a.electricBall.addBehavior(new M.h(new M.n([[new M.a(62,65,68,71),0]]))),a.electricBall.emitter.renderOrder=1,a.electricBall.emitter.name="electricBall",a.add(a.electricBall.emitter),a.userData={script:"    this.position.x += delta * 30;\n    if (this.position.x > 20)\n        this.position.x = -20;\n"},a.userData.func=new Function("delta",a.userData.script),a}return Object(c.a)(n,[{key:"update",value:function(e){this.beam.update(e),this.beamWorld.update(e),this.electricity.update(e),this.electricBall.update(e)}}]),n}(P.u),G=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).particles=void 0,a.glowBeam=void 0,a.beam=void 0;var r=e[0].texture;return a.beam=new M.m({duration:1,looping:!0,startLife:new M.f(1),startSpeed:new M.f(0),startSize:new M.f(20),startColor:new M.e(new P.fb(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(1),emissionBursts:[],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.beam.emitter.renderOrder=0,a.beam.emitter.name="beam",a.add(a.beam.emitter),a.add(a.beam.emitter),a.glowBeam=new M.m({duration:1,looping:!0,startLife:new M.f(.5),startSpeed:new M.f(0),startSize:new M.f(10),startColor:new M.e(new P.fb(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!0,maxParticle:500,emissionOverTime:new M.f(120),shape:new M.v({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10}),a.glowBeam.addBehavior(new M.t(new M.n([[new M.a(1,1,.8,.5),0]]))),a.glowBeam.addBehavior(new M.b(new M.c(new P.fb(1,1,1,1),new P.fb(0,0,0,0)))),a.glowBeam.emitter.renderOrder=2,a.glowBeam.emitter.name="glowBeam",a.add(a.glowBeam.emitter),a.particles=new M.m({duration:1,looping:!0,startLife:new M.j(.3,.6),startSpeed:new M.j(20,40),startSize:new M.j(1,2),startColor:new M.q(new P.fb(1,1,1,.5),new P.fb(.5220588,.6440161,1,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(60),shape:new M.d({angle:80/180*Math.PI,radius:1,thickness:.3,arc:2*Math.PI}),texture:r,renderMode:M.r.StretchedBillBoard,speedFactor:.2,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.particles.emitter.renderOrder=0,a.particles.emitter.rotateY(-Math.PI/2),a.particles.emitter.name="particles",a.add(a.particles.emitter),a.userData={script:"    this.position.x += delta * 200;\n    if (this.position.x > 200)\n        this.position.x = -200;\n"},a.userData.func=new Function("delta",a.userData.script),a}return Object(c.a)(n,[{key:"update",value:function(e){this.beam.update(e),this.glowBeam.update(e),this.particles.update(e)}}]),n}(P.u),U=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this)).mainBeam=void 0,a.glowBeam=void 0,a.smoke=void 0,a.particles=void 0,a.beam=void 0,a.circle=void 0,a.circle2=void 0;var r=e[0].texture,o=n.yellowColor,i=n.yellowColor2;return a.mainBeam=new M.m({duration:2,looping:!1,startLife:new M.j(.1,.3),startSpeed:new M.j(100,300),startSize:new M.j(1.5,12.5),startColor:new M.e(new P.fb(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.mainBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.mainBeam.emitter.renderOrder=2,a.mainBeam.emitter.name="mainBeam",a.add(a.mainBeam.emitter),a.glowBeam=new M.m({duration:1,looping:!1,startLife:new M.j(1,1.6),startSpeed:new M.j(20,45),startSize:new M.j(4,8),startColor:new M.e(o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.glowBeam.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.glowBeam.emitter.renderOrder=2,a.glowBeam.emitter.name="glowBeam",a.add(a.glowBeam.emitter),a.smoke=new M.m({duration:1,looping:!1,startLife:new M.j(.8,1.2),startSpeed:new M.j(20,50),startSize:new M.j(10,15),startRotation:new M.j(0,2*Math.PI),startColor:new M.e(new P.fb(1,1,1,.5)),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:7.5,arc:Math.PI,thickness:1}),texture:r,blending:P.P,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.smoke.addBehavior(new M.t(new M.n([[new M.a(1,.95,.75,0),0]]))),a.smoke.addBehavior(new M.b(new M.c(o,new P.fb(0,0,0,0)))),a.smoke.addBehavior(new M.s(new M.j(2*-Math.PI,2*Math.PI))),a.smoke.addBehavior(new M.u(new M.n([[new M.a(1,.95,.75,0),0]]))),a.smoke.emitter.renderOrder=-2,a.smoke.emitter.name="smoke",a.add(a.smoke.emitter),a.particles=new M.m({duration:1,looping:!1,startLife:new M.j(.6,1.2),startSpeed:new M.j(40,200),startSize:new M.j(1,4),startColor:new M.q(new P.fb(1,1,1,1),o),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new M.v({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:P.P,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:M.r.StretchedBillBoard,speedFactor:.1}),a.particles.addBehavior(new M.t(new M.n([[new M.a(1,.25,.05,0),0]]))),a.particles.emitter.renderOrder=0,a.particles.emitter.name="particles",a.add(a.particles.emitter),a.beam=new M.m({duration:1,looping:!1,startLife:new M.f(.2),startSpeed:new M.f(0),startSize:new M.f(100),startColor:new M.e(i),worldSpace:!1,maxParticle:10,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.beam.emitter.renderOrder=-2,a.beam.emitter.name="beam",a.beam.addBehavior(new M.t(new M.n([[new M.a(1,.66666,.33333,0),0]]))),a.add(a.beam.emitter),a.circle=new M.m({duration:1,looping:!1,startLife:new M.f(.4),startSpeed:new M.f(0),startSize:new M.f(40),startColor:new M.e(i),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:M.r.BillBoard}),a.circle.addBehavior(new M.t(new M.n([[new M.a(.3,.6,.9,1),0]]))),a.circle.addBehavior(new M.h(new M.n([[new M.a(10,13,16,19),0]]))),a.circle.emitter.renderOrder=2,a.circle.emitter.name="circle",a.add(a.circle.emitter),a.circle2=new M.m({duration:1,looping:!1,startLife:new M.f(.4),startSpeed:new M.f(0),startSize:new M.f(40),startColor:new M.e(i),worldSpace:!1,maxParticle:100,emissionOverTime:new M.f(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new M.o,texture:r,blending:P.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:M.r.LocalSpaceBillBoard}),a.circle2.addBehavior(new M.t(new M.n([[new M.a(.3,.6,.9,1),0]]))),a.circle2.addBehavior(new M.h(new M.n([[new M.a(10,13,16,19),0]]))),a.circle2.emitter.renderOrder=2,a.circle2.emitter.name="circle",a.circle2.emitter.rotation.x=Math.PI/2,a.add(a.circle2.emitter),a}return Object(c.a)(n,[{key:"update",value:function(e){this.beam.update(e),this.mainBeam.update(e),this.glowBeam.update(e),this.circle.update(e),this.smoke.update(e),this.particles.update(e),this.circle2.update(e)}}]),n}(P.u);U.yellowColor=new P.fb(.9,.6,.25,1),U.yellowColor2=new P.fb(1,.95,.4,1);var A=a.createContext(null),H=A.Consumer,q=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).removeObject3d=function(e){e.parent&&e.parent.remove(e)},a.duplicateObject3d=function(e){e.parent&&e.parent.add(e.clone())},a.addObject3d=function(e,t){var n;switch(e){case"particle":var r=a.state.textures[0].texture;n=new M.m({maxParticle:1e4,shape:new M.d,emissionOverTime:new M.f(100),startLife:new M.f(30),startSpeed:new M.f(10),startSize:new M.f(1),startColor:new M.e(new P.fb(1,1,1,1)),texture:r,blending:P.a,startTileIndex:0,uTileCount:10,vTileCount:10,worldSpace:!0}).emitter,a.state.scene.add(n);break;case"box":n=new P.J(new P.d(10,10,10),new P.K({color:13421772})),a.state.scene.add(n)}n&&(t.add(n),a.state.actions.select(n),a.setState({}))},a.update=0,a.animate=function(e){a.update+=e,a.update>.1&&(a.state.actions.updateProperties(),a.update=0)};var r=(new P.ab).load("textures/texture1.png");r.name="textures/texture1.png";var o=(new P.ab).load("textures/texture2.png");o.name="textures/texture2.png";var i={scene:new P.V,script:a.animate,selection:[],textures:[{img:"./textures/texture1.png",texture:r},{img:"./textures/texture2.png",texture:o}],actions:{onOpenDemo:function(e){var t=a.createScene(e);a.setState({scene:t})},onSaveAs:function(){var e=document.createElement("a"),t=new Blob([JSON.stringify(a.state.scene.toJSON())],{type:"application/json"});e.href=URL.createObjectURL(t),e.download="scene.json",e.click()},onImport:function(e){for(var t=e.length,n=0;n<t;n++){var r=URL.createObjectURL(e[n]),o=new M.p;o.setCrossOrigin(""),o.load(r,(function(e){a.state.scene.add(e)}),(function(){}),(function(){}))}},select:function(e){a.setState({selection:[e]})},selectAddition:function(e){-1===a.state.selection.indexOf(e)&&(a.state.selection.push(e),a.setState({selection:a.state.selection}))},addObject3d:a.addObject3d,removeObject3d:a.removeObject3d,duplicateObject3d:a.duplicateObject3d,updateParticleSystem:function(){},updateProperties:function(){a.setState({scene:a.state.scene})},addTexture:function(e){a.state.textures.push(e),a.setState({textures:a.state.textures})}}};return a.state=i,a}return Object(c.a)(n,[{key:"createScene",value:function(e){var t,n=new P.V;n.background=new P.g(6710886),0===e?(t=new z(this.state.textures)).name="Toon Projectile":1===e?(t=new I(this.state.textures)).name="BulletMuzzle":2===e?(t=new L).name="BulletProjectile":3===e?(t=new V(this.state.textures)).name="shipSmoke":4===e?(t=new R(this.state.textures)).name="ToonExplosion":5===e?(t=new F(this.state.textures)).name="Explosion":6===e?(t=new N(this.state.textures)).name="LevelUp":7===e?(t=new D(this.state.textures)).name="PickUp":8==e?(t=new W(this.state.textures)).name="ElectricBall":9==e?(t=new G(this.state.textures)).name="ShipTrail":(t=new U(this.state.textures)).name="Explosion2",n.add(t);var a=new P.c(100);a.name="axisHelper",n.add(a);var r=new P.S(new P.g(1,1,1),.8,200);r.position.set(50,50,50),n.add(r);var o=new P.b(new P.g(1,1,1),.2);return n.add(o),n}}]),Object(c.a)(n,[{key:"render",value:function(){return a.createElement(A.Provider,{value:this.state},this.props.children)}}]),n}(a.Component),$=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).container=void 0,r.stats=void 0,r.camera=void 0,r.renderer=void 0,r.clock=void 0,r.controls=void 0,r.appContext=void 0,r.onResize=function(e){if(r.renderer.domElement.parentElement.clientWidth-10!==r.renderer.domElement.width||r.renderer.domElement.parentElement.clientHeight-10!==r.renderer.domElement.height){var t=r.renderer.domElement.parentElement.clientWidth-10,n=r.renderer.domElement.parentElement.clientHeight-10;r.camera.aspect=t/n,r.camera.updateProjectionMatrix(),r.renderer.domElement.style.width="100%",r.renderer.domElement.style.height="100%",r.renderer.setSize(t,n)}},r.animate=function(){requestAnimationFrame(r.animate),r.onResize(null),r.renderScene(),r.stats.update()},r.container=a.createRef(),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.init()&&this.animate()}},{key:"componentDidUpdate",value:function(e,t,n){this.camera.aspect=this.props.width/this.props.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.props.width,this.props.height)}},{key:"init",value:function(){if(!this.container.current)return!1;if(!k.isWebGLAvailable())return document.body.appendChild(k.getWebGLErrorMessage()),!1;this.renderer=new P.gb;var e=this.props.width,t=this.props.height;return this.clock=new P.f,this.camera=new P.R(50,e/t,1,1e3),this.camera.position.set(50,50,50),this.controls=new T.a(this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.controls.enableDamping=!0,this.controls.dampingFactor=.1,this.controls.rotateSpeed=.2,this.controls.update(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.container.current.appendChild(this.renderer.domElement),this.stats=new B.a,this.stats.dom.style.position="absolute",this.stats.dom.style.left="",this.stats.dom.style.right="0",this.container.current.appendChild(this.stats.dom),this.onResize(null),!0}},{key:"renderScene",value:function(){if(this.appContext){this.controls.update();var e=this.clock.getDelta();this.appContext.script(e),this.appContext.scene.traverse((function(t){t.userData&&t.userData.func&&t.userData.func.call(t,e),t instanceof M.l&&t.system.update(e)})),this.renderer.render(this.appContext.scene,this.camera)}}},{key:"render",value:function(){var e=this;return console.log("rendering ThreejsViewPort"),a.createElement(H,null,(function(t){if(t)return e.appContext=t,a.createElement("div",{ref:e.container,style:{width:"100%",height:"100%"}})}))}}]),n}(a.PureComponent),J=n(13),K=(n(249),function(e){var t=a.useState(e.value+""),n=Object(J.a)(t,2),r=n[0],o=n[1],i=a.useState(!1),l=Object(J.a)(i,2),c=l[0],s=l[1];return a.createElement("input",{className:"number-input",value:c?r:e.value,size:5,onChange:function(e){c&&o(e.target.value)},onBlur:function(t){var n=parseFloat(r);n!==e.value&&e.onChange(n),s(!1)},onFocus:function(t){r!==e.value+""&&o(e.value+""),s(!0)},onKeyDown:function(t){if("Enter"===t.key){var n=parseFloat(r);n!==e.value&&e.onChange(n)}}})}),X=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){console.log("rendered Vector3");var e=this.props,t=e.x,n=e.y,r=e.z,o=e.unitConversion,i=void 0===o?1:o,l=e.onChange,c=e.name;return a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},c),a.createElement("label",null,"X:"),a.createElement(K,{value:t*i,onChange:function(e){l(e/i,n,r)}}),a.createElement("label",null,"Y:"),a.createElement(K,{value:n*i,onChange:function(e){l(t,e/i,r)}}),a.createElement("label",null,"Z:"),a.createElement(K,{value:r*i,onChange:function(e){l(t,n,e/i)}}))}}]),n}(a.PureComponent),Y=function(e){var t=a.useState(e.value),n=Object(J.a)(t,2),r=n[0],o=n[1],i=a.useState(!1),l=Object(J.a)(i,2),c=l[0],s=l[1];return a.createElement("input",{className:"string-input",value:c?r:e.value,size:20,onChange:function(e){c&&o(e.target.value)},onBlur:function(t){r!==e.value&&e.onChange(r),s(!1)},onFocus:function(t){r!==e.value&&o(e.value),s(!0)},onKeyDown:function(t){"Enter"===t.key&&r!==e.value&&e.onChange(r)}})},Z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeName=function(e){a.props.object3d.name=e,a.props.updateProperties()},a.onChangePosition=function(e,t,n){a.props.object3d.position.set(e,t,n),a.props.updateProperties()},a.onChangeScale=function(e,t,n){a.props.object3d.scale.set(e,t,n),a.props.updateProperties()},a.onChangeRotation=function(e,t,n){a.props.object3d.rotation.set(e,t,n),a.props.updateProperties()},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return console.log("rendered objectProperties"),a.createElement("div",{className:"property-container"},a.createElement(H,null,(function(t){return t&&a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"Name:"),a.createElement(Y,{value:e.props.object3d.name,onChange:e.onChangeName}))})),a.createElement(H,null,(function(t){return t&&a.createElement(X,{name:"Position",x:e.props.object3d.position.x,y:e.props.object3d.position.y,z:e.props.object3d.position.z,onChange:e.onChangePosition})})),a.createElement(H,null,(function(t){return t&&a.createElement(X,{name:"Rotation",x:e.props.object3d.rotation.x,y:e.props.object3d.rotation.y,z:e.props.object3d.rotation.z,onChange:e.onChangeRotation,unitConversion:180/Math.PI})})),a.createElement(H,null,(function(t){return t&&a.createElement(X,{name:"Scale",x:e.props.object3d.scale.x,y:e.props.object3d.scale.y,z:e.props.object3d.scale.z,onChange:e.onChangeScale})})))}}]),n}(a.PureComponent),_=n(42),Q=n(202);n(413);function ee(e){return"rgba(".concat(255*e.x|0,",").concat(255*e.y|0,",").concat(255*e.z|0,",").concat(e.w,")")}var te=function(e){var t=a.useState(!1),n=Object(J.a)(t,2),r=n[0],o=n[1],i=e.color,l=e.onChange;return a.createElement("div",{className:"color-editor"},a.createElement("button",{style:{backgroundColor:ee(i),height:"20px"},onClick:function(){o(!r)}}),ee(i),r?a.createElement("div",{className:"popover"},a.createElement("div",{className:"cover",onClick:function(){o(!1)}}),a.createElement(Q.SketchPicker,{color:{r:255*i.x|0,g:255*i.y|0,b:255*i.z|0,a:i.w},onChange:function(e){var t=new P.fb;t.x=Math.min(255,e.rgb.r)/255,t.y=Math.min(255,e.rgb.g)/255,t.z=Math.min(255,e.rgb.b)/255,t.w=e.rgb.a,l(t)}})):null)},ne=(n(414),n(27)),ae=n(22);function re(e,t,n){return e*(1-n)+t*n}var oe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).x=function(t){return re(e.props.xFrom,e.props.xTo,t)},e.y=function(t){return re(e.props.yFrom,e.props.yTo,t)},e}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.xFrom,a=t.yFrom,r=t.xTo,o=t.yTo;return e.xFrom!==n||e.yFrom!==a||e.xTo!==r||e.yTo!==o}}]),n}(r.a.Component),ie=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){if(Object(ne.a)(Object(ae.a)(n.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var t=this.props,a=t.curveColor,r=t.curveWidth,o=t.value,i=Object(J.a)(o.p,4);i[0],i[1],i[2],i[3];return e.curveColor!==a||e.curveWidth!==r||e.value!==o}},{key:"render",value:function(){var e=this.props,t=e.curveColor,n=e.curveWidth,a=e.value,o=this.x,i=this.y,l=Math.floor((o(1)-o(0))/5),c="M".concat(o(0),",").concat(i(a.genValue(0))," ");if(l>0)for(var s=1/l;s<=1;s+=1/l)c+="L".concat(o(s),",").concat(i(a.genValue(s))," ");return c+="L".concat(o(1),",").concat(i(a.genValue(1))," "),r.a.createElement("path",{fill:"none",stroke:t,strokeWidth:n,d:c})}}]),n}(oe),le=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){if(Object(ne.a)(Object(ae.a)(n.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var t=this.props,a=t.xstart,r=t.ystart,o=t.handleRadius,i=t.handleColor,l=t.hover,c=t.down,s=t.background,u=t.handleStroke,d=t.xval,m=t.yval,p=t.onMouseEnter,h=t.onMouseLeave,w=t.onMouseDown;return e.xstart!==a||e.ystart!==r||e.handleRadius!==o||e.handleColor!==i||e.hover!==l||e.down!==c||e.background!==s||e.handleStroke!==u||e.xval!==d||e.yval!==m||e.onMouseDown!==w||e.onMouseLeave!==h||e.onMouseEnter!==p}},{key:"render",value:function(){var e=this.x,t=this.y,n=this.props,a=n.xstart,o=n.ystart,i=n.handleRadius,l=n.handleColor,c=n.hover,s=n.down,u=n.background,d=n.handleStroke,m=n.xval,p=n.yval,h=n.onMouseEnter,w=n.onMouseLeave,f=n.onMouseDown,v=e(a),b=t(o),g=e(m),C=t(p),x=Math.atan2(C-b,g-v),y=g-i*Math.cos(x),S=C-i*Math.sin(x);return r.a.createElement("g",null,r.a.createElement("line",{stroke:l,strokeWidth:c||s?1+d:d,x1:y,y1:S,x2:v,y2:b}),r.a.createElement("circle",{cx:g,cy:C,r:i,stroke:l,strokeWidth:s?2*d:d,fill:s?u:l,onMouseEnter:h,onMouseLeave:w,onMouseDown:f}))}}]),n}(oe),ce=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).rootRef=Object(a.createRef)(),r.positionForEvent=function(e){if(r.rootRef.current){var t=r.rootRef.current.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}return[0,0]},r.x=function(e){},r.y=function(e){},r.inversex=function(e){},r.inversey=function(e){},r.onDownLeave=function(e){r.state.down&&(r.onDownMove(e),r.setState({down:-1,hover:-1}))},r.onDownMove=function(e){if(r.state.down>=0){e.preventDefault();var t=r.positionForEvent(e),n=Object(J.a)(t,2),a=n[0],o=n[1],i=new M.n(r.props.value.functions),l=(r.props.width,r.state.curve),c=i.getFunction(l);if(0===r.state.down){var s=c.p[0];if(c.p[0]=(r.props.height-o)/r.props.height,c.p[1]+=c.p[0]-s,i.setStartX(l,a/r.props.width),l-1>=0){var u=i.getFunction(l-1);u.p[3]=(r.props.height-o)/r.props.height,u.p[2]+=c.p[0]-s,i.setFunction(l-1,i.getFunction(l-1).clone())}i.setFunction(l,c.clone())}if(3===r.state.down){var d=c.p[3];if(c.p[3]=(r.props.height-o)/r.props.height,c.p[2]+=c.p[3]-d,i.setEndX(l,a/r.props.width),l+1<i.numOfFunctions){var m=i.getFunction(l+1);m.p[0]=(r.props.height-o)/r.props.height,m.p[1]+=c.p[3]-d,i.setFunction(l+1,i.getFunction(l+1).clone())}i.setFunction(l,c.clone())}1===r.state.down&&(c.p[1]=(r.props.height-o)/r.props.height,i.setFunction(l,c.clone())),2===r.state.down&&(c.p[2]=(r.props.height-o)/r.props.height,i.setFunction(l,c.clone())),r.props.onChange&&r.props.onChange(i)}},r.onDownUp=function(){r.setState({down:-1})},r.state={curve:-1,down:-1,hover:-1},r}return Object(c.a)(n,[{key:"onEnterHandle",value:function(e,t){this.state.down||this.setState({hover:t,curve:e})}},{key:"onDownHandle",value:function(e,t,n){n.preventDefault(),this.setState({hover:-1,down:t,curve:e})}},{key:"onLeaveHandle",value:function(){this.state.down||this.setState({hover:-1})}},{key:"render",value:function(){for(var e=this,t=this.props,r=t.width,o=t.height,i=t.value,l=t.curveWidth,c=void 0===l?1:l,s=t.curveColor,u=void 0===s?"#000":s,d=t.handleRadius,m=void 0===d?n.defaultP.handleRadius:d,p=t.handleColor,h=void 0===p?"#f00":p,w=t.handleStroke,f=void 0===w?1:w,v=t.background,b=void 0===v?"#fff":v,g=this.state,C=g.curve,x=g.down,y=g.hover,S=[],E=function(t){var n=i.getStartX(t),l=i.getEndX(t),s=i.getFunction(t),d=s.getSlope(0),p=s.getSlope(1);S.push(a.createElement("g",{key:t},a.createElement(ie,{xFrom:n*r,xTo:l*r,yFrom:o,yTo:0,curveColor:u,curveWidth:c,value:s}),a.createElement(le,{xFrom:n*r,xTo:l*r,yFrom:o,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,0,n)},onMouseEnter:function(n){return e.onEnterHandle(t,0)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:s.p[0],xval:0,yval:s.p[0],handleRadius:m,handleColor:h,down:C===t&&0===x,hover:C===t&&0===y,handleStroke:f,background:b}),a.createElement(le,{xFrom:n*r,xTo:l*r,yFrom:o,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,1,n)},onMouseEnter:function(n){return e.onEnterHandle(t,1)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:s.p[0],xval:1/3,yval:1/3*d+s.p[0],handleRadius:m,handleColor:h,down:C===t&&1===x,hover:C===t&&1===y,handleStroke:f,background:b}),a.createElement(le,{xFrom:n*r,xTo:l*r,yFrom:o,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,2,n)},onMouseEnter:function(n){return e.onEnterHandle(t,2)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:s.p[3],xval:1-1/3,yval:s.p[3]-1/3*p,handleRadius:m,handleColor:h,down:C===t&&2===x,hover:C===t&&2===y,handleStroke:f,background:b}),a.createElement(le,{xFrom:n*r,xTo:l*r,yFrom:o,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,3,n)},onMouseEnter:function(n){return e.onEnterHandle(t,3)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:s.p[3],xval:1,yval:s.p[3],handleRadius:m,handleColor:h,down:C===t&&3===x,hover:C===t&&3===y,handleStroke:f,background:b})))},j=0;j<i.numOfFunctions;j++)E(j);return a.createElement("div",{ref:this.rootRef,onMouseMove:this.onDownMove,onMouseUp:this.onDownUp,onMouseLeave:this.onDownLeave},a.createElement("svg",{width:r,height:o},S))}}]),n}(a.PureComponent);ce.defaultP={padding:[0,0,0,0],handleRadius:4};var se={value:["constant","intervalValue"],functionValue:["piecewiseBezier"],color:["color","randomColor"],functionColor:["colorRange","gradient"]},ue=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).changeEditor=function(e){var t=null;switch(e.target.value){case"constant":t=new M.f(0);break;case"color":t=new M.e(new P.fb(1,1,1,1));break;case"intervalValue":t=new M.j(0,1);break;case"colorRange":t=new M.c(new P.fb(0,0,0,1),new P.fb(1,1,1,1));break;case"randomColor":t=new M.q(new P.fb(0,0,0,1),new P.fb(1,1,1,1));break;case"piecewiseBezier":t=new M.n}t&&a.props.updateGenerator(t)},a.changeValue=function(e){a.props.updateGenerator(new M.f(e))},a.changeColor=function(e){a.props.updateGenerator(new M.e(e))},a.changeValueA=function(e){var t=a.props.generator;a.props.updateGenerator(new M.j(e,t.b))},a.changeValueB=function(e){var t=a.props.generator;a.props.updateGenerator(new M.j(t.a,e))},a.changeColorRangeA=function(e){var t=a.props.generator;a.props.updateGenerator(new M.c(e,t.b))},a.changeColorRangeB=function(e){var t=a.props.generator;a.props.updateGenerator(new M.c(t.a,e))},a.changeRandomColorA=function(e){var t=a.props.generator;a.props.updateGenerator(new M.q(e,t.b))},a.changeRandomColorB=function(e){var t=a.props.generator;a.props.updateGenerator(new M.q(t.a,e))},a.changeCurve=function(e){a.props.updateGenerator(new M.n(e.functions))};se[e.allowedType[0]][0];return a.state={open:!1},a}return Object(c.a)(n,[{key:"getEditorType",value:function(e){return e instanceof M.f?"constant":e instanceof M.j?"intervalValue":e instanceof M.n?"piecewiseBezier":e instanceof M.e?"color":e instanceof M.q?"randomColor":e instanceof M.c?"colorRange":e instanceof M.i?"gradient":"constant"}},{key:"render",value:function(){var e,t=this.props,n=t.name,r=t.generator,o=t.allowedType,i=[],l=Object(_.a)(o);try{for(l.s();!(e=l.n()).done;){var c,s=e.value,u=Object(_.a)(se[s]);try{for(u.s();!(c=u.n()).done;){var d=c.value;i.push(d)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){l.e(h)}finally{l.f()}var m,p=this.getEditorType(r);switch(p){case"constant":m=a.createElement(a.Fragment,null,a.createElement(K,{value:r.value,onChange:this.changeValue}));break;case"color":m=a.createElement(a.Fragment,null,a.createElement(te,{color:r.color,onChange:this.changeColor}));break;case"intervalValue":m=a.createElement(a.Fragment,null,a.createElement(K,{value:r.a,onChange:this.changeValueA}),"-",a.createElement(K,{value:r.b,onChange:this.changeValueB}));break;case"piecewiseBezier":m=a.createElement(a.Fragment,null,a.createElement(ce,{height:40,width:240,value:r,onChange:this.changeCurve}));break;case"colorRange":m=a.createElement(a.Fragment,null,a.createElement(te,{color:r.a,onChange:this.changeColorRangeA}),"-",a.createElement(te,{color:r.b,onChange:this.changeColorRangeB}));break;case"randomColor":m=a.createElement(a.Fragment,null,a.createElement(te,{color:r.a,onChange:this.changeRandomColorA}),"-",a.createElement(te,{color:r.b,onChange:this.changeRandomColorB}))}return a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},n),m,a.createElement("select",{className:"editor-select",onChange:this.changeEditor,value:p},i.map((function(e){return a.createElement("option",{key:e,value:e},e)}))))}}]),n}(a.PureComponent),de=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeStartSpeed=function(e){console.log("change start speed"),a.props.particleSystem.startSpeed=e,a.props.updateProperties()},a.onChangeStartLife=function(e){console.log("change start life"),a.props.particleSystem.startLife=e,a.props.updateProperties()},a.onChangeStartSize=function(e){console.log("change start size"),a.props.particleSystem.startSize=e,a.props.updateProperties()},a.onChangeStartColor=function(e){console.log("change start color"),a.props.particleSystem.startColor=e,a.props.updateProperties()},a.OnChangeStartRotation=function(e){console.log("change start rotation"),a.props.particleSystem.startRotation=e,a.props.updateProperties()},a.OnChangeEmissionOverTime=function(e){console.log("change start rotation"),a.props.particleSystem.emissionOverTime=e,a.props.updateProperties()},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;console.log("rendered objectProperties");var t=["value","functionValue"],n=["color","functionColor"];return a.createElement("div",{className:"property-container"},a.createElement(H,null,(function(n){return n&&a.createElement(ue,{name:"Start Life",allowedType:t,generator:e.props.particleSystem.startLife,updateGenerator:e.onChangeStartLife})})),a.createElement(H,null,(function(n){return n&&a.createElement(ue,{name:"Start Size",allowedType:t,generator:e.props.particleSystem.startSize,updateGenerator:e.onChangeStartSize})})),a.createElement(H,null,(function(n){return n&&a.createElement(ue,{name:"Start Speed",allowedType:t,generator:e.props.particleSystem.startSpeed,updateGenerator:e.onChangeStartSpeed})})),a.createElement(H,null,(function(t){return t&&a.createElement(ue,{name:"Start Color",allowedType:n,generator:e.props.particleSystem.startColor,updateGenerator:e.onChangeStartColor})})),a.createElement(H,null,(function(n){return n&&a.createElement(ue,{name:"Start Rotation",allowedType:t,generator:e.props.particleSystem.startRotation,updateGenerator:e.OnChangeStartRotation})})),a.createElement(H,null,(function(n){return n&&a.createElement(ue,{name:"Emission Over Time",allowedType:t,generator:e.props.particleSystem.emissionOverTime,updateGenerator:e.OnChangeEmissionOverTime})})))}}]),n}(a.PureComponent),me=n(208),pe=n(471),he=n(11),we=n(472),fe=n(473),ve=n(474),be=n(203),ge=n.n(be),Ce=n(488),xe=n(475),ye=n(476),Se=n(477),Ee=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){e.target.files&&a.props.onChange(e.target.files)},a}return Object(c.a)(n,[{key:"render",value:function(){return a.createElement("div",null,a.createElement("input",{accept:"image/*",type:"file",id:"contained-button-file",style:{display:"none"},onChange:this.handleChange}),a.createElement("label",{htmlFor:"contained-button-file"},a.createElement(d.a,{variant:"contained",color:"primary",component:"span"},"Upload")))}}]),n}(a.Component),je=(n(415),Object(pe.a)((function(e){return Object(h.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450}})}))),Oe=Object(he.a)((function(e){return Object(h.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,o=Object(me.a)(e,["children","classes","onClose"]);return r.a.createElement(we.a,Object.assign({disableTypography:!0,className:n.root},o),r.a.createElement(f.a,{variant:"h6"},t),a?r.a.createElement(v.a,{"aria-label":"close",className:n.closeButton,onClick:a},r.a.createElement(ge.a,null)):null)})),Be=Object(he.a)((function(e){return{root:{padding:e.spacing(2)}}}))(fe.a),ke=Object(he.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(ve.a),Pe=function(e){var t=je(),n=Object(a.useState)(0),o=Object(J.a)(n,2),i=o[0],l=o[1];return r.a.createElement(Ce.a,{onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:e.open},r.a.createElement(Oe,{id:"customized-dialog-title",onClose:e.handleClose},"Picker Texture"),r.a.createElement(Be,{dividers:!0},r.a.createElement("div",{className:t.root},r.a.createElement(xe.a,{cellHeight:160,className:t.gridList,cols:3},e.textures.map((function(e,t){return r.a.createElement(ye.a,{key:e.img,cols:1,onClick:function(){l(t)},className:t===i?"selected-tile":""},r.a.createElement("img",{src:e.img,alt:e.texture.name}),r.a.createElement(Se.a,{title:e.texture.name,subtitle:r.a.createElement("span",null,"by: ",e.texture.name)}))}))))),r.a.createElement(ke,null,r.a.createElement(Ee,{onChange:e.handleUpload}),r.a.createElement(d.a,{variant:"contained",onClick:function(){e.handleSelect(e.textures[i]),e.handleClose()}},"Confirm")))},Te=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeStartTile=function(e){a.props.particleSystem.startTileIndex=e,a.props.updateProperties()},a.onChangeUTileCount=function(e){a.props.particleSystem.uTileCount=e,a.props.updateProperties()},a.onChangeVTileCount=function(e){a.props.particleSystem.vTileCount=e,a.props.updateProperties()},a.onChangeBlending=function(e){switch(e.target.value){case"Normal":a.props.particleSystem.blending=P.P,a.props.particleSystem.emitter.material.blending=P.P;break;case"Additive":a.props.particleSystem.blending=P.a,a.props.particleSystem.emitter.material.blending=P.a}a.props.updateProperties()},a.onChangeWorldSpace=function(e){switch(e.target.value){case"True":a.props.particleSystem.worldSpace=!0;break;case"False":a.props.particleSystem.worldSpace=!1}a.props.updateProperties()},a.getValueOfBlending=function(e){switch(e){case P.P:return"Normal";case P.a:return"Additive"}},a.getValueOfBoolean=function(e){return e?"True":"False"},a.onUploadTexture=function(e){console.log("upload texture");var t=document.createElement("img"),n=new P.Z(t);if(t.onload=function(){n.needsUpdate=!0},e&&e[0]){var r=new FileReader;r.onload=function(e){t.src=r.result},r.readAsDataURL(e[0]),n.name=e[0].name;var o={img:URL.createObjectURL(e[0]),texture:n};a.props.context.actions.addTexture(o)}},a.onChangeTexture=function(e){console.log("change texture"),a.props.particleSystem.texture=e.texture,a.props.updateProperties()},a.closeTexturePicker=function(){a.setState({texturePickerOpen:!1})},a.openTexturePicker=function(){a.setState({texturePickerOpen:!0})},a.state={texturePickerOpen:!1},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return console.log("rendered particleRendererProperties"),a.createElement("div",{className:"property-container"},a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"World Space"),a.createElement("select",{className:"editor-select",onChange:this.onChangeWorldSpace,value:this.getValueOfBoolean(this.props.particleSystem.worldSpace)},a.createElement("option",{key:0,value:"True"},"True"),a.createElement("option",{key:1,value:"False"},"False"))),a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"Blend Mode"),a.createElement("select",{className:"editor-select",onChange:this.onChangeBlending,value:this.getValueOfBlending(this.props.particleSystem.blending)},a.createElement("option",{key:0,value:"Normal"},"Normal"),a.createElement("option",{key:1,value:"Additive"},"Additive"))),a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"UVTile"),a.createElement("label",null,"Column:"),a.createElement(K,{value:this.props.particleSystem.uTileCount,onChange:this.onChangeUTileCount}),a.createElement("label",null,"Row:"),a.createElement(K,{value:this.props.particleSystem.vTileCount,onChange:this.onChangeVTileCount})),a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"Start Tile Index"),a.createElement(K,{value:this.props.particleSystem.startTileIndex,onChange:this.onChangeStartTile})),a.createElement(H,null,(function(t){for(var n,r=0;r<t.textures.length;r++)t.textures[r].texture===e.props.particleSystem.texture&&(n=t.textures[r]);var o=1,i=1;return n&&(o=n.texture.image.width/e.props.particleSystem.uTileCount,i=n.texture.image.height/e.props.particleSystem.vTileCount),a.createElement("div",{className:"property"},a.createElement("label",{className:"name"},"Texture"),n&&a.createElement("img",{className:"texture-preview",src:n.img,alt:n.texture.name,style:{objectPosition:"-".concat(e.props.particleSystem.startTileIndex%e.props.particleSystem.uTileCount*o,"px -").concat(Math.floor(e.props.particleSystem.startTileIndex/e.props.particleSystem.uTileCount)*i,"px"),width:o,height:i}}),a.createElement(d.a,{onClick:e.openTexturePicker,variant:"contained"},"Pick"))})),a.createElement(H,null,(function(t){return t&&a.createElement(Pe,{handleClose:e.closeTexturePicker,handleSelect:e.onChangeTexture,handleUpload:e.onUploadTexture,open:e.state.texturePickerOpen,textures:t.textures})})))}}]),n}(a.PureComponent),Me=n(204),ze=n.n(Me),Ie=n(153),Le=(n(416),function(e){var t=a.useState(e.value),n=Object(J.a)(t,2),r=n[0],o=n[1],i=a.useState(!1),l=Object(J.a)(i,2),c=l[0],s=l[1];return a.createElement(ze.a,{value:c?r:e.value,onValueChange:function(e){c&&o(e)},highlight:function(e){return Object(Ie.highlight)(e,Ie.languages.javascript,"javascript")},padding:10,onBlur:function(t){r!==e.value&&e.onChange(r),s(!1)},onFocus:function(t){r!==e.value&&o(e.value),s(!0)},style:{fontFamily:'"Consolas", monospace',fontSize:12}})}),Re=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeScript=function(e){null===a.props.object3d.userData&&(a.props.object3d.userData={}),a.props.object3d.userData.script=e,a.props.object3d.userData.func=new Function("delta",e),a.props.updateProperties()},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return a.createElement("div",null,a.createElement(H,null,(function(t){return t&&a.createElement("div",{className:"property"},a.createElement("label",{className:"script"},"Script:"),a.createElement(Le,{value:e.props.object3d.userData.script||"",onChange:e.onChangeScript}))})))}}]),n}(a.PureComponent),Fe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getValueOfShape=function(e){return a.props.particleSystem.emitterShape instanceof M.o?"PointEmitter":a.props.particleSystem.emitterShape instanceof M.d?"ConeEmitter":a.props.particleSystem.emitterShape instanceof M.v?"SphereEmitter":a.props.particleSystem.emitterShape instanceof M.g?"DonutEmitter":""},a.onChangeShape=function(e){switch(e.target.value){case"PointEmitter":a.props.particleSystem.emitterShape instanceof M.o||(a.props.particleSystem.emitterShape=new M.o,a.props.updateProperties());break;case"ConeEmitter":a.props.particleSystem.emitterShape instanceof M.d||(a.props.particleSystem.emitterShape=new M.d,a.props.updateProperties());break;case"SphereEmitter":a.props.particleSystem.emitterShape instanceof M.v||(a.props.particleSystem.emitterShape=new M.v,a.props.updateProperties());break;case"DonutEmitter":a.props.particleSystem.emitterShape instanceof M.g||(a.props.particleSystem.emitterShape=new M.g,a.props.updateProperties())}},a.onChangeKeyValue=function(e,t){a.props.particleSystem.emitterShape[e]=t,a.props.updateProperties()},a}return Object(c.a)(n,[{key:"renderShapeProperties",value:function(){var e=this,t=[],n=function(n){t.push(r.a.createElement("div",{key:n,className:"property"},r.a.createElement("label",{className:"name"},n,":"),r.a.createElement(K,{value:e.props.particleSystem.emitterShape[n],onChange:function(t){return e.onChangeKeyValue(n,t)}})))};for(var a in this.props.particleSystem.emitterShape)n(a);return t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"property-container"},r.a.createElement(H,null,(function(t){return t&&r.a.createElement("div",{className:"property"},r.a.createElement("label",{className:"name"},"Shape"),r.a.createElement("select",{className:"editor-select",onChange:e.onChangeShape,value:e.getValueOfShape(e.props.particleSystem.emitterShape)},r.a.createElement("option",{key:0,value:"PointEmitter"},"PointEmitter"),r.a.createElement("option",{key:1,value:"ConeEmitter"},"ConeEmitter"),r.a.createElement("option",{key:2,value:"SphereEmitter"},"SphereEmitter"),r.a.createElement("option",{key:3,value:"DonutEmitter"},"DonutEmitter")))})),r.a.createElement(H,null,(function(t){return t&&e.renderShapeProperties()})))}}]),n}(r.a.PureComponent),Ne=n(478),De=n(490),Ve=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getSystems=function(){var e=[];return a.props.object3d instanceof M.l&&e.push(a.props.object3d.system),a.props.object3d.traverse((function(t){t instanceof M.l&&e.push(t.system)})),e},a.checkPause=function(e){var t=!0;return e.forEach((function(e){e.paused||(t=!1)})),t},a.togglePause=function(){var e=a.getSystems();a.checkPause(e)?e.forEach((function(e){e.play()})):e.forEach((function(e){e.pause()})),a.props.updateProperties()},a.onRestart=function(){a.getSystems().forEach((function(e){e.restart()})),a.props.updateProperties()},a.onStop=function(){a.getSystems().forEach((function(e){e.restart(),e.pause()})),a.props.updateProperties()},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return a.createElement("div",null,a.createElement(De.a,{color:"primary","aria-label":"primary button group"}),a.createElement(H,null,(function(t){return t&&a.createElement(Ne.a,{color:"primary","aria-label":"primary button group"},a.createElement(d.a,{disabled:!e.checkPause(e.getSystems()),onClick:e.togglePause},"Play"),a.createElement(d.a,{disabled:e.checkPause(e.getSystems()),onClick:e.togglePause},"Pause"),a.createElement(d.a,{onClick:e.onRestart},"Restart"),a.createElement(d.a,{onClick:e.onStop},"Stop"))})))}}]),n}(a.PureComponent),We=n(481),Ge=n(489),Ue=n(43),Ae=n.n(Ue),He=n(482),qe=(n(419),n(207)),$e=n(468),Je=n(439),Ke=n(479),Xe=n(480),Ye=n(485),Ze=n(205),_e=n.n(Ze)()((function(e){return Object(h.a)({root:{width:"100%"},listRoot:{width:"100%",backgroundColor:e.palette.background.paper}})}));var Qe=a.memo((function(e){var t=_e(),n=a.useState([0,1,2,3]),r=Object(J.a)(n,2),o=r[0],i=r[1],l=a.useState(1),c=Object(J.a)(l,2),s=c[0],u=c[1],h=a.useState(null),w=Object(J.a)(h,2),f=w[0],v=w[1],b=function(t){return function(){var n;switch(t){case"ColorOverLife":n=new M.b(new M.c(new P.fb(1,1,1,1),new P.fb(0,0,0,1)));break;case"RotationOverLife":n=new M.s(new M.n([[new M.a(0,.3333,.6667,1),0]]));break;case"SizeOverLife":n=new M.t(new M.n([[new M.a(0,.3333,.6667,1),0]]));break;case"FrameOverLife":n=new M.h(new M.n([[new M.a(0,.3333,.6667,1),0]]));break;case"OrbitOverLife":n=new M.k(new M.n([[new M.a(0,.3333,.6667,1),0]]));break;case"SpeedOverLife":n=new M.u(new M.n([[new M.a(1,.6667,.3333,0),0]]))}n&&(e.behaviors.push(n),e.updateProperties()),v(null)}},g=function(t){return function(n){var a=e.behaviors[t];switch(a.type){case"ColorOverLife":a.func=n;break;case"RotationOverLife":a.angularVelocityFunc=n;break;case"SizeOverLife":case"FrameOverLife":a.func=n;break;case"OrbitOverLife":a.angularVelocityFunc=n}console.log("changing"),e.updateProperties()}};return a.createElement("div",{className:t.root},a.createElement(Ne.a,{color:"primary","aria-label":"primary button group"},a.createElement(d.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){v(e.currentTarget)},id:"new-button"},"New"),a.createElement(m.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){v(null)}},a.createElement(p.a,{onClick:b("SizeOverLife")},"SizeOverLife"),a.createElement(p.a,{onClick:b("ColorOverLife")},"ColorOverLife"),a.createElement(p.a,{onClick:b("RotationOverLife")},"RotationOverLife"),a.createElement(p.a,{onClick:b("FrameOverLife")},"FrameOverLife"),a.createElement(p.a,{onClick:b("OrbitOverLife")},"OrbitOverLife"),a.createElement(p.a,{onClick:b("SpeedOverLife")},"SpeedOverLife")),a.createElement(d.a,{onClick:function(){e.behaviors.splice(s,1),e.updateProperties()}},"Remove")),a.createElement($e.a,{dense:!0,className:t.listRoot},a.createElement(H,null,(function(t){return t&&e.behaviors.map((function(e,t){var n,r,l,c="behavior-list-label-".concat(t),d=null;switch(e.type){case"ColorOverLife":n=["functionColor"],d=e.func;break;case"RotationOverLife":n=["functionValue","value"],d=e.angularVelocityFunc;break;case"SizeOverLife":case"FrameOverLife":n=["functionValue"],d=e.func;break;case"OrbitOverLife":n=["functionValue"],d=e.angularVelocityFunc;break;case"SpeedOverLife":n=["functionValue"],d=e.func;break;default:n=["functionValue"]}return d&&(r=a.createElement(ue,{name:"Func",allowedType:n,generator:d,updateGenerator:g(t)})),a.createElement(Je.a,{key:t,selected:s===t,onClick:function(e){return function(e,t){u(t)}(0,t)}},a.createElement(Ke.a,null,a.createElement(Ye.a,{edge:"end",onChange:(l=t,function(){var e=o.indexOf(l),t=Object(qe.a)(o);-1===e?t.push(l):t.splice(e,1),i(t)}),checked:-1!==o.indexOf(t),inputProps:{"aria-labelledby":c}})),a.createElement(Xe.a,{id:c,primary:e.type,secondary:r}))}))}))))})),et=C()({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(Ge.a),tt=C()({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:32,"&$expanded":{minHeight:32}},content:{margin:0,"&$expanded":{margin:0}},expandIcon:{padding:0},expanded:{}})(We.a),nt=Object(pe.a)((function(e){return Object(h.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function at(e){var t=nt(),n=a.useState(["Object","EmitterShape","ParticleRenderer","ParticleEmitter","Behaviors","Script"]),r=Object(J.a)(n,2),o=r[0],i=r[1],l=function(e){return function(t,n){n?o.push(e):o.splice(o.indexOf(e),1),i(o)}};return a.createElement("div",{className:t.root},a.createElement(H,null,(function(t){return t&&a.createElement(Ve,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})),a.createElement(et,{expanded:-1!==o.indexOf("Object"),onChange:l("Object")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"object-content",id:"object-header"},a.createElement(f.a,{className:t.heading},"Object")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(Z,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof M.l&&a.createElement(et,{expanded:-1!==o.indexOf("EmitterShape"),onChange:l("EmitterShape")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"emitter-shape-content",id:"emitter-shape-header"},a.createElement(f.a,{className:t.heading},"Emitter Shape")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(Fe,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof M.l&&a.createElement(et,{expanded:-1!==o.indexOf("ParticleRenderer"),onChange:l("ParticleRenderer")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"particle-renderer-content",id:"particle-renderer-header"},a.createElement(f.a,{className:t.heading},"Particle Renderer")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(Te,{particleSystem:e.object3d.system,context:t,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof M.l&&a.createElement(et,{expanded:-1!==o.indexOf("ParticleEmitter"),onChange:l("ParticleEmitter")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"particle-emitter-content",id:"particle-emitter-header"},a.createElement(f.a,{className:t.heading},"Particle Emitter")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(de,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof M.l&&a.createElement(et,{expanded:-1!==o.indexOf("Behaviors"),onChange:l("Behaviors")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"behaviors-content",id:"behaviors-header"},a.createElement(f.a,{className:t.heading},"Behaviors")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(Qe,{behaviors:e.object3d.system.behaviors,updateProperties:t.actions.updateProperties})})))),a.createElement(et,{expanded:-1!==o.indexOf("Script"),onChange:l("Script")},a.createElement(tt,{expandIcon:a.createElement(Ae.a,null),"aria-controls":"script-content",id:"script-header"},a.createElement(f.a,{className:t.heading},"Script")),a.createElement(He.a,null,a.createElement(H,null,(function(t){return t&&a.createElement(Re,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))))}n(420),n(421);var rt=n(33),ot=(n(430),n(484)),it=n(206),lt=n.n(it),ct=n(483),st=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"camelize",value:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")}},{key:"camelizeClass",value:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return e.toUpperCase()})).replace(/\s+/g,"")}},{key:"exportBezier",value:function(e){return"new Bezier(".concat(e.p[0],", ").concat(e.p[1],", ").concat(e.p[2],", ").concat(e.p[3],")")}},{key:"exportColor",value:function(e){return"new Vector4(".concat(e.x,", ").concat(e.y,", ").concat(e.z,", ").concat(e.w,")")}},{key:"exportFunction",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof M.f)return"new ConstantValue(".concat(t.value,")");if(t instanceof M.e)return"new ConstantColor(".concat(e.exportColor(t.color),")");if(t instanceof M.j)return"new IntervalValue(".concat(t.a,", ").concat(t.b,")");if(t instanceof M.c)return"new ColorRange(".concat(e.exportColor(t.a),", ").concat(e.exportColor(t.b),")");if(t instanceof M.q)return"new RandomColor(".concat(e.exportColor(t.a),", ").concat(e.exportColor(t.b),")");if(t instanceof M.n){for(var a="new PiecewiseBezier(\n",r=0;r<t.functions.length-1;r++)a+=" ".repeat(n+4)+"[".concat(e.exportBezier(t.functions[r][0]),", ").concat(t.functions[r][1],"], ");return a+=" ".repeat(n+4)+"[".concat(e.exportBezier(t.functions[t.functions.length-1][0]),", ").concat(t.functions[t.functions.length-1][1],"]"),a+=" ".repeat(n)+")"}if(t instanceof M.f)return"new ConstantValue(".concat(t.value,")");throw new Error}},{key:"exportParticleEmitter",value:function(t){var n=e.camelize(t.name),a=t.system,r="        this.".concat(n," = new ParticleSystem({\n");r+="            duration: ".concat(a.duration,",\n"),r+="            looping: ".concat(a.looping,",\n"),r+="            startLife: ".concat(e.exportFunction(a.startLife),",\n"),r+="            startSpeed: ".concat(e.exportFunction(a.startSpeed),",\n"),r+="            startSize: ".concat(e.exportFunction(a.startSize),",\n"),r+="            startColor: ".concat(e.exportFunction(a.startColor),",\n"),r+="            worldSpace: ".concat(a.worldSpace,",\n"),r+="            maxParticle: ".concat(a.maxParticle,",\n"),r+="            emissionOverTime: ".concat(e.exportFunction(a.emissionOverTime),",\n"),r+="            emissionBursts: ".concat(a.emissionBursts,",\n"),r+="            shape: ".concat(a.emitterShape,",\n"),r+="            texture: texture,\n",r+="            blending: ".concat(a.blending,",\n"),r+="            startTileIndex: ".concat(a.startTileIndex,",\n"),r+="            uTileCount: ".concat(a.uTileCount,",\n"),r+="            vTileCount: ".concat(a.vTileCount,",\n"),r+="            renderMode: ".concat(a.renderMode,",\n"),a.renderMode==M.r.StretchedBillBoard&&(r+="            speedFactor: ".concat(a.speedFactor,",\n")),r+="        }\n";for(var o=0;o<a.behaviors.length;o++)r+="        this.".concat(n,".addBehavior(").concat(a.behaviors[o],");\n");return r+="        this.".concat(n,".emitter.renderOrder = ").concat(a.emitter.renderOrder,";\n"),r+="        this.".concat(n,".emitter.name = '").concat(n,"';\n"),r+="        this.".concat(n,".emitter.rotation.set(").concat(a.emitter.rotation.x,", ").concat(a.emitter.rotation.y,", ").concat(a.emitter.rotation.z,");\n"),r+="        this.add(this.".concat(n,".emitter);\n"),r+="\n"}},{key:"exportCode",value:function(t){for(var n="export class ".concat(e.camelizeClass(t.name)," extends Group {\n"),a=0;a<t.children.length;a++)t.children[a]instanceof M.l&&(n+="    private ".concat(e.camelize(t.children[a].name),": ParticleSystem;\n"));n+="\n",n+="    constructor() {\n",n+="        super();\n",n+="        this.name = '".concat(t.name,"';\n"),n+='        let texture = new TextureLoader().load( "textures/texture1.png");\n',n+='        texture.name = "textures/texture1.png";\n';for(var r=0;r<t.children.length;r++)t.children[r]instanceof M.l&&(n+=e.exportParticleEmitter(t.children[r]));n+="    }\n",n+="\n",n+="    update(delta: number) {\n";for(var o=0;o<t.children.length;o++)t.children[o]instanceof M.l&&(n+="        ".concat(e.camelize(t.children[o].name),".update(delta);\n"));return n+="    }\n",n+="}"}}]),e}();function ut(e){r.a.useRef(null);return r.a.createElement("div",null,r.a.createElement(Ce.a,{open:e.open,onClose:e.handleClose,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(we.a,{id:"scroll-dialog-title"},"Particle System Code"),r.a.createElement(fe.a,{dividers:!0},r.a.createElement(Le,{value:e.content,onChange:function(){}})),r.a.createElement(ve.a,null,r.a.createElement(d.a,{onClick:e.handleClose,color:"primary"},"Confirm"))))}var dt=Object(pe.a)((function(e){return Object(h.a)({root:{height:240,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function mt(e){var t,n,a=dt(),o=r.a.useState([]),i=Object(J.a)(o,2),l=i[0],c=i[1],s=r.a.useState(["1"]),u=Object(J.a)(s,2),d=u[0],m=u[1],p=r.a.useState(""),h=Object(J.a)(p,2),w=h[0],v=h[1],b=function(t,n){if(n.length>0){var a=function e(t,n){if(0==t)return[n,0];t--;var a,r=Object(_.a)(n.children);try{for(r.s();!(a=r.n()).done;){var o=e(t,a.value),i=Object(J.a)(o,2),l=i[0],c=i[1];if(l)return[l,c];t=c}}catch(s){r.e(s)}finally{r.f()}return[null,t]}(parseInt(n[0]),e.scene),r=Object(J.a)(a,1)[0];r&&e.context.actions.select(r)}c(n)},g=function(e,t){"svg"===e.target.tagName&&m(t)},C=function(e){var t="object";t=e instanceof M.l?"ParticleSystem":e.type;var n="unnamed";return e.name&&(n=e.name),"[".concat(t,"] ").concat(n)};return r.a.createElement("div",null,r.a.createElement(f.a,{className:a.heading}," Scene Graph "),(t=e.context,n=e.scene,r.a.createElement(ot.a,{className:a.root,selected:l,expanded:d,onNodeToggle:g,onNodeSelect:b,defaultCollapseIcon:r.a.createElement(Ae.a,null),defaultExpandIcon:r.a.createElement(lt.a,null)},function e(t,n,a){var o=[],i=a;a++;var l,c=Object(_.a)(n.children);try{for(c.s();!(l=c.n()).done;){var s=e(t,l.value,a);o.push(s[0]),a=s[1]}}catch(u){c.e(u)}finally{c.f()}return 0!==i?[r.a.createElement(ct.a,{key:n.uuid,nodeId:""+i,label:r.a.createElement(rt.MenuProvider,{id:"scene-graph-menu",data:{object3d:n}},C(n)+" "+i)},o),a]:[r.a.createElement(r.a.Fragment,null,o),a]}(t,n,0)[0])),r.a.createElement(rt.Menu,{id:"scene-graph-menu"},r.a.createElement(rt.Submenu,{label:"Add"},r.a.createElement(rt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.addObject3d("particle",n.object3d)}},"Particle System"),r.a.createElement(rt.Item,{onClick:function(e){var t=e.event,n=e.props;return console.log(t,n)}},"Ball")),r.a.createElement(rt.Separator,null),r.a.createElement(rt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.duplicateObject3d(n.object3d)}},"Duplicate"),r.a.createElement(rt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.removeObject3d(n.object3d)}},"Remove"),r.a.createElement(rt.Separator,null),r.a.createElement(rt.Item,{onClick:function(e){e.event;var t=e.props;if(console.log(t),t.object3d){var n=document.createElement("a"),a=t.object3d.toJSON(),r=new Blob([JSON.stringify(a)],{type:"application/json"});n.href=URL.createObjectURL(r),n.download="scene.json",n.click()}}},"Export"),r.a.createElement(rt.Item,{onClick:function(e){e.event;var t=e.props;t.object3d&&v(st.exportCode(t.object3d))}},"Copy JS Code")),r.a.createElement(ut,{content:w,open:""!==w,handleClose:function(){v("")}}))}var pt=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return console.log("render application"),a.createElement(q,null,a.createElement("div",{className:"application"},a.createElement("div",{className:"main-menu"},a.createElement(H,null,(function(e){return e&&a.createElement(j,{onSaveAs:e.actions.onSaveAs,onImport:e.actions.onImport,onOpenDemo:e.actions.onOpenDemo})}))),a.createElement("div",{className:"main"},a.createElement("div",{className:"viewport"},a.createElement($,{width:600,height:600})),a.createElement("div",{className:"sidebar"},a.createElement(H,null,(function(e){return e&&a.createElement(mt,{context:e,scene:e.scene})})),a.createElement(H,null,(function(e){return e&&e.selection.length>0&&a.createElement(at,{object3d:e.selection[0]})}))))))}}]),n}(a.Component),ht=n(151),wt=n.n(ht),ft=n(150),vt=n.n(ft),bt=n(149),gt=n.n(bt),Ct=n(470),xt=gt()({palette:{primary:{main:wt.a[500]},secondary:{main:vt.a[500]}},typography:{fontSize:12}}),yt=function(){return r.a.createElement(Ct.a,{theme:xt},r.a.createElement(pt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[220,1,2]]]);
//# sourceMappingURL=main.c0cf74ac.chunk.js.map