(window["webpackJsonpthree.quarks-editor"]=window["webpackJsonpthree.quarks-editor"]||[]).push([[0],{208:function(e,t,n){e.exports=n(417)},236:function(e,t,n){},400:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){},405:function(e,t,n){},406:function(e,t,n){},407:function(e,t,n){},417:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(19),o=n.n(i),s=n(1),l=n(4),c=n(5),u=n(6),d=n(424),p=n(463),m=n(453),h=n(448),v=n(451),f=n(74),w=n(423),g=n(449),y=n(72),b=n.n(y),O=n(194),S=n.n(O),C=Object(h.a)((function(e){return{root:{flexGrow:1},menuIcon:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(1)},title:{marginRight:e.spacing(1)}}})),x=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).fileRef=void 0,a.openFileDialog=function(e){a.fileRef.current&&a.fileRef.current.click()},a.importFile=function(e){e.target.files&&a.props.onImport(e.target.files)},a.openDemo=function(e){a.props.onOpenDemo(e)},a.handleMenuClick=function(e){console.log(e.currentTarget),a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:void 0})},a.state={anchorEl:void 0},a.fileRef=r.createRef(),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.createElement("div",{className:t.root},r.createElement(g.a,{position:"static"},r.createElement(v.a,{variant:"dense"},r.createElement(w.a,{edge:"start",className:t.menuIcon,color:"inherit","aria-label":"menu"},r.createElement(S.a,null)),r.createElement(f.a,{variant:"h6",className:t.title},"Three.Quarks"),r.createElement(d.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"file-button"},"File"),r.createElement(p.a,{id:"file-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"file-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},r.createElement(m.a,null,"New"),r.createElement(m.a,{onClick:this.openFileDialog},"Open"),r.createElement(m.a,{onClick:this.props.onSaveAs},"Download"),r.createElement("input",{ref:this.fileRef,type:"file",id:"fileElem",multiple:!0,accept:"application/json",style:{display:"none"},onChange:this.importFile})),r.createElement(d.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"demo-button"},"Demo"),r.createElement(p.a,{id:"demo-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"demo-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},r.createElement(m.a,{onClick:function(){return e.openDemo(0)}},"Demo PlasmaProjectile"),r.createElement(m.a,{onClick:function(){return e.openDemo(1)}},"Demo BulletMuzzle"),r.createElement(m.a,{onClick:function(){return e.openDemo(2)}},"Demo BulletProjectile"),r.createElement(m.a,{onClick:function(){return e.openDemo(3)}},"Demo BulletProjectile"),r.createElement(m.a,{onClick:function(){return e.openDemo(4)}},"Demo HitImpact"),r.createElement(m.a,{onClick:function(){return e.openDemo(5)}},"Demo Explosion"),r.createElement(m.a,{onClick:function(){return e.openDemo(6)}},"Demo Levelup")))))}}]),n}(r.PureComponent),E=b()(C,{withTheme:!0})(x),k=n(195),j=n.n(k),P={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),r.innerHTML=n,r}},B=n(2),T=n(196),M=n(38),z=n(16),N=n(14),I=n(8);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F,R="\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec4 vColor;\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n    \n    vec3 outgoingLight = vec3( 0.0 );\n    vec4 diffuseColor = vColor;\n    \n    #include <logdepthbuf_fragment>\n    \n    #ifdef USE_MAP\n    vec4 texelColor = texture2D( map, vUv);\n    diffuseColor *= texelColor;\n    #endif\n\n    outgoingLight = diffuseColor.rgb;\n\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    \n    #include <tonemapping_fragment>\n\n}\n",D="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset, 1.0 );\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset, 1.0 );\n\t#endif\n\t\n    vec2 alignedPosition = ( position.xy ) * size;\n    \n    vec2 rotatedPosition;\n    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n    \n    mvPosition.xy += rotatedPosition;\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",V="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n    vec2 alignedPosition = ( position.xy ) * size;\n    \n    vec2 rotatedPosition;\n    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n    \n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset + vec3(rotatedPosition, 0.0), 1.0 );\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset + vec3(rotatedPosition, 0.0), 1.0 );\n\t#endif\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",A="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute vec3 velocity;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nuniform float speedFactor;\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset, 1.0 );\n        vec3 viewVelocity = vec3(viewMatrix * vec4(velocity, 1.0));\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset, 1.0 );\n        vec3 viewVelocity = vec3(modelViewMatrix * vec4(velocity, 1.0));\n\t#endif\n\n    vec3 scaledPos = vec3(position.xy * size, position.z);\n    mvPosition.xyz += scaledPos + dot(scaledPos, viewVelocity) * viewVelocity / length(viewVelocity) * speedFactor;\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n";!function(e){e[e.BillBoard=0]="BillBoard",e[e.StretchedBillBoard=1]="StretchedBillBoard",e[e.LocalSpaceBillBoard=2]="LocalSpaceBillBoard"}(F||(F={}));var _=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e,r){var a;Object(s.a)(this,n),a=t.call(this),L(Object(N.a)(a),"type","ParticleEmitter"),L(Object(N.a)(a),"system",void 0),L(Object(N.a)(a),"geometry",void 0),L(Object(N.a)(a),"material",void 0),L(Object(N.a)(a),"interleavedBuffer",void 0),L(Object(N.a)(a),"rotationBuffer",void 0),L(Object(N.a)(a),"sizeBuffer",void 0),L(Object(N.a)(a),"colorBuffer",void 0),L(Object(N.a)(a),"offsetBuffer",void 0),L(Object(N.a)(a),"velocityBuffer",void 0),L(Object(N.a)(a),"tiling",void 0),L(Object(N.a)(a),"uvTileBuffer",void 0),L(Object(N.a)(a),"renderMode",void 0),L(Object(N.a)(a),"speedFactor",void 0),L(Object(N.a)(a),"worldSpace",void 0),a.system=e,a.geometry=new I.r,a.renderMode=r.renderMode||F.BillBoard,a.speedFactor=r.speedFactor||1,a.worldSpace=void 0!==r.worldSpace&&r.worldSpace;var i=new Float32Array(r.instancingGeometry||[-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o={},l={};if(a.interleavedBuffer=new I.s(i,5),a.geometry.setIndex([0,1,2,0,2,3]),a.geometry.setAttribute("position",new I.t(a.interleavedBuffer,3,0,!1)),a.geometry.setAttribute("uv",new I.t(a.interleavedBuffer,2,3,!1)),a.offsetBuffer=new I.q(new Float32Array(3*e.maxParticle),3),a.offsetBuffer.setUsage(I.j),a.geometry.setAttribute("offset",a.offsetBuffer),a.colorBuffer=new I.q(new Float32Array(4*e.maxParticle),4),a.offsetBuffer.setUsage(I.j),a.geometry.setAttribute("color",a.colorBuffer),a.rotationBuffer=new I.q(new Float32Array(e.maxParticle),1),a.offsetBuffer.setUsage(I.j),a.geometry.setAttribute("rotation",a.rotationBuffer),a.sizeBuffer=new I.q(new Float32Array(e.maxParticle),1),a.offsetBuffer.setUsage(I.j),a.geometry.setAttribute("size",a.sizeBuffer),a.tiling=!0,r.texture){l.USE_MAP="",l.USE_UV="",o.map=new I.L(r.texture),o.uvTransform=new I.L((new I.A).copy(r.texture.matrix));var c=r.uTileCount||1,u=r.vTileCount||1;a.system.tileCount=c*u,a.tiling&&(a.uvTileBuffer=new I.q(new Float32Array(e.maxParticle),1),a.uvTileBuffer.setUsage(I.j),a.geometry.setAttribute("uvTile",a.uvTileBuffer),l.UV_TILE="",o.tileCount=new I.L(new I.M(c,u)))}if((void 0===r.worldSpace||r.worldSpace)&&(l.WORLD_SPACE=""),a.renderMode===F.BillBoard||a.renderMode===F.LocalSpaceBillBoard){var d,p;a.renderMode===F.LocalSpaceBillBoard?(d=V,p=I.i):(d=D,p=I.n),a.material=new I.I({uniforms:o,defines:l,vertexShader:d,fragmentShader:R,transparent:!0,depthWrite:!1,blending:r.blending||I.a,side:p})}else{if(a.renderMode!==F.StretchedBillBoard)throw new Error("render mode unavailable");a.velocityBuffer=new I.q(new Float32Array(3*e.maxParticle),3),a.velocityBuffer.setUsage(I.j),a.geometry.setAttribute("velocity",a.velocityBuffer),o.speedFactor=new I.L(r.speedFactor),a.material=new I.I({uniforms:o,defines:l,vertexShader:A,fragmentShader:R,transparent:!0,depthWrite:!1,blending:r.blending||I.a})}return a.frustumCulled=!1,a}return Object(l.a)(n,[{key:"clone",value:function(){return this.system.clone().emitter}},{key:"update",value:function(){var e=this.system.particles,t=this.system.particleNum;this.geometry.instanceCount=t;for(var n=0;n<t;n++){var r=e[n];this.offsetBuffer.setXYZ(n,r.position.x,r.position.y,r.position.z),this.colorBuffer.setXYZW(n,r.color.x,r.color.y,r.color.z,r.color.w),this.rotationBuffer.setX(n,r.rotation),this.sizeBuffer.setX(n,r.size),this.renderMode===F.StretchedBillBoard&&this.velocityBuffer.setXYZ(n,r.velocity.x,r.velocity.y,r.velocity.z),this.tiling&&this.uvTileBuffer.setX(n,r.uvTile)}t>0&&(this.offsetBuffer.updateRange.count=3*t,this.offsetBuffer.needsUpdate=!0,this.colorBuffer.updateRange.count=4*t,this.colorBuffer.needsUpdate=!0,this.rotationBuffer.updateRange.count=t,this.rotationBuffer.needsUpdate=!0,this.sizeBuffer.updateRange.count=t,this.sizeBuffer.needsUpdate=!0,this.renderMode===F.StretchedBillBoard&&(this.velocityBuffer.updateRange.count=3*t,this.velocityBuffer.needsUpdate=!0),this.tiling&&(this.uvTileBuffer.updateRange.count=t,this.uvTileBuffer.needsUpdate=!0))}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"extractFromCache",value:function(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),null!==this.system&&(r.ps=this.system.toJSON(e)),this.children.length>0){r.children=[];for(var a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(t){var i=this.extractFromCache(e.geometries),o=this.extractFromCache(e.materials),s=this.extractFromCache(e.textures),l=this.extractFromCache(e.images);i.length>0&&(n.geometries=i),o.length>0&&(n.materials=o),s.length>0&&(n.textures=s),l.length>0&&(n.images=l)}return n.object=r,n}}]),n}(I.B),J=function e(){Object(s.a)(this,e),L(this,"startSpeed",0),L(this,"startColor",new I.O),L(this,"startSize",1),L(this,"velocity",new I.N),L(this,"age",0),L(this,"life",1),L(this,"angularVelocity",void 0),L(this,"position",new I.N),L(this,"rotation",0),L(this,"size",1),L(this,"color",new I.O),L(this,"uvTile",0)},U=function(){function e(t){Object(s.a)(this,e),this.value=t,L(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genValue",value:function(){return this.value}},{key:"toJSON",value:function(){return{type:"ConstantValue",value:this.value}}},{key:"clone",value:function(){return new e(this.value)}}],[{key:"fromJSON",value:function(t){return new e(t.value)}}]),e}(),G=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,L(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genValue",value:function(){return I.z.lerp(this.a,this.b,Math.random())}},{key:"toJSON",value:function(){return{type:"IntervalValue",a:this.a,b:this.b}}},{key:"clone",value:function(){return new e(this.a,this.b)}}],[{key:"fromJSON",value:function(t){return new e(t.a,t.b)}}]),e}(),W=function(){function e(){Object(s.a)(this,e),L(this,"functions",void 0),this.functions=new Array}return Object(l.a)(e,[{key:"findFunction",value:function(e){for(var t=0,n=0,r=this.functions.length-1;n+1<r;)if(t=(n+r)/2,e<this.getStartX(t))r=t-1;else{if(!(e>this.getEndX(t)))return t;n=t+1}for(var a=n;a<=r;a++)if(e>=this.functions[a][1]&&e<=this.getEndX(a))return a;return-1}},{key:"getStartX",value:function(e){return this.functions[e][1]}},{key:"setStartX",value:function(e,t){e>0&&(this.functions[e][1]=t)}},{key:"getEndX",value:function(e){return e+1<this.functions.length?this.functions[e+1][1]:1}},{key:"setEndX",value:function(e,t){e+1<this.functions.length&&(this.functions[e+1][1]=t)}},{key:"getFunction",value:function(e){return this.functions[e][0]}},{key:"setFunction",value:function(e,t){this.functions[e][0]=t}},{key:"numOfFunctions",get:function(){return this.functions.length}}]),e}(),H=function(){function e(t,n,r,a){Object(s.a)(this,e),L(this,"p",void 0),this.p=[t,n,r,a]}return Object(l.a)(e,[{key:"genValue",value:function(e){var t=e*e,n=e*e*e,r=1-e,a=r*r,i=a*r;return this.p[0]*i+this.p[1]*a*e*3+this.p[2]*r*t*3+this.p[3]*n}},{key:"derivativeCoefficients",value:function(e){for(var t=[],n=e,r=n.length-1;r>0;r--){for(var a=[],i=0;i<r;i++){var o=r*(n[i+1]-n[i]);a.push(o)}t.push(a),n=a}return t}},{key:"getSlope",value:function(e){var t=this.derivativeCoefficients(this.p)[0],n=1-e,r=n*e*2,a=e*e;return n*n*t[0]+r*t[1]+a*t[2]}},{key:"controlCurve",value:function(e,t){this.p[1]=e/3+this.p[0],this.p[2]=this.p[3]-t/3}},{key:"hull",value:function(e){var t,n=this.p,r=[],a=[],i=0,o=0,s=0;for(a[i++]=n[0],a[i++]=n[1],a[i++]=n[2],a[i++]=n[3];n.length>1;){for(r=[],o=0,s=n.length-1;o<s;o++)t=e*n[o]+(1-e)*n[o+1],a[i++]=t,r.push(t);n=r}return a}},{key:"split",value:function(t){var n=this.hull(t);return{left:new e(n[0],n[4],n[7],n[9]),right:new e(n[9],n[8],n[6],n[3]),span:n}}},{key:"clone",value:function(){return new e(this.p[0],this.p[1],this.p[2],this.p[3])}},{key:"toJSON",value:function(){return{p0:this.p[0],p1:this.p[1],p2:this.p[2],p3:this.p[3]}}}],[{key:"fromJSON",value:function(t){return new e(t.p0,t.p1,t.p2,t.p3)}}]),e}(),X=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[new H(0,1/3,1/3*2,1),0]];return Object(s.a)(this,n),e=t.call(this),L(Object(N.a)(e),"type",void 0),e.type="function",e.functions=r,e}return Object(l.a)(n,[{key:"genValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.findFunction(e);return-1===t?(console.error(e),0):this.functions[t][0].genValue((e-this.getStartX(t))/(this.getEndX(t)-this.getStartX(t)))}},{key:"toSVG",value:function(e,t){if(t<1)return"";for(var n=["M",0,this.functions[0][0].p[0]].join(" "),r=1/t;r<=1;r+=1/t)n=[n,"L",r*e,this.genValue(r)].join(" ");return n}},{key:"toJSON",value:function(){return{type:"PiecewiseBezier",functions:this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return{function:n.toJSON(),start:r}}))}}},{key:"clone",value:function(){return new n(this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return[n.clone(),r]})))}}],[{key:"fromJSON",value:function(e){return new n(e.functions.map((function(e){return[H.fromJSON(e.function),e.start]})))}}]),n}(W);function q(e){switch(e.type){case"ConstantValue":return U.fromJSON(e);case"IntervalValue":return G.fromJSON(e);case"PiecewiseBezier":return X.fromJSON(e);default:return new U(0)}}var Y=function(e){return{r:e.x,g:e.y,b:e.z,a:e.w}},$=function(e){return new I.O(e.r,e.g,e.b,e.a)},K=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,L(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genColor",value:function(e){var t=Math.random();return e.copy(this.a).lerp(this.b,t)}},{key:"toJSON",value:function(){return{type:"RandomColor",a:Y(this.a),b:Y(this.b)}}},{key:"clone",value:function(){return new e(this.a.clone(),this.b.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.a),$(t.b))}}]),e}(),Z=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,L(this,"type",void 0),this.type="function"}return Object(l.a)(e,[{key:"genColor",value:function(e,t){return e.copy(this.a).lerp(this.b,t)}},{key:"toJSON",value:function(){return{type:"ColorRange",a:Y(this.a),b:Y(this.b)}}},{key:"clone",value:function(){return new e(this.a.clone(),this.b.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.a),$(t.b))}}]),e}(),Q=function(){function e(t){Object(s.a)(this,e),this.color=t,L(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genColor",value:function(e){return e.copy(this.color)}},{key:"toJSON",value:function(){return{type:"ConstantColor",color:Y(this.color)}}},{key:"clone",value:function(){return new e(this.color.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.color))}}]),e}();function ee(e){switch(e.type){case"ConstantColor":return Q.fromJSON(e);case"ColorRange":return Z.fromJSON(e);case"RandomColor":return K.fromJSON(e);default:return new Q(new I.O(1,1,1,1))}}var te=function(){function e(t){Object(s.a)(this,e),this.func=t,L(this,"type","ColorOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}},{key:"update",value:function(e,t){this.func.genColor(e.color,e.age/e.life).dot(e.startColor)}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ne=function(){function e(t){Object(s.a)(this,e),this.angularVelocityFunc=t,L(this,"type","RotationOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){"value"===this.angularVelocityFunc.type?e.angularVelocity=this.angularVelocityFunc.genValue():e.angularVelocity=0}},{key:"update",value:function(e,t){"value"===this.angularVelocityFunc.type?e.rotation+=t*e.angularVelocity:e.rotation+=t*this.angularVelocityFunc.genValue(e.age/e.life)}},{key:"toJSON",value:function(){return{type:this.type,func:this.angularVelocityFunc.toJSON()}}},{key:"clone",value:function(){return new e(this.angularVelocityFunc)}}]),e}(),re=function(){function e(t){Object(s.a)(this,e),this.func=t,L(this,"type","SizeOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}}]),Object(l.a)(e,[{key:"update",value:function(e){e.size=e.startSize*this.func.genValue(e.age/e.life)}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ae=function(){function e(t){Object(s.a)(this,e),this.func=t,L(this,"type","FrameOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}},{key:"update",value:function(e,t){e.uvTile=Math.floor(this.func.genValue(e.age/e.life))}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ie=(new I.N,function(){function e(t){Object(s.a)(this,e),this.angularVelocityFunc=t,L(this,"type","OrbitOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){"value"===this.angularVelocityFunc.type?e.angularVelocity=this.angularVelocityFunc.genValue():e.angularVelocity=0}},{key:"update",value:function(e,t){var n=Math.atan2(e.position.y,e.position.x),r=Math.sqrt(e.position.x*e.position.x+e.position.y*e.position.y);n+=this.angularVelocityFunc.genValue(e.age/e.life)*t,e.position.x=Math.cos(n)*r,e.position.y=Math.sin(n)*r}},{key:"toJSON",value:function(){return{type:this.type,func:this.angularVelocityFunc.toJSON()}}},{key:"clone",value:function(){return new e(this.angularVelocityFunc.clone())}}]),e}());var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),L(this,"radius",void 0),L(this,"arc",void 0),L(this,"thickness",void 0),L(this,"angle",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1,this.angle=t.angle||Math.PI/6}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=I.z.lerp(1-this.thickness,1,Math.random()),r=t*this.arc,a=Math.sqrt(n),i=Math.sin(r),o=Math.cos(r);e.position.x=a*o,e.position.y=a*i,e.position.z=0;var s=this.angle*a;e.velocity.set(0,0,Math.cos(s)).addScaledVector(e.position,Math.sin(s)).multiplyScalar(e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"cone",radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle})}}]),e}(),se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),L(this,"radius",void 0),L(this,"arc",void 0),L(this,"thickness",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=Math.random(),r=I.z.lerp(1-this.thickness,1,Math.random()),a=t*this.arc,i=Math.acos(2*n-1),o=Math.cbrt(r),s=Math.sin(a),l=Math.cos(a),c=Math.sin(i),u=Math.cos(i);e.position.x=o*c*l,e.position.y=o*c*s,e.position.z=o*u,e.velocity.setScalar(0).addScaledVector(e.position,e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"sphere",radius:this.radius,arc:this.arc,thickness:this.thickness}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness})}}]),e}(),le=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=Math.random(),r=t*Math.PI*2,a=Math.acos(2*n-1),i=Math.cbrt(Math.random()),o=Math.sin(r),s=Math.cos(r),l=Math.sin(a),c=Math.cos(a);e.velocity.x=i*l*s,e.velocity.y=i*l*o,e.velocity.z=i*c,e.velocity.multiplyScalar(e.startSpeed),e.position.setScalar(0)}},{key:"toJSON",value:function(){return{type:"point"}}},{key:"clone",value:function(){return new e}}]),e}(),ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),L(this,"radius",void 0),L(this,"arc",void 0),L(this,"thickness",void 0),L(this,"angle",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1,this.angle=t.angle||Math.PI/6}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=I.z.lerp(this.thickness,1,Math.random()),r=t*this.arc,a=Math.sqrt(n),i=Math.sin(r),o=Math.cos(r);e.position.x=a*o,e.position.y=a*i,e.position.z=0;var s=this.angle*a;e.velocity.set(0,0,Math.cos(s)).addScaledVector(e.position,Math.sin(s)).multiplyScalar(e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"donut",radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle})}}]),e}(),ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),L(this,"autoDestroy",void 0),L(this,"looping",void 0),L(this,"duration",void 0),L(this,"maxParticle",void 0),L(this,"startLife",void 0),L(this,"startSpeed",void 0),L(this,"startRotation",void 0),L(this,"startSize",void 0),L(this,"startColor",void 0),L(this,"startTileIndex",void 0),L(this,"emissionOverTime",void 0),L(this,"emissionOverDistance",void 0),L(this,"emissionBursts",void 0),L(this,"tileCount",1),L(this,"worldSpace",void 0),L(this,"particleNum",void 0),L(this,"burstIndex",void 0),L(this,"burstWaveIndex",void 0),L(this,"time",void 0),L(this,"paused",void 0),L(this,"waitEmiting",void 0),L(this,"emitEnded",void 0),L(this,"markForDestroy",void 0),L(this,"behaviors",void 0),L(this,"particles",void 0),L(this,"emitterShape",void 0),L(this,"emitter",void 0),L(this,"normalMatrix",new I.A),this.autoDestroy=void 0!==t.autoDestroy&&t.autoDestroy,this.duration=t.duration||1,this.maxParticle=t.maxParticle||100,this.looping=void 0===t.looping||t.looping,this.startLife=t.startLife||new U(5),this.startSpeed=t.startSpeed||new U(0),this.startRotation=t.startRotation||new U(0),this.startSize=t.startSize||new U(1),this.startColor=t.startColor||new Q(new I.O(1,1,1,1)),this.emissionOverTime=t.emissionOverTime||new U(10),this.emissionOverDistance=t.emissionOverDistance||new U(0),this.emissionBursts=t.emissionBursts||[],this.emitterShape=t.shape||new se,this.behaviors=t.behaviors||new Array,this.worldSpace=void 0!==t.worldSpace&&t.worldSpace,this.particles=new Array,this.startTileIndex=t.startTileIndex||0,this.emitter=new _(this,t),this.particleNum=0,this.burstIndex=0,this.burstWaveIndex=0,this.time=0,this.paused=!1,this.waitEmiting=0,this.emitEnded=!1,this.markForDestroy=!1}return Object(l.a)(e,[{key:"texture",get:function(){return this.emitter.material.uniforms.map.value},set:function(e){this.emitter.material.uniforms.map.value=e}},{key:"uTileCount",get:function(){return this.emitter.material.uniforms.tileCount.value.x},set:function(e){this.emitter.material.uniforms.tileCount.value.x=e}},{key:"vTileCount",get:function(){return this.emitter.material.uniforms.tileCount.value.y},set:function(e){this.emitter.material.uniforms.tileCount.value.y=e}},{key:"renderMode",get:function(){return this.emitter.renderMode}},{key:"speedFactor",get:function(){return this.emitter.material.uniforms.speedFactor?this.emitter.material.uniforms.speedFactor.value:0},set:function(e){this.emitter.material.uniforms.speedFactor.value=e}},{key:"blending",get:function(){return this.emitter.material.blending},set:function(e){this.emitter.material.blending=e}}]),Object(l.a)(e,[{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"spawn",value:function(){for(;this.particleNum>=this.particles.length;)this.particles.push(new J);this.particleNum++;var e=this.particles[this.particleNum-1];this.startColor.genColor(e.startColor,this.time),e.color.copy(e.startColor),e.startSpeed=this.startSpeed.genValue(this.time),e.life=this.startLife.genValue(this.time),e.age=0,e.rotation=this.startRotation.genValue(this.time),e.startSize=e.size=this.startSize.genValue(this.time),e.uvTile=this.startTileIndex,this.emitterShape.initialize(e),this.worldSpace&&(e.position.applyMatrix4(this.emitter.matrixWorld),e.velocity.applyMatrix3(this.normalMatrix));for(var t=0;t<this.behaviors.length;t++)this.behaviors[t].initialize(e)}},{key:"endEmit",value:function(){this.emitEnded=!0,this.autoDestroy&&(this.markForDestroy=!0)}},{key:"dispose",value:function(){this.emitter.dispose(),this.emitter.parent&&this.emitter.parent.remove(this.emitter)}},{key:"restart",value:function(){this.paused=!1,this.particleNum=0,this.burstIndex=0,this.burstWaveIndex=0,this.time=0,this.waitEmiting=0,this.emitEnded=!1,this.markForDestroy=!1}},{key:"update",value:function(e){if(e>.1&&(e=.1),!this.paused)if(this.emitEnded&&0===this.particleNum)this.markForDestroy&&this.emitter.parent&&this.dispose();else{this.time>this.duration&&(this.looping?this.time-=this.duration:this.emitEnded||this.endEmit()),this.normalMatrix.getNormalMatrix(this.emitter.matrixWorld);for(var t=0;t<this.particleNum;t++){var n=this.particles[t];n.age>=n.life&&(this.particles[t]=this.particles[this.particleNum-1],this.particles[this.particleNum-1]=n,this.particleNum--,t--)}for(;this.waitEmiting>0&&this.particleNum<this.maxParticle&&!this.emitEnded;)this.spawn(),this.waitEmiting--;for(;this.burstIndex<this.emissionBursts.length&&this.emissionBursts[this.burstIndex].time<=this.time;){if(Math.random()<this.emissionBursts[this.burstIndex].probability)for(var r=this.emissionBursts[this.burstIndex].count;r>0&&this.particleNum<this.maxParticle;)this.spawn(),r--;this.burstIndex++}for(var a=0;a<this.particleNum;a++){for(var i=this.particles[a],o=0;o<this.behaviors.length;o++)this.behaviors[o].update(i,e);i.position.addScaledVector(i.velocity,e),i.age+=e}this.emitter.update(),this.emitEnded||(this.waitEmiting+=e*this.emissionOverTime.genValue(this.time)),this.time+=e}}},{key:"toJSON",value:function(e){if(this.texture.toJSON(e),void 0!==this.texture.image){var t=this.texture.image;e.images[t.uuid]={uuid:t.uuid,url:this.texture.name}}return{autoDestroy:this.autoDestroy,looping:this.looping,duration:this.duration,maxParticle:this.maxParticle,shape:this.emitterShape.toJSON(),startLife:this.startLife.toJSON(),startSpeed:this.startSpeed.toJSON(),startRotation:this.startRotation.toJSON(),startSize:this.startSize.toJSON(),startColor:this.startColor.toJSON(),emissionOverTime:this.emissionOverTime.toJSON(),emissionOverDistance:this.emissionOverDistance.toJSON(),emissionBursts:this.emissionBursts,instancingGeometry:Array.from(this.emitter.interleavedBuffer.array),renderMode:this.renderMode,speedFactor:this.renderMode===F.StretchedBillBoard?this.speedFactor:0,texture:this.texture.uuid,startTileIndex:this.startTileIndex,uTileCount:this.uTileCount,vTileCount:this.vTileCount,blending:this.blending,behaviors:this.behaviors.map((function(e){return e.toJSON()})),worldSpace:this.worldSpace}}},{key:"addBehavior",value:function(e){this.behaviors.push(e)}},{key:"clone",value:function(){var t,n=[],r=Object(M.a)(this.emissionBursts);try{for(r.s();!(t=r.n()).done;){var a=t.value,i={};Object.assign(i,a),n.push(i)}}catch(u){r.e(u)}finally{r.f()}var o,s=[],l=Object(M.a)(this.behaviors);try{for(l.s();!(o=l.n()).done;){var c=o.value;s.push(c.clone())}}catch(u){l.e(u)}finally{l.f()}return new e({autoDestroy:this.autoDestroy,looping:this.looping,duration:this.duration,maxParticle:this.maxParticle,shape:this.emitterShape.clone(),startLife:this.startLife.clone(),startSpeed:this.startSpeed.clone(),startRotation:this.startRotation.clone(),startSize:this.startSize.clone(),startColor:this.startColor.clone(),emissionOverTime:this.emissionOverTime.clone(),emissionOverDistance:this.emissionOverDistance.clone(),emissionBursts:n,instancingGeometry:this.emitter.interleavedBuffer.array,renderMode:this.renderMode,speedFactor:this.speedFactor,texture:this.texture,startTileIndex:this.startTileIndex,uTileCount:this.uTileCount,vTileCount:this.vTileCount,blending:this.blending,behaviors:s,worldSpace:this.worldSpace})}}],[{key:"fromJSON",value:function(t,n){var r;switch(t.shape.type){case"cone":r=new oe(t.shape);break;case"donut":r=new ce(t.shape);break;case"point":r=new le;break;case"sphere":r=new se(t.shape);break;default:r=new le}return new e({autoDestroy:t.autoDestroy,looping:t.looping,duration:t.duration,maxParticle:t.maxParticle,shape:r,startLife:q(t.startLife),startSpeed:q(t.startSpeed),startRotation:q(t.startRotation),startSize:q(t.startSize),startColor:ee(t.startColor),emissionOverTime:q(t.emissionOverTime),emissionOverDistance:q(t.emissionOverDistance),emissionBursts:t.emissionBursts,instancingGeometry:t.instancingGeometry,renderMode:t.renderMode,speedFactor:t.speedFactor,texture:n[t.texture],startTileIndex:t.startTileIndex,uTileCount:t.uTileCount,vTileCount:t.vTileCount,blending:t.blending,behaviors:t.behaviors.map((function(e){return function(e){switch(e.type){case"ColorOverLife":return new te(ee(e.func));case"RotationOverLife":return new ne(q(e.func));case"SizeOverLife":return new re(q(e.func));case"FrameOverLife":return new ae(q(e.func));case"OrbitOverLife":return new ie(q(e.func));default:return new te(new Z(new I.O(1,1,1,1),new I.O(1,1,1,1)))}}(e)})),worldSpace:t.worldSpace})}}]),e}(),de={UVMapping:I.K,CubeReflectionMapping:I.c,CubeRefractionMapping:I.d,EquirectangularReflectionMapping:I.k,EquirectangularRefractionMapping:I.l,CubeUVReflectionMapping:I.f,CubeUVRefractionMapping:I.g},pe={RepeatWrapping:I.H,ClampToEdgeWrapping:I.b,MirroredRepeatWrapping:I.C},me={NearestFilter:I.D,NearestMipmapNearestFilter:I.F,NearestMipmapLinearFilter:I.E,LinearFilter:I.u,LinearMipmapNearestFilter:I.w,LinearMipmapLinearFilter:I.v},he=function(){function e(t){Object(s.a)(this,e),L(this,"manager",void 0),L(this,"crossOrigin","anonymous"),L(this,"path",void 0),L(this,"resourcePath",void 0),this.manager=void 0!==t?t:I.h,this.resourcePath=""}return Object(l.a)(e,[{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"load",value:function(e,t,n,r){var a=this,i=void 0===this.path?I.x.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;var o=new I.m(a.manager);this.path&&o.setPath(this.path),o.load(e,(function(n){var i=null;try{i=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=i.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?a.parse(i,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadImage",value:function(e,t){var n=this;return n.manager.itemStart(t),e.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}},{key:"parseImages",value:function(e,t){var n={};if(void 0!==e&&e.length>0){var r=new I.y(t),a=new I.p(r);a.setCrossOrigin(this.crossOrigin);for(var i=0,o=e.length;i<o;i++){var s=e[i],l=s.url;if(Array.isArray(l)){n[s.uuid]=[];for(var c=0,u=l.length;c<u;c++){var d=l[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:this.resourcePath+d;n[s.uuid].push(this.loadImage(a,p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:this.resourcePath+s.url;n[s.uuid]=this.loadImage(a,p)}}}return n}},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var a=0,i=e.length;a<i;a++){var o,s=e[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new I.e(t[s.image]):new I.J(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,de)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],pe),o.wrapT=n(s.wrap[1],pe)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,me)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,me)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r}},{key:"parseObject",value:function(e,t){var n;switch(e.type){case"ParticleEmitter":n=ue.fromJSON(e.ps,t).emitter;break;case"Group":n=new I.o;break;default:n=new I.G}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var r=e.children,a=0;a<r.length;a++)n.add(this.parseObject(r[a],t));return n}},{key:"parse",value:function(e,t){var n=this.parseImages(e.images,(function(){void 0!==t&&t(a)})),r=this.parseTextures(e.textures,n),a=this.parseObject(e.object,r);return void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a}}]),e}(),ve=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[new Z(new I.O(0,0,0,1),new I.O(1,1,1,1)),0]];return Object(s.a)(this,n),e=t.call(this),L(Object(N.a)(e),"type",void 0),e.type="function",e.functions=r,e}return Object(l.a)(n,[{key:"genColor",value:function(e,t){var n=this.findFunction(t);return-1===n?(console.error(t),e.copy(this.functions[0][0].a)):this.getFunction(n).genColor(e,t)}},{key:"toJSON",value:function(){return{type:"Gradient",functions:this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return{function:n.toJSON(),start:r}}))}}},{key:"clone",value:function(){return new n(this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return[n.clone(),r]})))}}],[{key:"fromJSON",value:function(e){return new n(e.functions.map((function(e){return[Z.fromJSON(e.function),e.start]})))}}]),n}(W),fe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).particles=void 0,e.smoke=void 0,e.glowBeam=void 0,e.mainBeam=void 0;var r=(new B.t).load("textures/texture1.png");return r.name="textures/texture1.png",e.mainBeam=new ue({duration:1,looping:!0,startLife:new G(.1,.15),startSpeed:new U(0),startSize:new U(1.25),startColor:new Q(new B.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(40),shape:new se({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!0,startLife:new G(.1,.15),startSpeed:new U(0),startSize:new U(3.5),startColor:new Q(new B.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(40),shape:new se({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.glowBeam.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.particles=new ue({duration:1,looping:!0,startLife:new G(.3,.6),startSpeed:new G(2,5),startSize:new G(.1,.4),startColor:new K(new B.w(1,1,1,.5),new B.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(60),shape:new oe({angle:4.8423/180*Math.PI,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,renderMode:F.StretchedBillBoard,speedFactor:.01,blending:B.l,startTileIndex:0,uTileCount:10,vTileCount:10}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.rotateY(-Math.PI/2),e.particles.emitter.name="particles",e.add(e.particles.emitter),e.smoke=new ue({startLife:new G(.25,.3),startSpeed:new U(0),startSize:new G(.75,1.25),startRotation:new G(0,2*Math.PI),startColor:new Q(new B.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(20),shape:new se({radius:.2,thickness:1}),texture:r,blending:B.l,startTileIndex:2,uTileCount:10,vTileCount:10}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(new B.w(1,.1509503,.07352942,1),new B.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new G(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e)}}]),n}(B.h),we=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).beam=void 0,e.muzzle1=void 0,e.muzzle2=void 0,e.flash=void 0,e.smoke=void 0,e.particles=void 0;var r=(new B.t).load("textures/texture1.png");r.name="textures/texture1.png",e.beam=new ue({duration:1,looping:!1,startLife:new G(.1,.2),startSpeed:new U(0),startSize:new U(4),startColor:new Q(new B.w(1,.585716,.1691176,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.add(e.beam.emitter);var a={duration:1,looping:!1,startLife:new G(.1,.2),startSpeed:new U(0),startSize:new G(1,5),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new U(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:91,uTileCount:10,vTileCount:10,renderMode:F.LocalSpaceBillBoard};return e.muzzle1=new ue(a),e.muzzle1.addBehavior(new te(new Z(new B.w(1,.3882312,.125,1),new B.w(1,.826827,.3014706,1)))),e.muzzle1.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.muzzle1.addBehavior(new ae(new X([[new H(91,94,97,100),0]]))),e.muzzle1.emitter.renderOrder=2,e.muzzle1.emitter.name="muzzle1",e.muzzle1.emitter.position.x=1,e.add(e.muzzle1.emitter),e.muzzle2=new ue(a),e.muzzle2.addBehavior(new te(new Z(new B.w(1,.3882312,.125,1),new B.w(1,.826827,.3014706,1)))),e.muzzle2.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.muzzle2.addBehavior(new ae(new X([[new H(91,94,97,100),0]]))),e.muzzle2.emitter.renderOrder=2,e.muzzle2.emitter.name="muzzle2",e.muzzle2.emitter.position.x=1,e.muzzle2.emitter.rotation.x=Math.PI/2,e.add(e.muzzle2.emitter),e.flash=new ue({duration:1,looping:!1,startLife:new G(.1,.2),startSpeed:new U(0),startSize:new G(1,2.5),startRotation:new G(-Math.PI,Math.PI),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new U(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.flash.addBehavior(new te(new Z(new B.w(1,.95,.82,1),new B.w(1,.38,.12,1)))),e.flash.addBehavior(new ae(new X([[new H(81,84.333,87.666,91),0]]))),e.flash.emitter.renderOrder=2,e.flash.emitter.name="flash",e.add(e.flash.emitter),e.smoke=new ue({duration:2.5,looping:!1,startLife:new G(.6,.8),startSpeed:new G(.1,3),startSize:new G(.75,1.5),startRotation:new G(-Math.PI,Math.PI),startColor:new K(new B.w(.6323,.6323,.6323,.31),new B.w(1,1,1,.54)),worldSpace:!0,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:0,count:5,cycle:1,interval:.01,probability:1}],shape:new oe({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,blending:B.l,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.smoke.addBehavior(new te(new Z(new B.w(1,1,1,1),new B.w(1,1,1,0)))),e.smoke.addBehavior(new ne(new G(-Math.PI/4,Math.PI/4))),e.smoke.addBehavior(new ae(new X([[new H(28,31,34,37),0]]))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.smoke.emitter.rotation.y=Math.PI/2,e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new G(.2,.6),startSpeed:new G(1,15),startSize:new G(.1,.3),startColor:new K(new B.w(1,.91,.51,1),new B.w(1,.44,.16,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.StretchedBillBoard,speedFactor:.5}),e.particles.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.particles.emitter.renderOrder=1,e.particles.emitter.name="particles",e.particles.emitter.rotation.y=Math.PI/2,e.add(e.particles.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.beam.update(e),this.muzzle1.update(e),this.muzzle2.update(e),this.flash.update(e),this.smoke.update(e),this.particles.update(e)}}]),n}(B.h),ge=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).hProjectile=void 0,e.vProjectile=void 0;var r=(new B.t).load("textures/projectile.png");r.name="textures/projectile.png";var a={duration:1,looping:!0,startLife:new U(.5),startSpeed:new U(0),startSize:new G(1,2),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new U(4),shape:new le,texture:r,blending:B.a,startTileIndex:0,uTileCount:1,vTileCount:1,instancingGeometry:[-2,-.5,0,0,0,2,-.5,0,1,0,2,.5,0,1,1,-2,.5,0,0,1],renderMode:F.LocalSpaceBillBoard};return e.hProjectile=new ue(a),e.hProjectile.addBehavior(new te(new ve([[new Z(new B.w(1,1,1,0),new B.w(0,1,.25,1)),0],[new Z(new B.w(0,1,.25,1),new B.w(1,1,1,0)),.5]]))),e.hProjectile.emitter.renderOrder=2,e.hProjectile.emitter.name="hProjectile",e.add(e.hProjectile.emitter),e.vProjectile=new ue(a),e.vProjectile.addBehavior(new te(new ve([[new Z(new B.w(1,1,1,0),new B.w(0,1,.25,1)),0],[new Z(new B.w(0,1,.25,1),new B.w(1,1,1,0)),.5]]))),e.vProjectile.emitter.renderOrder=2,e.vProjectile.emitter.name="vProjectile",e.vProjectile.emitter.rotation.x=Math.PI/2,e.add(e.vProjectile.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.hProjectile.update(e),this.vProjectile.update(e)}}]),n}(B.h),ye=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).hProjectile=void 0,e.vProjectile=void 0;var r=(new B.t).load("textures/projectile.png");r.name="textures/projectile.png";var a={duration:1,looping:!0,startLife:new U(.5),startSpeed:new U(0),startSize:new G(1.5,2),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new U(4),shape:new le,texture:r,blending:B.a,startTileIndex:0,uTileCount:1,vTileCount:1,renderMode:F.LocalSpaceBillBoard};return e.hProjectile=new ue(a),e.hProjectile.addBehavior(new te(new ve([[new Z(new B.w(1,1,1,0),new B.w(0,1,.25,1)),0],[new Z(new B.w(0,1,.25,1),new B.w(1,1,1,0)),.5]]))),e.hProjectile.emitter.renderOrder=2,e.hProjectile.emitter.name="hProjectile",e.hProjectile.emitter.scale.x=2,e.add(e.hProjectile.emitter),e.vProjectile=new ue(a),e.vProjectile.addBehavior(new te(new ve([[new Z(new B.w(1,1,1,0),new B.w(0,1,.25,1)),0],[new Z(new B.w(0,1,.25,1),new B.w(1,1,1,0)),.5]]))),e.vProjectile.emitter.renderOrder=2,e.vProjectile.emitter.name="vProjectile",e.vProjectile.emitter.rotation.x=Math.PI/2,e.vProjectile.emitter.scale.x=10,e.add(e.vProjectile.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.hProjectile.update(e),this.vProjectile.update(e)}}]),n}(B.h),be=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).mainBeam=void 0,e.glowBeam=void 0,e.particles=void 0,e.beam=void 0,e.smoke=void 0,e.circle=void 0;var r=(new B.t).load("textures/texture1.png");return r.name="textures/texture1.png",e.mainBeam=new ue({duration:2,looping:!1,startLife:new G(.1,.3),startSpeed:new G(5,15),startSize:new G(1.5,1.25),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:25*Math.PI/180,radius:.2,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!1,startLife:new G(1,1.6),startSpeed:new G(.7,1.5),startSize:new G(.4,.8),startColor:new Q(new B.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:80*Math.PI/180,radius:.25,thickness:.5,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.glowBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.smoke=new ue({duration:1,looping:!1,startLife:new G(.5,.8),startSpeed:new G(1,2.5),startSize:new G(1,1.5),startRotation:new G(0,2*Math.PI),startColor:new Q(new B.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:.75,thickness:1}),texture:r,blending:B.l,startTileIndex:2,uTileCount:10,vTileCount:10}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(new B.w(1,.1509503,.07352942,1),new B.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new G(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new G(.6,1.2),startSpeed:new G(2,10),startSize:new G(.1,.4),startColor:new K(new B.w(1,1,1,1),new B.w(1,.1509503,.07352942,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new oe({angle:50/180*Math.PI,radius:.5,thickness:1,arc:2*Math.PI}),texture:r,blending:B.l,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.StretchedBillBoard,speedFactor:.5}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.name="particles",e.add(e.particles.emitter),e.beam=new ue({duration:1,looping:!1,startLife:new U(.2),startSpeed:new U(0),startSize:new U(7),startColor:new Q(new B.w(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.66666,.33333,0),0]]))),e.add(e.beam.emitter),e.circle=new ue({duration:1,looping:!1,startLife:new U(.4),startSpeed:new U(0),startSize:new U(4),startColor:new Q(new B.w(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:10,uTileCount:10,vTileCount:10}),e.circle.addBehavior(new re(new X([[new H(.3,.6,.9,1),0]]))),e.circle.addBehavior(new ae(new X([[new H(10,13,16,19),0]]))),e.circle.emitter.renderOrder=2,e.circle.emitter.name="circle",e.add(e.circle.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e),this.beam.update(e),this.circle.update(e)}}]),n}(B.h),Oe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).gatherParticles=void 0,e.mainBeam=void 0,e.glowBeam=void 0,e.smoke=void 0,e.particles=void 0,e.beam=void 0,e.circle=void 0;var r=(new B.t).load("textures/texture1.png");r.name="textures/texture1.png";var a=n.yellowColor,i=n.yellowColor2;return e.gatherParticles=new ue({duration:1,looping:!1,startLife:new G(.3,.4),startSpeed:new G(-100,-150),startSize:new G(1,3),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:0,count:30,cycle:1,interval:.01,probability:1}],shape:new se({radius:40,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.gatherParticles.addBehavior(new te(new Z(new B.w(a.x,a.y,a.z,.2),new B.w(a.x,a.y,a.z,1)))),e.gatherParticles.emitter.renderOrder=2,e.gatherParticles.emitter.name="gatherParticles",e.add(e.gatherParticles.emitter),e.mainBeam=new ue({duration:2,looping:!1,startLife:new G(.1,.3),startSpeed:new G(100,300),startSize:new G(1.5,12.5),startColor:new Q(new B.w(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!1,startLife:new G(1,1.6),startSpeed:new G(20,45),startSize:new G(4,8),startColor:new Q(a),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.glowBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.smoke=new ue({duration:1,looping:!1,startLife:new G(.5,.8),startSpeed:new G(20,50),startSize:new G(10,15),startRotation:new G(0,2*Math.PI),startColor:new Q(new B.w(1,1,1,.5)),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:7.5,thickness:1}),texture:r,blending:B.l,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(a,new B.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new G(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new G(.6,1.2),startSpeed:new G(40,200),startSize:new G(1,4),startColor:new K(new B.w(1,1,1,1),a),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:r,blending:B.l,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.StretchedBillBoard,speedFactor:.1}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.name="particles",e.add(e.particles.emitter),e.beam=new ue({duration:1,looping:!1,startLife:new U(.2),startSpeed:new U(0),startSize:new U(100),startColor:new Q(i),worldSpace:!1,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:.35,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.beam.emitter.renderOrder=-2,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.66666,.33333,0),0]]))),e.add(e.beam.emitter),e.circle=new ue({duration:1,looping:!1,startLife:new U(.4),startSpeed:new U(0),startSize:new U(40),startColor:new Q(i),worldSpace:!1,maxParticle:100,emissionOverTime:new U(0),emissionBursts:[{time:.4,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:F.BillBoard}),e.circle.addBehavior(new re(new X([[new H(.3,.6,.9,1),0]]))),e.circle.addBehavior(new ae(new X([[new H(10,13,16,19),0]]))),e.circle.emitter.renderOrder=2,e.circle.emitter.name="circle",e.add(e.circle.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.gatherParticles.update(e),this.beam.update(e),this.mainBeam.update(e),this.glowBeam.update(e),this.circle.update(e),this.smoke.update(e),this.particles.update(e)}}]),n}(B.h);Oe.yellowColor=new B.w(.9,.6,.25,1),Oe.yellowColor2=new B.w(1,.95,.4,1);var Se=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).glow=void 0,e.particle=void 0;var r=(new B.t).load("textures/texture1.png");r.name="textures/texture1.png";var a={duration:2,looping:!1,startLife:new U(2),startSpeed:new U(0),startSize:new G(60,80),startColor:new Q(new B.w(1,1,.8,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new U(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:r,blending:B.a,startTileIndex:1,uTileCount:10,vTileCount:10,instancingGeometry:[-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1],renderMode:F.LocalSpaceBillBoard};e.glow=new ue(a),e.glow.addBehavior(new re(new X([[new H(0,.75,.9,1),0],[new H(1,.9,.75,0),.5]]))),e.glow.emitter.renderOrder=0,e.glow.emitter.name="glow",e.glow.emitter.rotation.x=-Math.PI/2,e.add(e.glow.emitter);var i={duration:.6,looping:!1,startLife:new G(.6,.8),startSpeed:new G(120,180),startSize:new G(2,4),startColor:new Q(new B.w(1,1,.8,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new U(80),shape:new oe({radius:25,thickness:.2,angle:Math.PI/100}),texture:r,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:F.BillBoard};return e.particle=new ue(i),e.particle.addBehavior(new re(new X([[new H(0,.75,.9,1),0],[new H(1,.9,.75,0),.5]]))),e.particle.addBehavior(new ie(new X([[new H(0,4*Math.PI*.75,4*Math.PI*.9,4*Math.PI),0]]))),e.particle.emitter.renderOrder=2,e.particle.emitter.name="particle",e.particle.emitter.rotation.x=-Math.PI/2,e.add(e.particle.emitter),e}return Object(l.a)(n,[{key:"update",value:function(e){this.glow.update(e),this.particle.update(e)}}]),n}(B.h),Ce=r.createContext(null),xe=Ce.Consumer,Ee=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).removeObject3d=function(e){e.parent&&e.parent.remove(e)},r.duplicateObject3d=function(e){e.parent&&e.parent.add(e.clone())},r.addObject3d=function(e,t){var n;switch(e){case"particle":var a=(new B.t).load("textures/texture1.png");n=new ue({maxParticle:1e4,shape:new oe,emissionOverTime:new U(100),startLife:new U(30),startSpeed:new U(10),startSize:new U(1),startColor:new Q(new B.w(1,1,1,1)),texture:a,blending:B.a,startTileIndex:0,uTileCount:10,vTileCount:10,worldSpace:!0}).emitter,r.state.scene.add(n);break;case"box":n=new B.j(new B.d(10,10,10),new B.k({color:13421772})),r.state.scene.add(n)}n&&(t.add(n),r.state.actions.select(n),r.setState({}))},r.update=0,r.animate=function(e){r.update+=e,r.update>.1&&(r.state.actions.updateProperties(),r.update=0)};var a={scene:r.createScene(0),script:r.animate,selection:[],actions:{onOpenDemo:function(e){var t=r.createScene(e);r.setState({scene:t})},onSaveAs:function(){var e=document.createElement("a"),t=new Blob([JSON.stringify(r.state.scene.toJSON())],{type:"application/json"});e.href=URL.createObjectURL(t),e.download="scene.json",e.click()},onImport:function(e){for(var t=e.length,n=0;n<t;n++){var a=URL.createObjectURL(e[n]),i=new he;i.setCrossOrigin(""),i.load(a,(function(e){r.state.scene.add(e)}),(function(){}),(function(){}))}},select:function(e){r.setState({selection:[e]})},selectAddition:function(e){-1===r.state.selection.indexOf(e)&&(r.state.selection.push(e),r.setState({selection:r.state.selection}))},addObject3d:r.addObject3d,removeObject3d:r.removeObject3d,duplicateObject3d:r.duplicateObject3d,updateParticleSystem:function(){},updateProperties:function(){r.setState({scene:r.state.scene})}}};return r.state=a,r}return Object(l.a)(n,[{key:"createScene",value:function(e){var t,n=new B.p;n.background=new B.f(6710886),0===e?((t=new fe).name="Toon Projectile",t.userData={script:"    this.position.x += delta * 30;\n    if (this.position.x > 20)\n        this.position.x = -20;\n"},t.userData.func=new Function("delta",t.userData.script)):1===e?(t=new we).name="BulletMuzzle":2===e?(t=new ge).name="BulletProjectile":3===e?(t=new ye).name="BulletHit":4===e?(t=new be).name="ToonExplosion":5===e?(t=new Oe).name="Explosion":6===e?(t=new Se).name="LevelUp":(t=new Oe).name="Explosion",n.add(t);var r=new B.c(100);r.name="axisHelper",n.add(r);var a=new B.n(new B.f(1,1,1),.8,200);a.position.set(50,50,50),n.add(a);var i=new B.b(new B.f(1,1,1),.2);return n.add(i),n}}]),Object(l.a)(n,[{key:"render",value:function(){return r.createElement(Ce.Provider,{value:this.state},this.props.children)}}]),n}(r.Component),ke=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).container=void 0,a.stats=void 0,a.camera=void 0,a.renderer=void 0,a.clock=void 0,a.controls=void 0,a.appContext=void 0,a.onResize=function(e){if(a.renderer.domElement.parentElement.clientWidth-10!==a.renderer.domElement.width||a.renderer.domElement.parentElement.clientHeight-10!==a.renderer.domElement.height){var t=a.renderer.domElement.parentElement.clientWidth-10,n=a.renderer.domElement.parentElement.clientHeight-10;a.camera.aspect=t/n,a.camera.updateProjectionMatrix(),a.renderer.domElement.style.width="100%",a.renderer.domElement.style.height="100%",a.renderer.setSize(t,n)}},a.animate=function(){requestAnimationFrame(a.animate),a.onResize(null),a.renderScene(),a.stats.update()},a.container=r.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.init()&&this.animate()}},{key:"componentDidUpdate",value:function(e,t,n){this.camera.aspect=this.props.width/this.props.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.props.width,this.props.height)}},{key:"init",value:function(){if(!this.container.current)return!1;if(!P.isWebGLAvailable())return document.body.appendChild(P.getWebGLErrorMessage()),!1;this.renderer=new B.x;var e=this.props.width,t=this.props.height;return this.clock=new B.e,this.camera=new B.m(50,e/t,1,1e3),this.camera.position.set(50,50,50),this.controls=new T.a(this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.controls.enableDamping=!0,this.controls.dampingFactor=.1,this.controls.rotateSpeed=.2,this.controls.update(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.container.current.appendChild(this.renderer.domElement),this.stats=new j.a,this.stats.dom.style.position="absolute",this.stats.dom.style.left="",this.stats.dom.style.right="0",this.container.current.appendChild(this.stats.dom),this.onResize(null),!0}},{key:"renderScene",value:function(){if(this.appContext){this.controls.update();var e=this.clock.getDelta();this.appContext.script(e),this.appContext.scene.traverse((function(t){t.userData&&t.userData.func&&t.userData.func.call(t,e),t instanceof _&&t.system.update(e)})),this.renderer.render(this.appContext.scene,this.camera)}}},{key:"render",value:function(){var e=this;return console.log("rendering ThreejsViewPort"),r.createElement(xe,null,(function(t){if(t)return e.appContext=t,r.createElement("div",{ref:e.container,style:{width:"100%",height:"100%"}})}))}}]),n}(r.PureComponent),je=(n(236),function(e){var t=r.useState(e.value+""),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement("input",{className:"number-input",value:l?a:e.value,size:5,onChange:function(e){l&&i(e.target.value)},onBlur:function(t){var n=parseFloat(a);n!==e.value&&e.onChange(n),c(!1)},onFocus:function(t){a!==e.value+""&&i(e.value+""),c(!0)},onKeyDown:function(t){if("Enter"===t.key){var n=parseFloat(a);n!==e.value&&e.onChange(n)}}})}),Pe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){console.log("rendered Vector3");var e=this.props,t=e.x,n=e.y,a=e.z,i=e.unitConversion,o=void 0===i?1:i,s=e.onChange,l=e.name;return r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},l),r.createElement("label",null,"X:"),r.createElement(je,{value:t*o,onChange:function(e){s(e/o,n,a)}}),r.createElement("label",null,"Y:"),r.createElement(je,{value:n*o,onChange:function(e){s(t,e/o,a)}}),r.createElement("label",null,"Z:"),r.createElement(je,{value:a*o,onChange:function(e){s(t,n,e/o)}}))}}]),n}(r.PureComponent),Be=function(e){var t=r.useState(e.value),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement("input",{className:"string-input",value:l?a:e.value,size:20,onChange:function(e){l&&i(e.target.value)},onBlur:function(t){a!==e.value&&e.onChange(a),c(!1)},onFocus:function(t){a!==e.value&&i(e.value),c(!0)},onKeyDown:function(t){"Enter"===t.key&&a!==e.value&&e.onChange(a)}})},Te=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onChangeName=function(e){r.props.object3d.name=e,r.props.updateProperties()},r.onChangePosition=function(e,t,n){r.props.object3d.position.set(e,t,n),r.props.updateProperties()},r.onChangeScale=function(e,t,n){r.props.object3d.scale.set(e,t,n),r.props.updateProperties()},r.onChangeRotation=function(e,t,n){r.props.object3d.rotation.set(e,t,n),r.props.updateProperties()},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log("rendered objectProperties"),r.createElement("div",null,r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Name:"),r.createElement(Be,{value:e.props.object3d.name,onChange:e.onChangeName}))})),r.createElement(xe,null,(function(t){return t&&r.createElement(Pe,{name:"Position",x:e.props.object3d.position.x,y:e.props.object3d.position.y,z:e.props.object3d.position.z,onChange:e.onChangePosition})})),r.createElement(xe,null,(function(t){return t&&r.createElement(Pe,{name:"Rotation",x:e.props.object3d.rotation.x,y:e.props.object3d.rotation.y,z:e.props.object3d.rotation.z,onChange:e.onChangeRotation,unitConversion:180/Math.PI})})),r.createElement(xe,null,(function(t){return t&&r.createElement(Pe,{name:"Scale",x:e.props.object3d.scale.x,y:e.props.object3d.scale.y,z:e.props.object3d.scale.z,onChange:e.onChangeScale})})))}}]),n}(r.PureComponent),Me=n(197);n(400);function ze(e){return"rgba(".concat(255*e.x|0,",").concat(255*e.y|0,",").concat(255*e.z|0,",").concat(e.w,")")}var Ne=function(e){var t=r.useState(!1),n=Object(z.a)(t,2),a=n[0],i=n[1],o=e.color,s=e.onChange;return r.createElement("div",{className:"color-editor"},r.createElement("button",{style:{backgroundColor:ze(o),height:"20px"},onClick:function(){i(!a)}}),ze(o),a?r.createElement("div",{className:"popover"},r.createElement("div",{className:"cover",onClick:function(){i(!1)}}),r.createElement(Me.SketchPicker,{color:{r:255*o.x|0,g:255*o.y|0,b:255*o.z|0,a:o.w},onChange:function(e){var t=new B.w;t.x=Math.min(255,e.rgb.r)/255,t.y=Math.min(255,e.rgb.g)/255,t.z=Math.min(255,e.rgb.b)/255,t.w=e.rgb.a,s(t)}})):null)},Ie=(n(401),n(21)),Le=n(17);function Fe(e,t,n){return e*(1-n)+t*n}var Re=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).x=function(t){return Fe(e.props.xFrom,e.props.xTo,t)},e.y=function(t){return Fe(e.props.yFrom,e.props.yTo,t)},e}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.xFrom,r=t.yFrom,a=t.xTo,i=t.yTo;return e.xFrom!==n||e.yFrom!==r||e.xTo!==a||e.yTo!==i}}]),n}(a.a.Component),De=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e){if(Object(Ie.a)(Object(Le.a)(n.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var t=this.props,r=t.curveColor,a=t.curveWidth,i=t.value,o=Object(z.a)(i.p,4);o[0],o[1],o[2],o[3];return e.curveColor!==r||e.curveWidth!==a||e.value!==i}},{key:"render",value:function(){var e=this.props,t=e.curveColor,n=e.curveWidth,r=e.value,i=this.x,o=this.y,s=Math.floor((i(1)-i(0))/5),l="M".concat(i(0),",").concat(o(r.genValue(0))," ");if(s>0)for(var c=1/s;c<=1;c+=1/s)l+="L".concat(i(c),",").concat(o(r.genValue(c))," ");return l+="L".concat(i(1),",").concat(o(r.genValue(1))," "),a.a.createElement("path",{fill:"none",stroke:t,strokeWidth:n,d:l})}}]),n}(Re),Ve=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e){if(Object(Ie.a)(Object(Le.a)(n.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var t=this.props,r=t.xstart,a=t.ystart,i=t.handleRadius,o=t.handleColor,s=t.hover,l=t.down,c=t.background,u=t.handleStroke,d=t.xval,p=t.yval,m=t.onMouseEnter,h=t.onMouseLeave,v=t.onMouseDown;return e.xstart!==r||e.ystart!==a||e.handleRadius!==i||e.handleColor!==o||e.hover!==s||e.down!==l||e.background!==c||e.handleStroke!==u||e.xval!==d||e.yval!==p||e.onMouseDown!==v||e.onMouseLeave!==h||e.onMouseEnter!==m}},{key:"render",value:function(){var e=this.x,t=this.y,n=this.props,r=n.xstart,i=n.ystart,o=n.handleRadius,s=n.handleColor,l=n.hover,c=n.down,u=n.background,d=n.handleStroke,p=n.xval,m=n.yval,h=n.onMouseEnter,v=n.onMouseLeave,f=n.onMouseDown,w=e(r),g=t(i),y=e(p),b=t(m),O=Math.atan2(b-g,y-w),S=y-o*Math.cos(O),C=b-o*Math.sin(O);return a.a.createElement("g",null,a.a.createElement("line",{stroke:s,strokeWidth:l||c?1+d:d,x1:S,y1:C,x2:w,y2:g}),a.a.createElement("circle",{cx:y,cy:b,r:o,stroke:s,strokeWidth:c?2*d:d,fill:c?u:s,onMouseEnter:h,onMouseLeave:v,onMouseDown:f}))}}]),n}(Re),Ae=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).rootRef=Object(r.createRef)(),a.positionForEvent=function(e){if(a.rootRef.current){var t=a.rootRef.current.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}return[0,0]},a.x=function(e){},a.y=function(e){},a.inversex=function(e){},a.inversey=function(e){},a.onDownLeave=function(e){a.state.down&&(a.onDownMove(e),a.setState({down:-1,hover:-1}))},a.onDownMove=function(e){if(a.state.down>=0){e.preventDefault();var t=a.positionForEvent(e),n=Object(z.a)(t,2),r=n[0],i=n[1],o=new X(a.props.value.functions),s=(a.props.width,a.state.curve),l=o.getFunction(s);if(0===a.state.down){var c=l.p[0];if(l.p[0]=(a.props.height-i)/a.props.height,l.p[1]+=l.p[0]-c,o.setStartX(s,r/a.props.width),s-1>=0){var u=o.getFunction(s-1);u.p[3]=(a.props.height-i)/a.props.height,u.p[2]+=l.p[0]-c,o.setFunction(s-1,o.getFunction(s-1).clone())}o.setFunction(s,l.clone())}if(3===a.state.down){var d=l.p[3];if(l.p[3]=(a.props.height-i)/a.props.height,l.p[2]+=l.p[3]-d,o.setEndX(s,r/a.props.width),s+1<o.numOfFunctions){var p=o.getFunction(s+1);p.p[0]=(a.props.height-i)/a.props.height,p.p[1]+=l.p[3]-d,o.setFunction(s+1,o.getFunction(s+1).clone())}o.setFunction(s,l.clone())}1===a.state.down&&(l.p[1]=(a.props.height-i)/a.props.height,o.setFunction(s,l.clone())),2===a.state.down&&(l.p[2]=(a.props.height-i)/a.props.height,o.setFunction(s,l.clone())),a.props.onChange&&a.props.onChange(o)}},a.onDownUp=function(){a.setState({down:-1})},a.state={curve:-1,down:-1,hover:-1},a}return Object(l.a)(n,[{key:"onEnterHandle",value:function(e,t){this.state.down||this.setState({hover:t,curve:e})}},{key:"onDownHandle",value:function(e,t,n){n.preventDefault(),this.setState({hover:-1,down:t,curve:e})}},{key:"onLeaveHandle",value:function(){this.state.down||this.setState({hover:-1})}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.width,i=t.height,o=t.value,s=t.curveWidth,l=void 0===s?1:s,c=t.curveColor,u=void 0===c?"#000":c,d=t.handleRadius,p=void 0===d?n.defaultP.handleRadius:d,m=t.handleColor,h=void 0===m?"#f00":m,v=t.handleStroke,f=void 0===v?1:v,w=t.background,g=void 0===w?"#fff":w,y=this.state,b=y.curve,O=y.down,S=y.hover,C=[],x=function(t){var n=o.getStartX(t),s=o.getEndX(t),c=o.getFunction(t),d=c.getSlope(0),m=c.getSlope(1);C.push(r.createElement("g",{key:t},r.createElement(De,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,curveColor:u,curveWidth:l,value:c}),r.createElement(Ve,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,0,n)},onMouseEnter:function(n){return e.onEnterHandle(t,0)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:c.p[0],xval:0,yval:c.p[0],handleRadius:p,handleColor:h,down:b===t&&0===O,hover:b===t&&0===S,handleStroke:f,background:g}),r.createElement(Ve,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,1,n)},onMouseEnter:function(n){return e.onEnterHandle(t,1)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:c.p[0],xval:1/3,yval:1/3*d+c.p[0],handleRadius:p,handleColor:h,down:b===t&&1===O,hover:b===t&&1===S,handleStroke:f,background:g}),r.createElement(Ve,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,2,n)},onMouseEnter:function(n){return e.onEnterHandle(t,2)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:c.p[3],xval:1-1/3,yval:c.p[3]-1/3*m,handleRadius:p,handleColor:h,down:b===t&&2===O,hover:b===t&&2===S,handleStroke:f,background:g}),r.createElement(Ve,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,3,n)},onMouseEnter:function(n){return e.onEnterHandle(t,3)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:c.p[3],xval:1,yval:c.p[3],handleRadius:p,handleColor:h,down:b===t&&3===O,hover:b===t&&3===S,handleStroke:f,background:g})))},E=0;E<o.numOfFunctions;E++)x(E);return r.createElement("div",{ref:this.rootRef,onMouseMove:this.onDownMove,onMouseUp:this.onDownUp,onMouseLeave:this.onDownLeave},r.createElement("svg",{width:a,height:i},C))}}]),n}(r.PureComponent);Ae.defaultP={padding:[0,0,0,0],handleRadius:4};var _e={value:["constant","intervalValue"],functionValue:["piecewiseBezier"],color:["color","randomColor"],functionColor:["colorRange","gradient"]},Je=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).changeEditor=function(e){var t=null;switch(e.target.value){case"constant":t=new U(0);break;case"color":t=new Q(new B.w(1,1,1,1));break;case"intervalValue":t=new G(0,1);break;case"colorRange":t=new Z(new B.w(0,0,0,1),new B.w(1,1,1,1));break;case"randomColor":t=new K(new B.w(0,0,0,1),new B.w(1,1,1,1));break;case"piecewiseBezier":t=new X}t&&r.props.updateGenerator(t)},r.changeValue=function(e){r.props.updateGenerator(new U(e))},r.changeColor=function(e){r.props.updateGenerator(new Q(e))},r.changeValueA=function(e){var t=r.props.generator;r.props.updateGenerator(new G(e,t.b))},r.changeValueB=function(e){var t=r.props.generator;r.props.updateGenerator(new G(t.a,e))},r.changeColorRangeA=function(e){var t=r.props.generator;r.props.updateGenerator(new Z(e,t.b))},r.changeColorRangeB=function(e){var t=r.props.generator;r.props.updateGenerator(new Z(t.a,e))},r.changeRandomColorA=function(e){var t=r.props.generator;r.props.updateGenerator(new K(e,t.b))},r.changeRandomColorB=function(e){var t=r.props.generator;r.props.updateGenerator(new K(t.a,e))},r.changeCurve=function(e){r.props.updateGenerator(new X(e.functions))};_e[e.allowedType[0]][0];return r.state={open:!1},r}return Object(l.a)(n,[{key:"getEditorType",value:function(e){return e instanceof U?"constant":e instanceof G?"intervalValue":e instanceof X?"piecewiseBezier":e instanceof Q?"color":e instanceof K?"randomColor":e instanceof Z?"colorRange":e instanceof ve?"gradient":"constant"}},{key:"render",value:function(){console.log("render GeneratorEditor");var e,t=this.props,n=t.name,a=t.generator,i=t.allowedType,o=[],s=Object(M.a)(i);try{for(s.s();!(e=s.n()).done;){var l,c=e.value,u=Object(M.a)(_e[c]);try{for(u.s();!(l=u.n()).done;){var d=l.value;o.push(d)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){s.e(h)}finally{s.f()}var p,m=this.getEditorType(a);switch(console.log(m),m){case"constant":p=r.createElement(r.Fragment,null,r.createElement(je,{value:a.value,onChange:this.changeValue}));break;case"color":p=r.createElement(r.Fragment,null,r.createElement(Ne,{color:a.color,onChange:this.changeColor}));break;case"intervalValue":p=r.createElement(r.Fragment,null,r.createElement(je,{value:a.a,onChange:this.changeValueA}),"-",r.createElement(je,{value:a.b,onChange:this.changeValueB}));break;case"piecewiseBezier":p=r.createElement(r.Fragment,null,r.createElement(Ae,{height:40,width:240,value:a,onChange:this.changeCurve}));break;case"colorRange":p=r.createElement(r.Fragment,null,r.createElement(Ne,{color:a.a,onChange:this.changeColorRangeA}),"-",r.createElement(Ne,{color:a.b,onChange:this.changeColorRangeB}));break;case"randomColor":p=r.createElement(r.Fragment,null,r.createElement(Ne,{color:a.a,onChange:this.changeRandomColorA}),"-",r.createElement(Ne,{color:a.b,onChange:this.changeRandomColorB}))}return r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},n),p,r.createElement("select",{className:"editor-select",onChange:this.changeEditor,value:m},o.map((function(e){return r.createElement("option",{key:e,value:e},e)}))))}}]),n}(r.PureComponent),Ue=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onChangeStartSpeed=function(e){console.log("change start speed"),r.props.particleSystem.startSpeed=e,r.props.updateProperties()},r.onChangeStartLife=function(e){console.log("change start life"),r.props.particleSystem.startLife=e,r.props.updateProperties()},r.onChangeStartSize=function(e){console.log("change start size"),r.props.particleSystem.startSize=e,r.props.updateProperties()},r.onChangeStartColor=function(e){console.log("change start color"),r.props.particleSystem.startColor=e,r.props.updateProperties()},r.OnChangeStartRotation=function(e){console.log("change start rotation"),r.props.particleSystem.startRotation=e,r.props.updateProperties()},r.OnChangeEmissionOverTime=function(e){console.log("change start rotation"),r.props.particleSystem.emissionOverTime=e,r.props.updateProperties()},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;console.log("rendered objectProperties");var t=["value","functionValue"],n=["color","functionColor"];return r.createElement("div",null,r.createElement(xe,null,(function(n){return n&&r.createElement(Je,{name:"Start Life",allowedType:t,generator:e.props.particleSystem.startLife,updateGenerator:e.onChangeStartLife})})),r.createElement(xe,null,(function(n){return n&&r.createElement(Je,{name:"Start Size",allowedType:t,generator:e.props.particleSystem.startSize,updateGenerator:e.onChangeStartSize})})),r.createElement(xe,null,(function(n){return n&&r.createElement(Je,{name:"Start Speed",allowedType:t,generator:e.props.particleSystem.startSpeed,updateGenerator:e.onChangeStartSpeed})})),r.createElement(xe,null,(function(t){return t&&r.createElement(Je,{name:"Start Color",allowedType:n,generator:e.props.particleSystem.startColor,updateGenerator:e.onChangeStartColor})})),r.createElement(xe,null,(function(n){return n&&r.createElement(Je,{name:"Start Rotation",allowedType:t,generator:e.props.particleSystem.startRotation,updateGenerator:e.OnChangeStartRotation})})),r.createElement(xe,null,(function(n){return n&&r.createElement(Je,{name:"Emission Over Time",allowedType:t,generator:e.props.particleSystem.emissionOverTime,updateGenerator:e.OnChangeEmissionOverTime})})))}}]),n}(r.PureComponent),Ge=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).handleChange=function(e){e.target.files&&r.props.onChange(e.target.files)},r}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",null,r.createElement("input",{type:"file",onChange:this.handleChange}),this.props.fileName)}}]),n}(r.Component),We=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onChangeTexture=function(e){console.log("change texture");var t=document.createElement("img"),n=new B.s(t);if(t.onload=function(){n.needsUpdate=!0},e&&e[0]){var a=new FileReader;a.onload=function(e){t.src=a.result},a.readAsDataURL(e[0])}r.props.particleSystem.texture=n,r.props.updateProperties()},r.onChangeStartTile=function(e){r.props.particleSystem.startTileIndex=e,r.props.updateProperties()},r.onChangeUTileCount=function(e){r.props.particleSystem.uTileCount=e,r.props.updateProperties()},r.onChangeVTileCount=function(e){r.props.particleSystem.vTileCount=e,r.props.updateProperties()},r.onChangeBlending=function(e){switch(console.log(e.target.value),e.target.value){case"Normal":r.props.particleSystem.blending=B.l,r.props.particleSystem.emitter.material.blending=B.l;break;case"Additive":r.props.particleSystem.blending=B.a,r.props.particleSystem.emitter.material.blending=B.a}r.props.updateProperties()},r.getValueOfBlending=function(e){switch(e){case B.l:return"Normal";case B.a:return"Additive"}},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log("rendered particleRendererProperties"),r.createElement("div",null,"texture?: Texture; blending?: Blending; worldSpace?: boolean;",r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Blend Mode"),r.createElement("select",{className:"editor-select",onChange:e.onChangeBlending,value:e.getValueOfBlending(e.props.particleSystem.blending)},r.createElement("option",{key:0,value:"Normal"},"Normal"),r.createElement("option",{key:1,value:"Additive"},"Additive")))})),r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"UVTile"),r.createElement("label",null,"Column:"),r.createElement(je,{value:e.props.particleSystem.uTileCount,onChange:e.onChangeUTileCount}),r.createElement("label",null,"Row:"),r.createElement(je,{value:e.props.particleSystem.vTileCount,onChange:e.onChangeVTileCount}))})),r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Start Tile Index"),r.createElement(je,{value:e.props.particleSystem.startTileIndex,onChange:e.onChangeStartTile}))})),r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Texture"),r.createElement(Ge,{fileName:e.props.particleSystem.texture?e.props.particleSystem.texture.name:"..",onChange:e.onChangeTexture}))})))}}]),n}(r.PureComponent),He=n(198),Xe=n.n(He),qe=n(140),Ye=(n(402),function(e){var t=r.useState(e.value),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement(Xe.a,{value:l?a:e.value,onValueChange:function(e){l&&i(e)},highlight:function(e){return Object(qe.highlight)(e,qe.languages.javascript,"javascript")},padding:10,onBlur:function(t){a!==e.value&&e.onChange(a),c(!1)},onFocus:function(t){a!==e.value&&i(e.value),c(!0)},style:{fontFamily:'"Consolas", monospace',fontSize:12}})}),$e=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onChangeScript=function(e){null===r.props.object3d.userData&&(r.props.object3d.userData={}),r.props.object3d.userData.script=e,r.props.object3d.userData.func=new Function("delta",e),r.props.updateProperties()},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(xe,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"script"},"Script:"),r.createElement(Ye,{value:e.props.object3d.userData.script||"",onChange:e.onChangeScript}))})))}}]),n}(r.PureComponent),Ke=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getValueOfShape=function(e){return r.props.particleSystem.emitterShape instanceof le?"PointEmitter":r.props.particleSystem.emitterShape instanceof oe?"ConeEmitter":r.props.particleSystem.emitterShape instanceof se?"SphereEmitter":r.props.particleSystem.emitterShape instanceof ce?"DonutEmitter":""},r.onChangeShape=function(e){switch(e.target.value){case"PointEmitter":r.props.particleSystem.emitterShape instanceof le||(r.props.particleSystem.emitterShape=new le,r.props.updateProperties());break;case"ConeEmitter":r.props.particleSystem.emitterShape instanceof oe||(r.props.particleSystem.emitterShape=new oe,r.props.updateProperties());break;case"SphereEmitter":r.props.particleSystem.emitterShape instanceof se||(r.props.particleSystem.emitterShape=new se,r.props.updateProperties());break;case"DonutEmitter":r.props.particleSystem.emitterShape instanceof ce||(r.props.particleSystem.emitterShape=new ce,r.props.updateProperties())}},r.onChangeKeyValue=function(e,t){r.props.particleSystem.emitterShape[e]=t,r.props.updateProperties()},r}return Object(l.a)(n,[{key:"renderShapeProperties",value:function(){var e=this,t=[],n=function(n){t.push(a.a.createElement("div",{key:n,className:"property"},a.a.createElement("label",{className:"name"},n,":"),a.a.createElement(je,{value:e.props.particleSystem.emitterShape[n],onChange:function(t){return e.onChangeKeyValue(n,t)}})))};for(var r in this.props.particleSystem.emitterShape)n(r);return t}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(xe,null,(function(t){return t&&a.a.createElement("div",{className:"property"},a.a.createElement("label",{className:"name"},"Shape"),a.a.createElement("select",{className:"editor-select",onChange:e.onChangeShape,value:e.getValueOfShape(e.props.particleSystem.emitterShape)},a.a.createElement("option",{key:0,value:"PointEmitter"},"PointEmitter"),a.a.createElement("option",{key:1,value:"ConeEmitter"},"ConeEmitter"),a.a.createElement("option",{key:2,value:"SphereEmitter"},"SphereEmitter"),a.a.createElement("option",{key:3,value:"DonutEmitter"},"DonutEmitter")))})),a.a.createElement(xe,null,(function(t){return t&&e.renderShapeProperties()})))}}]),n}(a.a.PureComponent),Ze=n(455),Qe=n(466),et=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).getSystems=function(){var e=[];return r.props.object3d instanceof _&&e.push(r.props.object3d.system),r.props.object3d.traverse((function(t){t instanceof _&&e.push(t.system)})),e},r.checkPause=function(e){var t=!0;return e.forEach((function(e){e.paused||(t=!1)})),t},r.togglePause=function(){var e=r.getSystems();r.checkPause(e)?e.forEach((function(e){e.play()})):e.forEach((function(e){e.pause()})),r.props.updateProperties()},r.onRestart=function(){r.getSystems().forEach((function(e){e.restart()})),r.props.updateProperties()},r.onStop=function(){r.getSystems().forEach((function(e){e.restart(),e.pause()})),r.props.updateProperties()},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(Qe.a,{color:"primary","aria-label":"primary button group"}),r.createElement(xe,null,(function(t){return t&&r.createElement(Ze.a,{color:"primary","aria-label":"primary button group"},r.createElement(d.a,{disabled:!e.checkPause(e.getSystems()),onClick:e.togglePause},"Play"),r.createElement(d.a,{disabled:e.checkPause(e.getSystems()),onClick:e.togglePause},"Pause"),r.createElement(d.a,{onClick:e.onRestart},"Restart"),r.createElement(d.a,{onClick:e.onStop},"Stop"))})))}}]),n}(r.PureComponent),tt=n(459),nt=n(458),rt=n(465),at=n(39),it=n.n(at),ot=n(460),st=(n(405),n(201)),lt=n(452),ct=n(426),ut=n(456),dt=n(457),pt=n(464),mt=n(199),ht=n.n(mt)()((function(e){return Object(h.a)({root:{width:"100%"},listRoot:{width:"100%",backgroundColor:e.palette.background.paper}})}));var vt=r.memo((function(e){var t=ht(),n=r.useState([0,1,2,3]),a=Object(z.a)(n,2),i=a[0],o=a[1],s=r.useState(1),l=Object(z.a)(s,2),c=l[0],u=l[1],h=r.useState(null),v=Object(z.a)(h,2),f=v[0],w=v[1],g=function(){w(null)},y=function(t){return function(n){var r=e.behaviors[t];switch(r.type){case"ColorOverLife":r.func=n;break;case"RotationOverLife":r.angularVelocityFunc=n;break;case"SizeOverLife":case"FrameOverLife":r.func=n;break;case"OrbitOverLife":r.angularVelocityFunc=n}console.log("changing"),e.updateProperties()}};return r.createElement("div",{className:t.root},r.createElement(Ze.a,{color:"primary","aria-label":"primary button group"},r.createElement(d.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){w(e.currentTarget)},id:"new-button"},"New"),r.createElement(p.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:g},r.createElement(m.a,{onClick:g},"SizeOverLife"),r.createElement(m.a,{onClick:g},"ColorOverLife"),r.createElement(m.a,{onClick:g},"RotationOverLife"),r.createElement(m.a,{onClick:g},"FrameOverLife"),r.createElement(m.a,{onClick:g},"OrbitOverLife")),r.createElement(d.a,null,"Remove")),r.createElement(lt.a,{dense:!0,className:t.listRoot},r.createElement(xe,null,(function(t){return t&&e.behaviors.map((function(e,t){var n,a,s,l="behavior-list-label-".concat(t),d=null;switch(e.type){case"ColorOverLife":n=["functionColor"],d=e.func;break;case"RotationOverLife":n=["functionValue","value"],d=e.angularVelocityFunc;break;case"SizeOverLife":case"FrameOverLife":n=["functionValue"],d=e.func;break;case"OrbitOverLife":n=["functionValue"],d=e.angularVelocityFunc;break;default:n=["functionValue"]}return d&&(a=r.createElement(Je,{name:"Func",allowedType:n,generator:d,updateGenerator:y(t)})),r.createElement(ct.a,{key:t,selected:c===t,onClick:function(e){return function(e,t){u(t)}(0,t)}},r.createElement(ut.a,null,r.createElement(pt.a,{edge:"end",onChange:(s=t,function(){var e=i.indexOf(s),t=Object(st.a)(i);-1===e?t.push(s):t.splice(e,1),o(t)}),checked:-1!==i.indexOf(t),inputProps:{"aria-labelledby":l}})),r.createElement(dt.a,{id:l,primary:e.type,secondary:a}))}))}))))})),ft=b()({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(rt.a),wt=b()({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:32,"&$expanded":{minHeight:32}},content:{margin:0,"&$expanded":{margin:0}},expandIcon:{padding:0},expanded:{}})(nt.a),gt=Object(tt.a)((function(e){return Object(h.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function yt(e){var t=gt(),n=r.useState(["Object","EmitterShape","ParticleRenderer","ParticleEmitter","Behaviors","Script"]),a=Object(z.a)(n,2),i=a[0],o=a[1],s=function(e){return function(t,n){n?i.push(e):i.splice(i.indexOf(e),1),o(i)}};return r.createElement("div",{className:t.root},r.createElement(xe,null,(function(t){return t&&r.createElement(et,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})),r.createElement(ft,{expanded:-1!==i.indexOf("Object"),onChange:s("Object")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"object-content",id:"object-header"},r.createElement(f.a,{className:t.heading},"Object")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement(Te,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof _&&r.createElement(ft,{expanded:-1!==i.indexOf("EmitterShape"),onChange:s("EmitterShape")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"emitter-shape-content",id:"emitter-shape-header"},r.createElement(f.a,{className:t.heading},"Emitter Shape")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement(Ke,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof _&&r.createElement(ft,{expanded:-1!==i.indexOf("ParticleRenderer"),onChange:s("ParticleRenderer")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"particle-renderer-content",id:"particle-renderer-header"},r.createElement(f.a,{className:t.heading},"Particle Renderer")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement(We,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof _&&r.createElement(ft,{expanded:-1!==i.indexOf("ParticleEmitter"),onChange:s("ParticleEmitter")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"particle-emitter-content",id:"particle-emitter-header"},r.createElement(f.a,{className:t.heading},"Particle Emitter")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement(Ue,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof _&&r.createElement(ft,{expanded:-1!==i.indexOf("Behaviors"),onChange:s("Behaviors")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"behaviors-content",id:"behaviors-header"},r.createElement(f.a,{className:t.heading},"Behaviors")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement(vt,{behaviors:e.object3d.system.behaviors,updateProperties:t.actions.updateProperties})})))),r.createElement(ft,{expanded:-1!==i.indexOf("Script"),onChange:s("Script")},r.createElement(wt,{expandIcon:r.createElement(it.a,null),"aria-controls":"script-content",id:"script-header"},r.createElement(f.a,{className:t.heading},"Script")),r.createElement(ot.a,null,r.createElement(xe,null,(function(t){return t&&r.createElement($e,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))))}n(406),n(407);var bt=n(31),Ot=(n(416),n(462)),St=n(200),Ct=n.n(St),xt=n(461),Et=Object(tt.a)((function(e){return Object(h.a)({root:{height:240,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function kt(e){var t,n,r=Et(),i=a.a.useState([]),o=Object(z.a)(i,2),s=o[0],l=o[1],c=a.a.useState(["1"]),u=Object(z.a)(c,2),d=u[0],p=u[1],m=function(t,n){if(n.length>0){var r=function e(t,n){if(0==t)return n;t--;var r,a=Object(M.a)(n.children);try{for(a.s();!(r=a.n()).done;){var i=e(t,r.value);if(i)return i;t--}}catch(o){a.e(o)}finally{a.f()}return null}(parseInt(n[0]),e.scene);r&&e.context.actions.select(r)}l(n)},h=function(e,t){"svg"===e.target.tagName&&p(t)},v=function(e){var t="object";t=e instanceof _?"ParticleSystem":e.type;var n="unnamed";return e.name&&(n=e.name),"[".concat(t,"] ").concat(n)};return a.a.createElement("div",null,a.a.createElement(f.a,{className:r.heading}," Scene Graph "),(t=e.context,n=e.scene,a.a.createElement(Ot.a,{className:r.root,selected:s,expanded:d,onNodeToggle:h,onNodeSelect:m,defaultCollapseIcon:a.a.createElement(it.a,null),defaultExpandIcon:a.a.createElement(Ct.a,null)},function e(t,n,r){var i=[],o=r;r++;var s,l=Object(M.a)(n.children);try{for(l.s();!(s=l.n()).done;){var c=e(t,s.value,r);i.push(c[0]),r=c[1]}}catch(u){l.e(u)}finally{l.f()}return 0!==o?[a.a.createElement(xt.a,{key:n.uuid,nodeId:""+o,label:a.a.createElement(bt.MenuProvider,{id:"scene-graph-menu",data:{object3d:n}},v(n))},i),r]:[a.a.createElement(a.a.Fragment,null,i),r]}(t,n,0)[0])),a.a.createElement(bt.Menu,{id:"scene-graph-menu"},a.a.createElement(bt.Submenu,{label:"Add"},a.a.createElement(bt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.addObject3d("particle",n.object3d)}},"Particle System"),a.a.createElement(bt.Item,{onClick:function(e){var t=e.event,n=e.props;return console.log(t,n)}},"Ball")),a.a.createElement(bt.Separator,null),a.a.createElement(bt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.duplicateObject3d(n.object3d)}},"Duplicate"),a.a.createElement(bt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.removeObject3d(n.object3d)}},"Remove"),a.a.createElement(bt.Separator,null),a.a.createElement(bt.Item,{onClick:function(e){e.event;var t=e.props;if(console.log(t),t.object3d){var n=document.createElement("a"),r=t.object3d.toJSON(),a=new Blob([JSON.stringify(r)],{type:"application/json"});n.href=URL.createObjectURL(a),n.download="scene.json",n.click()}}},"Export"),a.a.createElement(bt.Item,{disabled:!0},"Dolor")))}var jt=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return console.log("render application"),r.createElement(Ee,null,r.createElement("div",{className:"application"},r.createElement("div",{className:"main-menu"},r.createElement(xe,null,(function(e){return e&&r.createElement(E,{onSaveAs:e.actions.onSaveAs,onImport:e.actions.onImport,onOpenDemo:e.actions.onOpenDemo})}))),r.createElement("div",{className:"main"},r.createElement("div",{className:"viewport"},r.createElement(ke,{width:600,height:600})),r.createElement("div",{className:"sidebar"},r.createElement(xe,null,(function(e){return e&&r.createElement(kt,{context:e,scene:e.scene})})),r.createElement(xe,null,(function(e){return e&&e.selection.length>0&&r.createElement(yt,{object3d:e.selection[0]})}))))))}}]),n}(r.Component),Pt=n(137),Bt=n.n(Pt),Tt=n(136),Mt=n.n(Tt),zt=n(135),Nt=n.n(zt),It=n(454),Lt=Nt()({palette:{primary:{main:Bt.a[500]},secondary:{main:Mt.a[500]}},typography:{fontSize:12}}),Ft=function(){return a.a.createElement(It.a,{theme:Lt},a.a.createElement(jt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Ft,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[208,1,2]]]);
//# sourceMappingURL=main.373b8355.chunk.js.map