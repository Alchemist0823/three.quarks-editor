(window["webpackJsonpthree.quarks-editor"]=window["webpackJsonpthree.quarks-editor"]||[]).push([[0],{219:function(e,t,n){e.exports=n(429)},247:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){},429:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(19),o=n.n(i),s=n(1),l=n(5),c=n(6),u=n(4),d=n(7),p=n(436),m=n(484),h=n(466),v=n(461),f=n(464),w=n(64),g=n(435),b=n(462),y=n(75),O=n.n(y),x=n(198),C=n.n(x),S=Object(v.a)((function(e){return{root:{flexGrow:1},menuIcon:{marginRight:e.spacing(2)},menuButton:{marginRight:e.spacing(1)},title:{marginRight:e.spacing(1)}}})),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).fileRef=void 0,n.openFileDialog=function(e){n.fileRef.current&&n.fileRef.current.click()},n.importFile=function(e){e.target.files&&n.props.onImport(e.target.files)},n.openDemo=function(e){n.props.onOpenDemo(e)},n.handleMenuClick=function(e){console.log(e.currentTarget),n.setState({anchorEl:e.currentTarget})},n.handleMenuClose=function(){n.setState({anchorEl:void 0})},n.state={anchorEl:void 0},n.fileRef=r.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.createElement("div",{className:t.root},r.createElement(b.a,{position:"static"},r.createElement(f.a,{variant:"dense"},r.createElement(g.a,{edge:"start",className:t.menuIcon,color:"inherit","aria-label":"menu"},r.createElement(C.a,null)),r.createElement(w.a,{variant:"h6",className:t.title},"Three.Quarks"),r.createElement(p.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"file-button"},"File"),r.createElement(m.a,{id:"file-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"file-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},r.createElement(h.a,null,"New"),r.createElement(h.a,{onClick:this.openFileDialog},"Open"),r.createElement(h.a,{onClick:this.props.onSaveAs},"Download"),r.createElement("input",{ref:this.fileRef,type:"file",id:"fileElem",multiple:!0,accept:"application/json",style:{display:"none"},onChange:this.importFile})),r.createElement(p.a,{color:"inherit",className:t.menuButton,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuClick,id:"demo-button"},"Demo"),r.createElement(m.a,{id:"demo-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl&&"demo-button"===this.state.anchorEl.id),onClose:this.handleMenuClose},r.createElement(h.a,{onClick:function(){return e.openDemo(0)}},"PlasmaProjectile"),r.createElement(h.a,{onClick:function(){return e.openDemo(1)}},"BulletMuzzle"),r.createElement(h.a,{onClick:function(){return e.openDemo(2)}},"BulletProjectile"),r.createElement(h.a,{onClick:function(){return e.openDemo(3)}},"ShipSmoke"),r.createElement(h.a,{onClick:function(){return e.openDemo(4)}},"HitImpact"),r.createElement(h.a,{onClick:function(){return e.openDemo(5)}},"Explosion"),r.createElement(h.a,{onClick:function(){return e.openDemo(6)}},"Levelup"),r.createElement(h.a,{onClick:function(){return e.openDemo(7)}},"Pickup"),r.createElement(h.a,{onClick:function(){return e.openDemo(8)}},"ElectricBall"),r.createElement(h.a,{onClick:function(){return e.openDemo(9)}},"ShipTrail")))))}}]),t}(r.PureComponent),k=O()(S,{withTheme:!0})(E),j=n(199),B=n.n(j),P={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(t){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),r.innerHTML=n,r}},T=n(2),M=n(200),z=n(15),L=n(17),I=n(11);function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N,R="\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec4 vColor;\n\nvoid main() {\n\n    #include <clipping_planes_fragment>\n    \n    vec3 outgoingLight = vec3( 0.0 );\n    vec4 diffuseColor = vColor;\n    \n    #include <logdepthbuf_fragment>\n    \n    #ifdef USE_MAP\n    vec4 texelColor = texture2D( map, vUv);\n    diffuseColor *= texelColor;\n    #endif\n\n    outgoingLight = diffuseColor.rgb;\n\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    \n    #include <tonemapping_fragment>\n\n}\n",D="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset, 1.0 );\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset, 1.0 );\n\t#endif\n\t\n    vec2 alignedPosition = ( position.xy ) * size;\n    \n    vec2 rotatedPosition;\n    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n    \n    mvPosition.xy += rotatedPosition;\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",V="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n    vec2 alignedPosition = ( position.xy ) * size;\n    \n    vec2 rotatedPosition;\n    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n    \n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset + vec3(rotatedPosition, 0.0), 1.0 );\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset + vec3(rotatedPosition, 0.0), 1.0 );\n\t#endif\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",A="\n\n#include <uv_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 offset;\nattribute float rotation;\nattribute float size;\nattribute vec4 color;\nattribute vec3 velocity;\nattribute float uvTile;\n\nvarying vec4 vColor;\n\n#ifdef UV_TILE\nuniform vec2 tileCount;\n#endif\n\nuniform float speedFactor;\n\nvoid main() {\n\n    #ifdef UV_TILE\n        vUv = vec2((mod(uvTile, tileCount.y) + uv.x) * (1.0 / tileCount.x), ((tileCount.y - floor(uvTile / tileCount.y) - 1.0) + uv.y) * (1.0 / tileCount.y));\n    #else\n        #include <uv_vertex>\n    #endif\n\t\n\t#ifdef WORLD_SPACE\n\t    vec4 mvPosition = viewMatrix * vec4( offset, 1.0 );\n        vec3 viewVelocity = vec3(viewMatrix * vec4(velocity, 1.0));\n\t#else\n\t    vec4 mvPosition = modelViewMatrix * vec4( offset, 1.0 );\n        vec3 viewVelocity = vec3(modelViewMatrix * vec4(velocity, 1.0));\n\t#endif\n\n    vec3 scaledPos = vec3(position.xy * size, position.z);\n    mvPosition.xyz += scaledPos + dot(scaledPos, viewVelocity) * viewVelocity / length(viewVelocity) * speedFactor;\n\n\tvColor = color;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n";!function(e){e[e.BillBoard=0]="BillBoard",e[e.StretchedBillBoard=1]="StretchedBillBoard",e[e.LocalSpaceBillBoard=2]="LocalSpaceBillBoard"}(N||(N={}));var U=function(e){function t(e,n){var r;Object(s.a)(this,t),r=Object(c.a)(this,Object(u.a)(t).call(this)),F(Object(L.a)(r),"type","ParticleEmitter"),F(Object(L.a)(r),"system",void 0),F(Object(L.a)(r),"geometry",void 0),F(Object(L.a)(r),"material",void 0),F(Object(L.a)(r),"interleavedBuffer",void 0),F(Object(L.a)(r),"rotationBuffer",void 0),F(Object(L.a)(r),"sizeBuffer",void 0),F(Object(L.a)(r),"colorBuffer",void 0),F(Object(L.a)(r),"offsetBuffer",void 0),F(Object(L.a)(r),"velocityBuffer",void 0),F(Object(L.a)(r),"tiling",void 0),F(Object(L.a)(r),"uvTileBuffer",void 0),F(Object(L.a)(r),"renderMode",void 0),F(Object(L.a)(r),"speedFactor",void 0),F(Object(L.a)(r),"worldSpace",void 0),r.system=e,r.geometry=new I.r,r.renderMode=n.renderMode||N.BillBoard,r.speedFactor=n.speedFactor||1,r.worldSpace=void 0!==n.worldSpace&&n.worldSpace;var a=new Float32Array(n.instancingGeometry||[-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i={},o={};if(r.interleavedBuffer=new I.s(a,5),r.geometry.setIndex([0,1,2,0,2,3]),r.geometry.setAttribute("position",new I.t(r.interleavedBuffer,3,0,!1)),r.geometry.setAttribute("uv",new I.t(r.interleavedBuffer,2,3,!1)),r.offsetBuffer=new I.q(new Float32Array(3*e.maxParticle),3),r.offsetBuffer.setUsage(I.j),r.geometry.setAttribute("offset",r.offsetBuffer),r.colorBuffer=new I.q(new Float32Array(4*e.maxParticle),4),r.offsetBuffer.setUsage(I.j),r.geometry.setAttribute("color",r.colorBuffer),r.rotationBuffer=new I.q(new Float32Array(e.maxParticle),1),r.offsetBuffer.setUsage(I.j),r.geometry.setAttribute("rotation",r.rotationBuffer),r.sizeBuffer=new I.q(new Float32Array(e.maxParticle),1),r.offsetBuffer.setUsage(I.j),r.geometry.setAttribute("size",r.sizeBuffer),r.tiling=!0,n.texture){o.USE_MAP="",o.USE_UV="",i.map=new I.M(n.texture),i.uvTransform=new I.M((new I.A).copy(n.texture.matrix));var l=n.uTileCount||1,d=n.vTileCount||1;r.system.tileCount=l*d,r.tiling&&(r.uvTileBuffer=new I.q(new Float32Array(e.maxParticle),1),r.uvTileBuffer.setUsage(I.j),r.geometry.setAttribute("uvTile",r.uvTileBuffer),o.UV_TILE="",i.tileCount=new I.M(new I.N(l,d)))}if((void 0===n.worldSpace||n.worldSpace)&&(o.WORLD_SPACE=""),r.renderMode===N.BillBoard||r.renderMode===N.LocalSpaceBillBoard){var p,m;r.renderMode===N.LocalSpaceBillBoard?(p=V,m=I.i):(p=D,m=I.n),r.material=new I.J({uniforms:i,defines:o,vertexShader:p,fragmentShader:R,transparent:!0,depthWrite:!1,blending:n.blending||I.a,side:m})}else{if(r.renderMode!==N.StretchedBillBoard)throw new Error("render mode unavailable");r.velocityBuffer=new I.q(new Float32Array(3*e.maxParticle),3),r.velocityBuffer.setUsage(I.j),r.geometry.setAttribute("velocity",r.velocityBuffer),i.speedFactor=new I.M(n.speedFactor),r.material=new I.J({uniforms:i,defines:o,vertexShader:A,fragmentShader:R,transparent:!0,depthWrite:!1,blending:n.blending||I.a})}return r.frustumCulled=!1,r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(){return this.system.clone().emitter}},{key:"update",value:function(){var e=this.system.particles,t=this.system.particleNum;this.geometry.instanceCount=t;for(var n=0;n<t;n++){var r=e[n];this.offsetBuffer.setXYZ(n,r.position.x,r.position.y,r.position.z),this.colorBuffer.setXYZW(n,r.color.x,r.color.y,r.color.z,r.color.w),this.rotationBuffer.setX(n,r.rotation),this.sizeBuffer.setX(n,r.size),this.renderMode===N.StretchedBillBoard&&this.velocityBuffer.setXYZ(n,r.velocity.x,r.velocity.y,r.velocity.z),this.tiling&&this.uvTileBuffer.setX(n,r.uvTile)}t>0&&(this.offsetBuffer.updateRange.count=3*t,this.offsetBuffer.needsUpdate=!0,this.colorBuffer.updateRange.count=4*t,this.colorBuffer.needsUpdate=!0,this.rotationBuffer.updateRange.count=t,this.rotationBuffer.needsUpdate=!0,this.sizeBuffer.updateRange.count=t,this.sizeBuffer.needsUpdate=!0,this.renderMode===N.StretchedBillBoard&&(this.velocityBuffer.updateRange.count=3*t,this.velocityBuffer.needsUpdate=!0),this.tiling&&(this.uvTileBuffer.updateRange.count=t,this.uvTileBuffer.needsUpdate=!0))}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"extractFromCache",value:function(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),null!==this.system&&(r.ps=this.system.toJSON(e)),this.children.length>0){r.children=[];for(var a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(t){var i=this.extractFromCache(e.geometries),o=this.extractFromCache(e.materials),s=this.extractFromCache(e.textures),l=this.extractFromCache(e.images);i.length>0&&(n.geometries=i),o.length>0&&(n.materials=o),s.length>0&&(n.textures=s),l.length>0&&(n.images=l)}return n.object=r,n}}]),t}(I.C),J=function e(){Object(s.a)(this,e),F(this,"startSpeed",0),F(this,"startColor",new I.P),F(this,"startSize",1),F(this,"velocity",new I.O),F(this,"age",0),F(this,"life",1),F(this,"angularVelocity",void 0),F(this,"position",new I.O),F(this,"rotation",0),F(this,"size",1),F(this,"color",new I.P),F(this,"uvTile",0)},_=function(){function e(t){Object(s.a)(this,e),this.value=t,F(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genValue",value:function(){return this.value}},{key:"toJSON",value:function(){return{type:"ConstantValue",value:this.value}}},{key:"clone",value:function(){return new e(this.value)}}],[{key:"fromJSON",value:function(t){return new e(t.value)}}]),e}(),W=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,F(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genValue",value:function(){return I.z.lerp(this.a,this.b,Math.random())}},{key:"toJSON",value:function(){return{type:"IntervalValue",a:this.a,b:this.b}}},{key:"clone",value:function(){return new e(this.a,this.b)}}],[{key:"fromJSON",value:function(t){return new e(t.a,t.b)}}]),e}(),G=function(){function e(){Object(s.a)(this,e),F(this,"functions",void 0),this.functions=new Array}return Object(l.a)(e,[{key:"findFunction",value:function(e){for(var t=0,n=0,r=this.functions.length-1;n+1<r;)if(t=(n+r)/2,e<this.getStartX(t))r=t-1;else{if(!(e>this.getEndX(t)))return t;n=t+1}for(var a=n;a<=r;a++)if(e>=this.functions[a][1]&&e<=this.getEndX(a))return a;return-1}},{key:"getStartX",value:function(e){return this.functions[e][1]}},{key:"setStartX",value:function(e,t){e>0&&(this.functions[e][1]=t)}},{key:"getEndX",value:function(e){return e+1<this.functions.length?this.functions[e+1][1]:1}},{key:"setEndX",value:function(e,t){e+1<this.functions.length&&(this.functions[e+1][1]=t)}},{key:"getFunction",value:function(e){return this.functions[e][0]}},{key:"setFunction",value:function(e,t){this.functions[e][0]=t}},{key:"numOfFunctions",get:function(){return this.functions.length}}]),e}(),H=function(){function e(t,n,r,a){Object(s.a)(this,e),F(this,"p",void 0),this.p=[t,n,r,a]}return Object(l.a)(e,[{key:"genValue",value:function(e){var t=e*e,n=e*e*e,r=1-e,a=r*r,i=a*r;return this.p[0]*i+this.p[1]*a*e*3+this.p[2]*r*t*3+this.p[3]*n}},{key:"derivativeCoefficients",value:function(e){for(var t=[],n=e,r=n.length-1;r>0;r--){for(var a=[],i=0;i<r;i++){var o=r*(n[i+1]-n[i]);a.push(o)}t.push(a),n=a}return t}},{key:"getSlope",value:function(e){var t=this.derivativeCoefficients(this.p)[0],n=1-e,r=n*e*2,a=e*e;return n*n*t[0]+r*t[1]+a*t[2]}},{key:"controlCurve",value:function(e,t){this.p[1]=e/3+this.p[0],this.p[2]=this.p[3]-t/3}},{key:"hull",value:function(e){var t,n=this.p,r=[],a=[],i=0,o=0,s=0;for(a[i++]=n[0],a[i++]=n[1],a[i++]=n[2],a[i++]=n[3];n.length>1;){for(r=[],o=0,s=n.length-1;o<s;o++)t=e*n[o]+(1-e)*n[o+1],a[i++]=t,r.push(t);n=r}return a}},{key:"split",value:function(t){var n=this.hull(t);return{left:new e(n[0],n[4],n[7],n[9]),right:new e(n[9],n[8],n[6],n[3]),span:n}}},{key:"clone",value:function(){return new e(this.p[0],this.p[1],this.p[2],this.p[3])}},{key:"toJSON",value:function(){return{p0:this.p[0],p1:this.p[1],p2:this.p[2],p3:this.p[3]}}}],[{key:"fromJSON",value:function(t){return new e(t.p0,t.p1,t.p2,t.p3)}}]),e}(),X=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[new H(0,1/3,1/3*2,1),0]];return Object(s.a)(this,t),e=Object(c.a)(this,Object(u.a)(t).call(this)),F(Object(L.a)(e),"type",void 0),e.type="function",e.functions=n,e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"genValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.findFunction(e);return-1===t?(console.error(e),0):this.functions[t][0].genValue((e-this.getStartX(t))/(this.getEndX(t)-this.getStartX(t)))}},{key:"toSVG",value:function(e,t){if(t<1)return"";for(var n=["M",0,this.functions[0][0].p[0]].join(" "),r=1/t;r<=1;r+=1/t)n=[n,"L",r*e,this.genValue(r)].join(" ");return n}},{key:"toJSON",value:function(){return{type:"PiecewiseBezier",functions:this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return{function:n.toJSON(),start:r}}))}}},{key:"clone",value:function(){return new t(this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return[n.clone(),r]})))}}],[{key:"fromJSON",value:function(e){return new t(e.functions.map((function(e){return[H.fromJSON(e.function),e.start]})))}}]),t}(G);function q(e){switch(e.type){case"ConstantValue":return _.fromJSON(e);case"IntervalValue":return W.fromJSON(e);case"PiecewiseBezier":return X.fromJSON(e);default:return new _(0)}}var Y=function(e){return{r:e.x,g:e.y,b:e.z,a:e.w}},$=function(e){return new I.P(e.r,e.g,e.b,e.a)},K=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,F(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genColor",value:function(e){var t=Math.random();return e.copy(this.a).lerp(this.b,t)}},{key:"toJSON",value:function(){return{type:"RandomColor",a:Y(this.a),b:Y(this.b)}}},{key:"clone",value:function(){return new e(this.a.clone(),this.b.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.a),$(t.b))}}]),e}(),Z=function(){function e(t,n){Object(s.a)(this,e),this.a=t,this.b=n,F(this,"type",void 0),this.type="function"}return Object(l.a)(e,[{key:"genColor",value:function(e,t){return e.copy(this.a).lerp(this.b,t)}},{key:"toJSON",value:function(){return{type:"ColorRange",a:Y(this.a),b:Y(this.b)}}},{key:"clone",value:function(){return new e(this.a.clone(),this.b.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.a),$(t.b))}}]),e}(),Q=function(){function e(t){Object(s.a)(this,e),this.color=t,F(this,"type",void 0),this.type="value"}return Object(l.a)(e,[{key:"genColor",value:function(e){return e.copy(this.color)}},{key:"toJSON",value:function(){return{type:"ConstantColor",color:Y(this.color)}}},{key:"clone",value:function(){return new e(this.color.clone())}}],[{key:"fromJSON",value:function(t){return new e($(t.color))}}]),e}();function ee(e){switch(e.type){case"ConstantColor":return Q.fromJSON(e);case"ColorRange":return Z.fromJSON(e);case"RandomColor":return K.fromJSON(e);default:return new Q(new I.P(1,1,1,1))}}var te=function(){function e(t){Object(s.a)(this,e),this.func=t,F(this,"type","ColorOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}},{key:"update",value:function(e,t){this.func.genColor(e.color,e.age/e.life),e.color.x*=e.startColor.x,e.color.y*=e.startColor.y,e.color.z*=e.startColor.z,e.color.w*=e.startColor.w}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ne=function(){function e(t){Object(s.a)(this,e),this.angularVelocityFunc=t,F(this,"type","RotationOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){"value"===this.angularVelocityFunc.type?e.angularVelocity=this.angularVelocityFunc.genValue():e.angularVelocity=0}},{key:"update",value:function(e,t){"value"===this.angularVelocityFunc.type?e.rotation+=t*e.angularVelocity:e.rotation+=t*this.angularVelocityFunc.genValue(e.age/e.life)}},{key:"toJSON",value:function(){return{type:this.type,func:this.angularVelocityFunc.toJSON()}}},{key:"clone",value:function(){return new e(this.angularVelocityFunc)}}]),e}(),re=function(){function e(t){Object(s.a)(this,e),this.func=t,F(this,"type","SizeOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}}]),Object(l.a)(e,[{key:"update",value:function(e){e.size=e.startSize*this.func.genValue(e.age/e.life)}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ae=function(){function e(t){Object(s.a)(this,e),this.func=t,F(this,"type","FrameOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}},{key:"update",value:function(e,t){e.uvTile=Math.floor(this.func.genValue(e.age/e.life))}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),ie=(new I.O,function(){function e(t){Object(s.a)(this,e),this.angularVelocityFunc=t,F(this,"type","OrbitOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){"value"===this.angularVelocityFunc.type?e.angularVelocity=this.angularVelocityFunc.genValue():e.angularVelocity=0}},{key:"update",value:function(e,t){var n=Math.atan2(e.position.y,e.position.x),r=Math.sqrt(e.position.x*e.position.x+e.position.y*e.position.y);n+=this.angularVelocityFunc.genValue(e.age/e.life)*t,e.position.x=Math.cos(n)*r,e.position.y=Math.sin(n)*r}},{key:"toJSON",value:function(){return{type:this.type,func:this.angularVelocityFunc.toJSON()}}},{key:"clone",value:function(){return new e(this.angularVelocityFunc.clone())}}]),e}());var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),F(this,"radius",void 0),F(this,"arc",void 0),F(this,"thickness",void 0),F(this,"angle",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1,this.angle=t.angle||Math.PI/6}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=I.z.lerp(1-this.thickness,1,Math.random()),r=t*this.arc,a=Math.sqrt(n),i=Math.sin(r),o=Math.cos(r);e.position.x=a*o,e.position.y=a*i,e.position.z=0;var s=this.angle*a;e.velocity.set(0,0,Math.cos(s)).addScaledVector(e.position,Math.sin(s)).multiplyScalar(e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"cone",radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle})}}]),e}(),se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),F(this,"radius",void 0),F(this,"arc",void 0),F(this,"thickness",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=Math.random(),r=I.z.lerp(1-this.thickness,1,Math.random()),a=t*this.arc,i=Math.acos(2*n-1),o=Math.cbrt(r),s=Math.sin(a),l=Math.cos(a),c=Math.sin(i),u=Math.cos(i);e.position.x=o*c*l,e.position.y=o*c*s,e.position.z=o*u,e.velocity.setScalar(0).addScaledVector(e.position,e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"sphere",radius:this.radius,arc:this.arc,thickness:this.thickness}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness})}}]),e}(),le=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=Math.random(),r=t*Math.PI*2,a=Math.acos(2*n-1),i=Math.cbrt(Math.random()),o=Math.sin(r),s=Math.cos(r),l=Math.sin(a),c=Math.cos(a);e.velocity.x=i*l*s,e.velocity.y=i*l*o,e.velocity.z=i*c,e.velocity.multiplyScalar(e.startSpeed),e.position.setScalar(0)}},{key:"toJSON",value:function(){return{type:"point"}}},{key:"clone",value:function(){return new e}}]),e}(),ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),F(this,"radius",void 0),F(this,"arc",void 0),F(this,"thickness",void 0),F(this,"angle",void 0),this.radius=t.radius||10,this.arc=t.arc||2*Math.PI,this.thickness=t.thickness||1,this.angle=t.angle||Math.PI/6}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=Math.random(),n=I.z.lerp(this.thickness,1,Math.random()),r=t*this.arc,a=Math.sqrt(n),i=Math.sin(r),o=Math.cos(r);e.position.x=a*o,e.position.y=a*i,e.position.z=0;var s=this.angle*a;e.velocity.set(0,0,Math.cos(s)).addScaledVector(e.position,Math.sin(s)).multiplyScalar(e.startSpeed),e.position.multiplyScalar(this.radius)}},{key:"toJSON",value:function(){return{type:"donut",radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle}}},{key:"clone",value:function(){return new e({radius:this.radius,arc:this.arc,thickness:this.thickness,angle:this.angle})}}]),e}(),ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),F(this,"autoDestroy",void 0),F(this,"looping",void 0),F(this,"duration",void 0),F(this,"maxParticle",void 0),F(this,"startLife",void 0),F(this,"startSpeed",void 0),F(this,"startRotation",void 0),F(this,"startSize",void 0),F(this,"startColor",void 0),F(this,"startTileIndex",void 0),F(this,"emissionOverTime",void 0),F(this,"emissionOverDistance",void 0),F(this,"emissionBursts",void 0),F(this,"tileCount",1),F(this,"worldSpace",void 0),F(this,"particleNum",void 0),F(this,"burstIndex",void 0),F(this,"burstWaveIndex",void 0),F(this,"time",void 0),F(this,"paused",void 0),F(this,"waitEmiting",void 0),F(this,"emitEnded",void 0),F(this,"markForDestroy",void 0),F(this,"behaviors",void 0),F(this,"particles",void 0),F(this,"emitterShape",void 0),F(this,"emitter",void 0),F(this,"oldWorldMatrix",new I.B),F(this,"normalMatrix",new I.A),this.autoDestroy=void 0!==t.autoDestroy&&t.autoDestroy,this.duration=t.duration||1,this.maxParticle=t.maxParticle||100,this.looping=void 0===t.looping||t.looping,this.startLife=t.startLife||new _(5),this.startSpeed=t.startSpeed||new _(0),this.startRotation=t.startRotation||new _(0),this.startSize=t.startSize||new _(1),this.startColor=t.startColor||new Q(new I.P(1,1,1,1)),this.emissionOverTime=t.emissionOverTime||new _(10),this.emissionOverDistance=t.emissionOverDistance||new _(0),this.emissionBursts=t.emissionBursts||[],this.emitterShape=t.shape||new se,this.behaviors=t.behaviors||new Array,this.worldSpace=void 0!==t.worldSpace&&t.worldSpace,this.particles=new Array,this.startTileIndex=t.startTileIndex||0,this.emitter=new U(this,t),this.particleNum=0,this.burstIndex=0,this.burstWaveIndex=0,this.time=0,this.paused=!1,this.waitEmiting=0,this.emitEnded=!1,this.markForDestroy=!1}return Object(l.a)(e,[{key:"texture",get:function(){return this.emitter.material.uniforms.map.value},set:function(e){this.emitter.material.uniforms.map.value=e}},{key:"uTileCount",get:function(){return this.emitter.material.uniforms.tileCount.value.x},set:function(e){this.emitter.material.uniforms.tileCount.value.x=e}},{key:"vTileCount",get:function(){return this.emitter.material.uniforms.tileCount.value.y},set:function(e){this.emitter.material.uniforms.tileCount.value.y=e}},{key:"renderMode",get:function(){return this.emitter.renderMode}},{key:"speedFactor",get:function(){return this.emitter.material.uniforms.speedFactor?this.emitter.material.uniforms.speedFactor.value:0},set:function(e){this.emitter.material.uniforms.speedFactor.value=e}},{key:"blending",get:function(){return this.emitter.material.blending},set:function(e){this.emitter.material.blending=e}}]),Object(l.a)(e,[{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"spawn",value:function(e){for(var t=0;t<e&&this.particleNum<this.maxParticle;t++){for(this.particleNum++;this.particles.length<this.particleNum;)this.particles.push(new J);var n=this.particles[this.particleNum-1];this.startColor.genColor(n.startColor,this.time),n.color.copy(n.startColor),n.startSpeed=this.startSpeed.genValue(this.time),n.life=this.startLife.genValue(this.time),n.age=0,n.rotation=this.startRotation.genValue(this.time),n.startSize=n.size=this.startSize.genValue(this.time),n.uvTile=this.startTileIndex,this.emitterShape.initialize(n),this.worldSpace&&(n.position.applyMatrix4(this.emitter.matrixWorld),n.velocity.applyMatrix3(this.normalMatrix));for(var r=0;r<this.behaviors.length;r++)this.behaviors[r].initialize(n)}}},{key:"endEmit",value:function(){this.emitEnded=!0,this.autoDestroy&&(this.markForDestroy=!0)}},{key:"dispose",value:function(){this.emitter.dispose(),this.emitter.parent&&this.emitter.parent.remove(this.emitter)}},{key:"restart",value:function(){this.paused=!1,this.particleNum=0,this.burstIndex=0,this.burstWaveIndex=0,this.time=0,this.waitEmiting=0,this.emitEnded=!1,this.markForDestroy=!1}},{key:"update",value:function(e){if(e>.1&&(e=.1),!this.paused)if(this.emitEnded&&0===this.particleNum)this.markForDestroy&&this.emitter.parent&&this.dispose();else{this.time>this.duration&&(this.looping?this.time-=this.duration:this.emitEnded||this.endEmit()),this.normalMatrix.getNormalMatrix(this.emitter.matrixWorld);for(var t=0;t<this.particleNum;t++){var n=this.particles[t];n.age>=n.life&&(this.particles[t]=this.particles[this.particleNum-1],this.particles[this.particleNum-1]=n,this.particleNum--,t--)}if(!this.emitEnded){var r=Math.floor(this.waitEmiting);this.spawn(r),this.waitEmiting-=r}for(;this.burstIndex<this.emissionBursts.length&&this.emissionBursts[this.burstIndex].time<=this.time;){if(Math.random()<this.emissionBursts[this.burstIndex].probability){var a=this.emissionBursts[this.burstIndex].count;this.spawn(a)}this.burstIndex++}for(var i=0;i<this.particleNum;i++){for(var o=this.particles[i],s=0;s<this.behaviors.length;s++)this.behaviors[s].update(o,e);o.position.addScaledVector(o.velocity,e),o.age+=e}this.emitter.update(),this.oldWorldMatrix.copy(this.emitter.matrixWorld),this.emitEnded||(this.waitEmiting+=e*this.emissionOverTime.genValue(this.time/this.duration)),this.time+=e}}},{key:"toJSON",value:function(e){if(this.texture.toJSON(e),void 0!==this.texture.image){var t=this.texture.image;e.images[t.uuid]={uuid:t.uuid,url:this.texture.name}}return{autoDestroy:this.autoDestroy,looping:this.looping,duration:this.duration,maxParticle:this.maxParticle,shape:this.emitterShape.toJSON(),startLife:this.startLife.toJSON(),startSpeed:this.startSpeed.toJSON(),startRotation:this.startRotation.toJSON(),startSize:this.startSize.toJSON(),startColor:this.startColor.toJSON(),emissionOverTime:this.emissionOverTime.toJSON(),emissionOverDistance:this.emissionOverDistance.toJSON(),emissionBursts:this.emissionBursts,instancingGeometry:Array.from(this.emitter.interleavedBuffer.array),renderMode:this.renderMode,speedFactor:this.renderMode===N.StretchedBillBoard?this.speedFactor:0,texture:this.texture.uuid,startTileIndex:this.startTileIndex,uTileCount:this.uTileCount,vTileCount:this.vTileCount,blending:this.blending,behaviors:this.behaviors.map((function(e){return e.toJSON()})),worldSpace:this.worldSpace}}},{key:"addBehavior",value:function(e){this.behaviors.push(e)}},{key:"clone",value:function(){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=this.emissionBursts[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l={};Object.assign(l,s),t.push(l)}}catch(f){r=!0,a=f}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}var c=[],u=!0,d=!1,p=void 0;try{for(var m,h=this.behaviors[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var v=m.value;c.push(v.clone())}}catch(f){d=!0,p=f}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return new e({autoDestroy:this.autoDestroy,looping:this.looping,duration:this.duration,maxParticle:this.maxParticle,shape:this.emitterShape.clone(),startLife:this.startLife.clone(),startSpeed:this.startSpeed.clone(),startRotation:this.startRotation.clone(),startSize:this.startSize.clone(),startColor:this.startColor.clone(),emissionOverTime:this.emissionOverTime.clone(),emissionOverDistance:this.emissionOverDistance.clone(),emissionBursts:t,instancingGeometry:this.emitter.interleavedBuffer.array,renderMode:this.renderMode,speedFactor:this.speedFactor,texture:this.texture,startTileIndex:this.startTileIndex,uTileCount:this.uTileCount,vTileCount:this.vTileCount,blending:this.blending,behaviors:c,worldSpace:this.worldSpace})}}],[{key:"fromJSON",value:function(t,n){var r;switch(t.shape.type){case"cone":r=new oe(t.shape);break;case"donut":r=new ce(t.shape);break;case"point":r=new le;break;case"sphere":r=new se(t.shape);break;default:r=new le}return new e({autoDestroy:t.autoDestroy,looping:t.looping,duration:t.duration,maxParticle:t.maxParticle,shape:r,startLife:q(t.startLife),startSpeed:q(t.startSpeed),startRotation:q(t.startRotation),startSize:q(t.startSize),startColor:ee(t.startColor),emissionOverTime:q(t.emissionOverTime),emissionOverDistance:q(t.emissionOverDistance),emissionBursts:t.emissionBursts,instancingGeometry:t.instancingGeometry,renderMode:t.renderMode,speedFactor:t.speedFactor,texture:n[t.texture],startTileIndex:t.startTileIndex,uTileCount:t.uTileCount,vTileCount:t.vTileCount,blending:t.blending,behaviors:t.behaviors.map((function(e){return function(e){switch(e.type){case"ColorOverLife":return new te(ee(e.func));case"RotationOverLife":return new ne(q(e.func));case"SizeOverLife":return new re(q(e.func));case"FrameOverLife":return new ae(q(e.func));case"OrbitOverLife":return new ie(q(e.func));default:return new te(new Z(new I.P(1,1,1,1),new I.P(1,1,1,1)))}}(e)})),worldSpace:t.worldSpace})}}]),e}(),de={UVMapping:I.L,CubeReflectionMapping:I.c,CubeRefractionMapping:I.d,EquirectangularReflectionMapping:I.k,EquirectangularRefractionMapping:I.l,CubeUVReflectionMapping:I.f,CubeUVRefractionMapping:I.g},pe={RepeatWrapping:I.I,ClampToEdgeWrapping:I.b,MirroredRepeatWrapping:I.D},me={NearestFilter:I.E,NearestMipmapNearestFilter:I.G,NearestMipmapLinearFilter:I.F,LinearFilter:I.u,LinearMipmapNearestFilter:I.w,LinearMipmapLinearFilter:I.v},he=function(){function e(t){Object(s.a)(this,e),F(this,"manager",void 0),F(this,"crossOrigin","anonymous"),F(this,"path",void 0),F(this,"resourcePath",void 0),this.manager=void 0!==t?t:I.h,this.resourcePath=""}return Object(l.a)(e,[{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"load",value:function(e,t,n,r){var a=this,i=void 0===this.path?I.x.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;var o=new I.m(a.manager);this.path&&o.setPath(this.path),o.load(e,(function(n){var i=null;try{i=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=i.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?a.parse(i,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadImage",value:function(e,t){var n=this;return n.manager.itemStart(t),e.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}},{key:"parseImages",value:function(e,t){var n={};if(void 0!==e&&e.length>0){var r=new I.y(t),a=new I.p(r);a.setCrossOrigin(this.crossOrigin);for(var i=0,o=e.length;i<o;i++){var s=e[i],l=s.url;if(Array.isArray(l)){n[s.uuid]=[];for(var c=0,u=l.length;c<u;c++){var d=l[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:this.resourcePath+d;n[s.uuid].push(this.loadImage(a,p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:this.resourcePath+s.url;n[s.uuid]=this.loadImage(a,p)}}}return n}},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var a=0,i=e.length;a<i;a++){var o,s=e[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new I.e(t[s.image]):new I.K(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,de)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],pe),o.wrapT=n(s.wrap[1],pe)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,me)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,me)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r}},{key:"parseObject",value:function(e,t){var n;switch(e.type){case"ParticleEmitter":n=ue.fromJSON(e.ps,t).emitter;break;case"Group":n=new I.o;break;default:n=new I.H}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var r=e.children,a=0;a<r.length;a++)n.add(this.parseObject(r[a],t));return n}},{key:"parse",value:function(e,t){var n=this.parseImages(e.images,(function(){void 0!==t&&t(a)})),r=this.parseTextures(e.textures,n),a=this.parseObject(e.object,r);return void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a}}]),e}(),ve=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[new Z(new I.P(0,0,0,1),new I.P(1,1,1,1)),0]];return Object(s.a)(this,t),e=Object(c.a)(this,Object(u.a)(t).call(this)),F(Object(L.a)(e),"type",void 0),e.type="function",e.functions=n,e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"genColor",value:function(e,t){var n=this.findFunction(t);return-1===n?(console.error(t),e.copy(this.functions[0][0].a)):this.getFunction(n).genColor(e,t)}},{key:"toJSON",value:function(){return{type:"Gradient",functions:this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return{function:n.toJSON(),start:r}}))}}},{key:"clone",value:function(){return new t(this.functions.map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return[n.clone(),r]})))}}],[{key:"fromJSON",value:function(e){return new t(e.functions.map((function(e){return[Z.fromJSON(e.function),e.start]})))}}]),t}(G),fe=function(){function e(t){Object(s.a)(this,e),this.func=t,F(this,"type","SpeedOverLife")}return Object(l.a)(e,[{key:"initialize",value:function(e){}}]),Object(l.a)(e,[{key:"update",value:function(e){e.velocity.normalize().multiplyScalar(e.startSpeed*this.func.genValue(e.age/e.life))}},{key:"toJSON",value:function(){return{type:this.type,func:this.func.toJSON()}}},{key:"clone",value:function(){return new e(this.func.clone())}}]),e}(),we=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).particles=void 0,e.smoke=void 0,e.glowBeam=void 0,e.mainBeam=void 0;var n=(new T.t).load("textures/texture1.png");return n.name="textures/texture1.png",e.mainBeam=new ue({duration:1,looping:!0,startLife:new W(.1,.15),startSpeed:new _(0),startSize:new _(1.25),startColor:new Q(new T.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(40),shape:new se({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!0,startLife:new W(.1,.15),startSpeed:new _(0),startSize:new _(3.5),startColor:new Q(new T.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(40),shape:new se({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.glowBeam.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.particles=new ue({duration:1,looping:!0,startLife:new W(.3,.6),startSpeed:new W(2,5),startSize:new W(.1,.4),startColor:new K(new T.w(1,1,1,.5),new T.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(60),shape:new oe({angle:4.8423/180*Math.PI,radius:.3,thickness:1,arc:2*Math.PI}),texture:n,renderMode:N.StretchedBillBoard,speedFactor:.01,blending:T.l,startTileIndex:0,uTileCount:10,vTileCount:10}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.rotateY(-Math.PI/2),e.particles.emitter.name="particles",e.add(e.particles.emitter),e.smoke=new ue({startLife:new W(.25,.3),startSpeed:new _(0),startSize:new W(.75,1.25),startRotation:new W(0,2*Math.PI),startColor:new Q(new T.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(20),shape:new se({radius:.2,thickness:1}),texture:n,blending:T.l,startTileIndex:2,uTileCount:10,vTileCount:10}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(new T.w(1,.1509503,.07352942,1),new T.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new W(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e.userData={script:"    this.position.x += delta * 30;\n    if (this.position.x > 20)\n        this.position.x = -20;\n"},e.userData.func=new Function("delta",e.userData.script),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e)}}]),t}(T.h),ge=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).beam=void 0,e.muzzle1=void 0,e.muzzle2=void 0,e.flash=void 0,e.smoke=void 0,e.particles=void 0;var n=(new T.t).load("textures/texture1.png");n.name="textures/texture1.png",e.beam=new ue({duration:1,looping:!1,startLife:new W(.1,.2),startSpeed:new _(0),startSize:new _(4),startColor:new Q(new T.w(1,.585716,.1691176,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.add(e.beam.emitter);var r={duration:1,looping:!1,startLife:new W(.1,.2),startSpeed:new _(0),startSize:new W(1,5),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new _(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:91,uTileCount:10,vTileCount:10,renderMode:N.LocalSpaceBillBoard};return e.muzzle1=new ue(r),e.muzzle1.addBehavior(new te(new Z(new T.w(1,.3882312,.125,1),new T.w(1,.826827,.3014706,1)))),e.muzzle1.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.muzzle1.addBehavior(new ae(new X([[new H(91,94,97,100),0]]))),e.muzzle1.emitter.renderOrder=2,e.muzzle1.emitter.name="muzzle1",e.muzzle1.emitter.position.x=1,e.add(e.muzzle1.emitter),e.muzzle2=new ue(r),e.muzzle2.addBehavior(new te(new Z(new T.w(1,.3882312,.125,1),new T.w(1,.826827,.3014706,1)))),e.muzzle2.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.muzzle2.addBehavior(new ae(new X([[new H(91,94,97,100),0]]))),e.muzzle2.emitter.renderOrder=2,e.muzzle2.emitter.name="muzzle2",e.muzzle2.emitter.position.x=1,e.muzzle2.emitter.rotation.x=Math.PI/2,e.add(e.muzzle2.emitter),e.flash=new ue({duration:1,looping:!1,startLife:new W(.1,.2),startSpeed:new _(0),startSize:new W(1,2.5),startRotation:new W(-Math.PI,Math.PI),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!1,maxParticle:5,emissionOverTime:new _(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.flash.addBehavior(new te(new Z(new T.w(1,.95,.82,1),new T.w(1,.38,.12,1)))),e.flash.addBehavior(new ae(new X([[new H(81,84.333,87.666,91),0]]))),e.flash.emitter.renderOrder=2,e.flash.emitter.name="flash",e.add(e.flash.emitter),e.smoke=new ue({duration:2.5,looping:!1,startLife:new W(.6,.8),startSpeed:new W(.1,3),startSize:new W(.75,1.5),startRotation:new W(-Math.PI,Math.PI),startColor:new K(new T.w(.6323,.6323,.6323,.31),new T.w(1,1,1,.54)),worldSpace:!0,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:5,cycle:1,interval:.01,probability:1}],shape:new oe({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:n,blending:T.l,startTileIndex:81,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.smoke.addBehavior(new te(new Z(new T.w(1,1,1,1),new T.w(1,1,1,0)))),e.smoke.addBehavior(new ne(new W(-Math.PI/4,Math.PI/4))),e.smoke.addBehavior(new ae(new X([[new H(28,31,34,37),0]]))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.smoke.emitter.rotation.y=Math.PI/2,e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new W(.2,.6),startSpeed:new W(1,15),startSize:new W(.1,.3),startColor:new K(new T.w(1,.91,.51,1),new T.w(1,.44,.16,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:20*Math.PI/180,radius:.3,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.StretchedBillBoard,speedFactor:.5}),e.particles.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.particles.emitter.renderOrder=1,e.particles.emitter.name="particles",e.particles.emitter.rotation.y=Math.PI/2,e.add(e.particles.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.beam.update(e),this.muzzle1.update(e),this.muzzle2.update(e),this.flash.update(e),this.smoke.update(e),this.particles.update(e)}}]),t}(T.h),be=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).hProjectile=void 0,e.vProjectile=void 0;var n=(new T.t).load("textures/projectile.png");n.name="textures/projectile.png";var r={duration:1,looping:!0,startLife:new _(.5),startSpeed:new _(0),startSize:new W(1,2),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!1,maxParticle:10,emissionOverTime:new _(4),shape:new le,texture:n,blending:T.a,startTileIndex:0,uTileCount:1,vTileCount:1,instancingGeometry:[-2,-.5,0,0,0,2,-.5,0,1,0,2,.5,0,1,1,-2,.5,0,0,1],renderMode:N.LocalSpaceBillBoard};return e.hProjectile=new ue(r),e.hProjectile.addBehavior(new te(new ve([[new Z(new T.w(1,1,1,0),new T.w(0,1,.25,1)),0],[new Z(new T.w(0,1,.25,1),new T.w(1,1,1,0)),.5]]))),e.hProjectile.emitter.renderOrder=2,e.hProjectile.emitter.name="hProjectile",e.add(e.hProjectile.emitter),e.vProjectile=new ue(r),e.vProjectile.addBehavior(new te(new ve([[new Z(new T.w(1,1,1,0),new T.w(0,1,.25,1)),0],[new Z(new T.w(0,1,.25,1),new T.w(1,1,1,0)),.5]]))),e.vProjectile.emitter.renderOrder=2,e.vProjectile.emitter.name="vProjectile",e.vProjectile.emitter.rotation.x=Math.PI/2,e.add(e.vProjectile.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.hProjectile.update(e),this.vProjectile.update(e)}}]),t}(T.h),ye=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).mainBeam=void 0,e.glowBeam=void 0,e.particles=void 0,e.beam=void 0,e.smoke=void 0,e.circle=void 0;var n=(new T.t).load("textures/texture1.png");return n.name="textures/texture1.png",e.mainBeam=new ue({duration:2,looping:!1,startLife:new W(.1,.3),startSpeed:new W(5,15),startSize:new W(1.5,1.25),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:25*Math.PI/180,radius:.2,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!1,startLife:new W(1,1.6),startSpeed:new W(.7,1.5),startSize:new W(.4,.8),startColor:new Q(new T.w(1,.1509503,.07352942,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:8,cycle:1,interval:.01,probability:1}],shape:new oe({angle:80*Math.PI/180,radius:.25,thickness:.5,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.glowBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.smoke=new ue({duration:1,looping:!1,startLife:new W(.5,.8),startSpeed:new W(1,2.5),startSize:new W(1,1.5),startRotation:new W(0,2*Math.PI),startColor:new Q(new T.w(1,1,1,.5)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:.75,thickness:1}),texture:n,blending:T.l,startTileIndex:2,uTileCount:10,vTileCount:10}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(new T.w(1,.1509503,.07352942,1),new T.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new W(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new W(.6,1.2),startSpeed:new W(2,10),startSize:new W(.1,.4),startColor:new K(new T.w(1,1,1,1),new T.w(1,.1509503,.07352942,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:12,cycle:1,interval:.01,probability:1}],shape:new oe({angle:50/180*Math.PI,radius:.5,thickness:1,arc:2*Math.PI}),texture:n,blending:T.l,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.StretchedBillBoard,speedFactor:.5}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.name="particles",e.add(e.particles.emitter),e.beam=new ue({duration:1,looping:!1,startLife:new _(.2),startSpeed:new _(0),startSize:new _(7),startColor:new Q(new T.w(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.66666,.33333,0),0]]))),e.add(e.beam.emitter),e.circle=new ue({duration:1,looping:!1,startLife:new _(.4),startSpeed:new _(0),startSize:new _(4),startColor:new Q(new T.w(1,.3059356,.2426471,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:10,uTileCount:10,vTileCount:10}),e.circle.addBehavior(new re(new X([[new H(.3,.6,.9,1),0]]))),e.circle.addBehavior(new ae(new X([[new H(10,13,16,19),0]]))),e.circle.emitter.renderOrder=2,e.circle.emitter.name="circle",e.add(e.circle.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.mainBeam.update(e),this.glowBeam.update(e),this.particles.update(e),this.smoke.update(e),this.beam.update(e),this.circle.update(e)}}]),t}(T.h),Oe=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).gatherParticles=void 0,e.mainBeam=void 0,e.glowBeam=void 0,e.smoke=void 0,e.particles=void 0,e.beam=void 0,e.circle=void 0;var n=(new T.t).load("textures/texture1.png");n.name="textures/texture1.png";var r=t.yellowColor,a=t.yellowColor2;return e.gatherParticles=new ue({duration:1,looping:!1,startLife:new W(.3,.4),startSpeed:new W(-100,-150),startSize:new W(1,3),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:0,count:30,cycle:1,interval:.01,probability:1}],shape:new se({radius:40,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.gatherParticles.addBehavior(new te(new Z(new T.w(r.x,r.y,r.z,.2),new T.w(r.x,r.y,r.z,1)))),e.gatherParticles.emitter.renderOrder=2,e.gatherParticles.emitter.name="gatherParticles",e.add(e.gatherParticles.emitter),e.mainBeam=new ue({duration:2,looping:!1,startLife:new W(.1,.3),startSpeed:new W(100,300),startSize:new W(1.5,12.5),startColor:new Q(new T.w(1,1,1,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.mainBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.mainBeam.emitter.renderOrder=2,e.mainBeam.emitter.name="mainBeam",e.add(e.mainBeam.emitter),e.glowBeam=new ue({duration:1,looping:!1,startLife:new W(1,1.6),startSpeed:new W(20,45),startSize:new W(4,8),startColor:new Q(r),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:8,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.glowBeam.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.smoke=new ue({duration:1,looping:!1,startLife:new W(.5,.8),startSpeed:new W(20,50),startSize:new W(10,15),startRotation:new W(0,2*Math.PI),startColor:new Q(new T.w(1,1,1,.5)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:7.5,thickness:1}),texture:n,blending:T.l,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.smoke.addBehavior(new re(new X([[new H(1,.95,.75,0),0]]))),e.smoke.addBehavior(new te(new Z(r,new T.w(0,0,0,0)))),e.smoke.addBehavior(new ne(new W(2*-Math.PI,2*Math.PI))),e.smoke.emitter.renderOrder=-2,e.smoke.emitter.name="smoke",e.add(e.smoke.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new W(.6,1.2),startSpeed:new W(40,200),startSize:new W(1,4),startColor:new K(new T.w(1,1,1,1),r),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:12,cycle:1,interval:.01,probability:1}],shape:new se({radius:2,thickness:1,arc:2*Math.PI}),texture:n,blending:T.l,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.StretchedBillBoard,speedFactor:.1}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.name="particles",e.add(e.particles.emitter),e.beam=new ue({duration:1,looping:!1,startLife:new _(.2),startSpeed:new _(0),startSize:new _(100),startColor:new Q(a),worldSpace:!1,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:.35,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.beam.emitter.renderOrder=-2,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(1,.66666,.33333,0),0]]))),e.add(e.beam.emitter),e.circle=new ue({duration:1,looping:!1,startLife:new _(.4),startSpeed:new _(0),startSize:new _(40),startColor:new Q(a),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.circle.addBehavior(new re(new X([[new H(.3,.6,.9,1),0]]))),e.circle.addBehavior(new ae(new X([[new H(10,13,16,19),0]]))),e.circle.emitter.renderOrder=2,e.circle.emitter.name="circle",e.add(e.circle.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.gatherParticles.update(e),this.beam.update(e),this.mainBeam.update(e),this.glowBeam.update(e),this.circle.update(e),this.smoke.update(e),this.particles.update(e)}}]),t}(T.h);Oe.yellowColor=new T.w(.9,.6,.25,1),Oe.yellowColor2=new T.w(1,.95,.4,1);var xe=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).gatherParticles=void 0,e.glow=void 0,e.glow2=void 0,e.particle=void 0,e.name="levelUp";var n=(new T.t).load("textures/texture1.png");n.name="textures/texture1.png";var r=new T.w(.8,.8,.2,1);e.gatherParticles=new ue({duration:.5,looping:!1,startLife:new W(.3,.4),startSpeed:new W(-100,-150),startSize:new W(1,2),startColor:new Q(r),worldSpace:!1,maxParticle:100,emissionOverTime:new _(100),shape:new se({radius:60,thickness:.8,arc:Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.StretchedBillBoard,speedFactor:.05}),e.gatherParticles.addBehavior(new te(new Z(new T.w(.2,.2,.2,1),new T.w(1,1,1,1)))),e.gatherParticles.emitter.name="gatherParticles",e.gatherParticles.emitter.renderOrder=2,e.add(e.gatherParticles.emitter);var a={duration:2,looping:!1,startLife:new _(2),startSpeed:new _(0),startSize:new W(60,80),startColor:new Q(r),worldSpace:!1,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10,instancingGeometry:[-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1],renderMode:N.LocalSpaceBillBoard};e.glow=new ue(a),e.glow.addBehavior(new re(new X([[new H(0,.75,.9,1),0],[new H(1,.9,.75,0),.5]]))),e.glow.emitter.renderOrder=0,e.glow.emitter.name="glow",e.glow.emitter.rotation.x=-Math.PI/2,e.add(e.glow.emitter);var i={duration:2,looping:!1,startLife:new _(2),startSpeed:new _(0),startSize:new W(60,80),startColor:new Q(r),worldSpace:!1,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:1,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:N.BillBoard};e.glow2=new ue(i),e.glow2.addBehavior(new re(new X([[new H(0,.75,.9,1),0],[new H(1,.9,.75,0),.2]]))),e.glow2.emitter.renderOrder=0,e.glow2.emitter.name="glow2",e.add(e.glow2.emitter);var o={duration:1,looping:!1,startLife:new W(.6,.8),startSpeed:new W(120,180),startSize:new W(2,4),startColor:new Q(r),worldSpace:!1,maxParticle:100,emissionOverTime:new X([[new H(0,0,0,0),0],[new H(50,80,80,50),.4]]),shape:new oe({radius:25,thickness:.2,angle:Math.PI/100}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.BillBoard};return e.particle=new ue(o),e.particle.addBehavior(new re(new X([[new H(0,.75,.9,1),0],[new H(1,.9,.75,0),.5]]))),e.particle.addBehavior(new ie(new X([[new H(0,4*Math.PI*.75,4*Math.PI*.9,4*Math.PI),0]]))),e.particle.emitter.renderOrder=2,e.particle.emitter.name="particle",e.particle.emitter.rotation.x=-Math.PI/2,e.add(e.particle.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.gatherParticles.update(e),this.glow.update(e),this.glow2.update(e),this.particle.update(e)}}]),t}(T.h),Ce=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).particles=void 0,e.circle=void 0,e.upflow=void 0,e.beam=void 0;var n=(new T.t).load("textures/texture1.png");return n.name="textures/texture1.png",e.circle=new ue({duration:1,looping:!1,startLife:new _(.6),startSpeed:new _(0),startSize:new W(2,10),startColor:new Q(new T.w(1,1,1,.5)),worldSpace:!1,maxParticle:2e3,emissionOverTime:new _(40),emissionBursts:[{time:0,count:100,cycle:1,interval:.01,probability:1}],shape:new oe({radius:30,thickness:2,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.circle.addBehavior(new ie(new W(6,8))),e.circle.addBehavior(new re(new X([[new H(0,.88,.88,0),0]]))),e.circle.addBehavior(new te(new Z(new T.w(.2,.6,1,1),new T.w(.2,.2,1,1)))),e.circle.emitter.renderOrder=3,e.circle.emitter.name="mainBeam",e.add(e.circle.emitter),e.beam=new ue({duration:1,looping:!1,startLife:new _(.6),startSpeed:new _(0),startSize:new _(100),startColor:new Q(t.yellowColor),worldSpace:!1,maxParticle:10,emissionOverTime:new _(0),emissionBursts:[{time:0,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.beam.addBehavior(new re(new X([[new H(.3,.5,.6666,1),0]]))),e.add(e.beam.emitter),e.particles=new ue({duration:1,looping:!1,startLife:new W(.6,.8),startSpeed:new W(20,30),startSize:new W(2,6),startColor:new K(t.darkOrangeColor,t.redColor),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:30,cycle:1,interval:.01,probability:1}],shape:new se({radius:20,thickness:3,arc:2*Math.PI}),texture:n,blending:T.l,startTileIndex:0,uTileCount:10,vTileCount:10,renderMode:N.StretchedBillBoard,speedFactor:.1}),e.particles.addBehavior(new re(new X([[new H(1,.3,.25,.1),0]]))),e.particles.emitter.renderOrder=2,e.particles.emitter.name="particles",e.add(e.particles.emitter),e.upflow=new ue({duration:1,looping:!1,startLife:new _(.6),startSpeed:new _(0),startSize:new _(60),startColor:new K(new T.w(1,.2,0,1),t.redColor),worldSpace:!1,maxParticle:100,emissionOverTime:new _(0),emissionBursts:[{time:.4,count:2,cycle:1,interval:.01,probability:1}],shape:new le,texture:n,blending:T.a,startTileIndex:10,uTileCount:10,vTileCount:10,renderMode:N.LocalSpaceBillBoard}),e.upflow.addBehavior(new re(new X([[new H(1,.9,.6,.3),0]]))),e.upflow.addBehavior(new ae(new X([[new H(38,39,40,46),0]]))),e.upflow.emitter.renderOrder=1,e.upflow.emitter.name="upflow",e.add(e.upflow.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.circle.update(e),this.beam.update(e),this.upflow.update(e),this.particles.update(e)}}]),t}(T.h);Ce.yellowColor=new T.w(1,1,.3,1),Ce.darkOrangeColor=new T.w(1,.7,.1,1),Ce.redColor=new T.w(1,0,0,1);var Se=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).smoke=void 0,e.name="shipSmoke";var n=(new T.t).load("textures/texture1.png");n.name="textures/texture1.png";var r=new T.w(.5,.5,.5,1);return e.smoke=new ue({duration:5,looping:!0,startLife:new W(1.5,3),startSpeed:new W(20,30),startSize:new W(10,15),startColor:new Q(r),worldSpace:!0,maxParticle:100,emissionOverTime:new _(20),shape:new oe({radius:10,thickness:1,angle:.2}),texture:n,blending:T.l,startTileIndex:2,uTileCount:10,vTileCount:10,renderMode:N.BillBoard}),e.smoke.addBehavior(new te(new Z(new T.w(1,1,1,1),new T.w(.8,.8,.8,0)))),e.smoke.addBehavior(new re(new X([[new H(.2,1,1,1),0]]))),e.smoke.emitter.name="smoke",e.smoke.emitter.renderOrder=2,e.smoke.emitter.rotation.x=-Math.PI/2,e.add(e.smoke.emitter),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.smoke.update(e)}}]),t}(T.h),Ee=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).beam=void 0,e.beamWorld=void 0,e.electricity=void 0,e.electricBall=void 0;var n=(new T.t).load("textures/texture2.png");return n.name="textures/texture2.png",e.beam=new ue({duration:1,looping:!0,startLife:new _(1),startSpeed:new _(0),startSize:new _(15),startColor:new Q(new T.w(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(1),emissionBursts:[],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.add(e.beam.emitter),e.beamWorld=new ue({duration:1,looping:!0,startLife:new W(.1,.4),startSpeed:new _(0),startSize:new W(7.5,15),startColor:new K(new T.w(.11176472,.28738328,.8,1),new T.w(.8,.9275356*.8,.08235296,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new W(5,10),emissionBursts:[],shape:new se({radius:.01,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beamWorld.emitter.renderOrder=0,e.beamWorld.emitter.name="beamWorld",e.beamWorld.addBehavior(new te(new Z(new T.w(1,1,1,1),new T.w(0,0,0,1)))),e.add(e.beamWorld.emitter),e.electricity=new ue({duration:.5,looping:!0,startLife:new W(.2,.3),startSpeed:new _(0),startSize:new W(3,6),startRotation:new W(-Math.PI,Math.PI),startColor:new K(new T.w(.1397059,.3592291,1,1),new T.w(1,.9275356,.1029412,1)),worldSpace:!0,maxParticle:100,emissionOverTime:new W(5,10),emissionBursts:[],shape:new le,texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.electricity.addBehavior(new ae(new X([[new H(53,56,59,62),0]]))),e.electricity.addBehavior(new re(new X([[new H(1,1,.75,0),0]]))),e.electricity.emitter.renderOrder=2,e.electricity.emitter.name="electricity",e.add(e.electricity.emitter),e.electricBall=new ue({duration:.4,looping:!0,startLife:new W(.2,.4),startSpeed:new _(0),startSize:new W(5,10),startRotation:new W(-Math.PI,Math.PI),startColor:new K(new T.w(.1397059,.3592291,1,1),new T.w(1,.9275356,.1029412,1)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(3),emissionBursts:[],shape:new le,texture:n,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10}),e.electricBall.addBehavior(new ae(new X([[new H(62,65,68,71),0]]))),e.electricBall.emitter.renderOrder=1,e.electricBall.emitter.name="electricBall",e.add(e.electricBall.emitter),e.userData={script:"    this.position.x += delta * 30;\n    if (this.position.x > 20)\n        this.position.x = -20;\n"},e.userData.func=new Function("delta",e.userData.script),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.beam.update(e),this.beamWorld.update(e),this.electricity.update(e),this.electricBall.update(e)}}]),t}(T.h),ke=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).particles=void 0,e.glowBeam=void 0,e.beam=void 0;var n=(new T.t).load("textures/texture1.png");return n.name="textures/texture1.png",e.beam=new ue({duration:1,looping:!0,startLife:new _(1),startSpeed:new _(0),startSize:new _(20),startColor:new Q(new T.w(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(1),emissionBursts:[],shape:new le,texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.beam.emitter.renderOrder=0,e.beam.emitter.name="beam",e.add(e.beam.emitter),e.add(e.beam.emitter),e.glowBeam=new ue({duration:1,looping:!0,startLife:new _(.5),startSpeed:new _(0),startSize:new _(10),startColor:new Q(new T.w(.5220588*.772549,.6440161*.772549,.772549,.772549)),worldSpace:!0,maxParticle:500,emissionOverTime:new _(120),shape:new se({radius:1e-4,thickness:1,arc:2*Math.PI}),texture:n,blending:T.a,startTileIndex:1,uTileCount:10,vTileCount:10}),e.glowBeam.addBehavior(new re(new X([[new H(1,1,.8,.5),0]]))),e.glowBeam.addBehavior(new te(new Z(new T.w(1,1,1,1),new T.w(0,0,0,0)))),e.glowBeam.emitter.renderOrder=2,e.glowBeam.emitter.name="glowBeam",e.add(e.glowBeam.emitter),e.particles=new ue({duration:1,looping:!0,startLife:new W(.3,.6),startSpeed:new W(20,40),startSize:new W(1,2),startColor:new K(new T.w(1,1,1,.5),new T.w(.5220588,.6440161,1,.772549)),worldSpace:!1,maxParticle:100,emissionOverTime:new _(60),shape:new oe({angle:80/180*Math.PI,radius:1,thickness:.3,arc:2*Math.PI}),texture:n,renderMode:N.StretchedBillBoard,speedFactor:.2,blending:T.l,startTileIndex:0,uTileCount:10,vTileCount:10}),e.particles.addBehavior(new re(new X([[new H(1,.25,.05,0),0]]))),e.particles.emitter.renderOrder=0,e.particles.emitter.rotateY(-Math.PI/2),e.particles.emitter.name="particles",e.add(e.particles.emitter),e.userData={script:"    this.position.x += delta * 200;\n    if (this.position.x > 200)\n        this.position.x = -200;\n"},e.userData.func=new Function("delta",e.userData.script),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"update",value:function(e){this.beam.update(e),this.glowBeam.update(e),this.particles.update(e)}}]),t}(T.h),je=r.createContext(null),Be=je.Consumer,Pe=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).removeObject3d=function(e){e.parent&&e.parent.remove(e)},n.duplicateObject3d=function(e){e.parent&&e.parent.add(e.clone())},n.addObject3d=function(e,t){var r;switch(e){case"particle":var a=n.state.textures[0].texture;r=new ue({maxParticle:1e4,shape:new oe,emissionOverTime:new _(100),startLife:new _(30),startSpeed:new _(10),startSize:new _(1),startColor:new Q(new T.w(1,1,1,1)),texture:a,blending:T.a,startTileIndex:0,uTileCount:10,vTileCount:10,worldSpace:!0}).emitter,n.state.scene.add(r);break;case"box":r=new T.j(new T.d(10,10,10),new T.k({color:13421772})),n.state.scene.add(r)}r&&(t.add(r),n.state.actions.select(r),n.setState({}))},n.update=0,n.animate=function(e){n.update+=e,n.update>.1&&(n.state.actions.updateProperties(),n.update=0)};var r=(new T.t).load("textures/texture1.png");r.name="textures/texture1.png";var a=(new T.t).load("textures/texture2.png");a.name="textures/texture2.png";var i={scene:n.createScene(0),script:n.animate,selection:[],textures:[{img:"./textures/texture1.png",texture:r},{img:"./textures/texture2.png",texture:a}],actions:{onOpenDemo:function(e){var t=n.createScene(e);n.setState({scene:t})},onSaveAs:function(){var e=document.createElement("a"),t=new Blob([JSON.stringify(n.state.scene.toJSON())],{type:"application/json"});e.href=URL.createObjectURL(t),e.download="scene.json",e.click()},onImport:function(e){for(var t=e.length,r=0;r<t;r++){var a=URL.createObjectURL(e[r]),i=new he;i.setCrossOrigin(""),i.load(a,(function(e){n.state.scene.add(e)}),(function(){}),(function(){}))}},select:function(e){n.setState({selection:[e]})},selectAddition:function(e){-1===n.state.selection.indexOf(e)&&(n.state.selection.push(e),n.setState({selection:n.state.selection}))},addObject3d:n.addObject3d,removeObject3d:n.removeObject3d,duplicateObject3d:n.duplicateObject3d,updateParticleSystem:function(){},updateProperties:function(){n.setState({scene:n.state.scene})},addTexture:function(e){n.state.textures.push(e),n.setState({textures:n.state.textures})}}};return n.state=i,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"createScene",value:function(e){var t,n=new T.p;n.background=new T.f(6710886),0===e?(t=new we).name="Toon Projectile":1===e?(t=new ge).name="BulletMuzzle":2===e?(t=new be).name="BulletProjectile":3===e?(t=new Se).name="shipSmoke":4===e?(t=new ye).name="ToonExplosion":5===e?(t=new Oe).name="Explosion":6===e?(t=new xe).name="LevelUp":7===e?(t=new Ce).name="PickUp":8==e?(t=new Ee).name="ElectricBall":9==e?(t=new ke).name="ShipTrail":(t=new Ee).name="ElectricBall",n.add(t);var r=new T.c(100);r.name="axisHelper",n.add(r);var a=new T.n(new T.f(1,1,1),.8,200);a.position.set(50,50,50),n.add(a);var i=new T.b(new T.f(1,1,1),.2);return n.add(i),n}}]),Object(l.a)(t,[{key:"render",value:function(){return r.createElement(je.Provider,{value:this.state},this.props.children)}}]),t}(r.Component),Te=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).container=void 0,n.stats=void 0,n.camera=void 0,n.renderer=void 0,n.clock=void 0,n.controls=void 0,n.appContext=void 0,n.onResize=function(e){if(n.renderer.domElement.parentElement.clientWidth-10!==n.renderer.domElement.width||n.renderer.domElement.parentElement.clientHeight-10!==n.renderer.domElement.height){var t=n.renderer.domElement.parentElement.clientWidth-10,r=n.renderer.domElement.parentElement.clientHeight-10;n.camera.aspect=t/r,n.camera.updateProjectionMatrix(),n.renderer.domElement.style.width="100%",n.renderer.domElement.style.height="100%",n.renderer.setSize(t,r)}},n.animate=function(){requestAnimationFrame(n.animate),n.onResize(null),n.renderScene(),n.stats.update()},n.container=r.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.init()&&this.animate()}},{key:"componentDidUpdate",value:function(e,t,n){this.camera.aspect=this.props.width/this.props.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.props.width,this.props.height)}},{key:"init",value:function(){if(!this.container.current)return!1;if(!P.isWebGLAvailable())return document.body.appendChild(P.getWebGLErrorMessage()),!1;this.renderer=new T.x;var e=this.props.width,t=this.props.height;return this.clock=new T.e,this.camera=new T.m(50,e/t,1,1e3),this.camera.position.set(50,50,50),this.controls=new M.a(this.camera,this.renderer.domElement),this.controls.enableKeys=!1,this.controls.enableDamping=!0,this.controls.dampingFactor=.1,this.controls.rotateSpeed=.2,this.controls.update(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.container.current.appendChild(this.renderer.domElement),this.stats=new B.a,this.stats.dom.style.position="absolute",this.stats.dom.style.left="",this.stats.dom.style.right="0",this.container.current.appendChild(this.stats.dom),this.onResize(null),!0}},{key:"renderScene",value:function(){if(this.appContext){this.controls.update();var e=this.clock.getDelta();this.appContext.script(e),this.appContext.scene.traverse((function(t){t.userData&&t.userData.func&&t.userData.func.call(t,e),t instanceof U&&t.system.update(e)})),this.renderer.render(this.appContext.scene,this.camera)}}},{key:"render",value:function(){var e=this;return console.log("rendering ThreejsViewPort"),r.createElement(Be,null,(function(t){if(t)return e.appContext=t,r.createElement("div",{ref:e.container,style:{width:"100%",height:"100%"}})}))}}]),t}(r.PureComponent),Me=(n(247),function(e){var t=r.useState(e.value+""),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement("input",{className:"number-input",value:l?a:e.value,size:5,onChange:function(e){l&&i(e.target.value)},onBlur:function(t){var n=parseFloat(a);n!==e.value&&e.onChange(n),c(!1)},onFocus:function(t){a!==e.value+""&&i(e.value+""),c(!0)},onKeyDown:function(t){if("Enter"===t.key){var n=parseFloat(a);n!==e.value&&e.onChange(n)}}})}),ze=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){console.log("rendered Vector3");var e=this.props,t=e.x,n=e.y,a=e.z,i=e.unitConversion,o=void 0===i?1:i,s=e.onChange,l=e.name;return r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},l),r.createElement("label",null,"X:"),r.createElement(Me,{value:t*o,onChange:function(e){s(e/o,n,a)}}),r.createElement("label",null,"Y:"),r.createElement(Me,{value:n*o,onChange:function(e){s(t,e/o,a)}}),r.createElement("label",null,"Z:"),r.createElement(Me,{value:a*o,onChange:function(e){s(t,n,e/o)}}))}}]),t}(r.PureComponent),Le=function(e){var t=r.useState(e.value),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement("input",{className:"string-input",value:l?a:e.value,size:20,onChange:function(e){l&&i(e.target.value)},onBlur:function(t){a!==e.value&&e.onChange(a),c(!1)},onFocus:function(t){a!==e.value&&i(e.value),c(!0)},onKeyDown:function(t){"Enter"===t.key&&a!==e.value&&e.onChange(a)}})},Ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChangeName=function(e){n.props.object3d.name=e,n.props.updateProperties()},n.onChangePosition=function(e,t,r){n.props.object3d.position.set(e,t,r),n.props.updateProperties()},n.onChangeScale=function(e,t,r){n.props.object3d.scale.set(e,t,r),n.props.updateProperties()},n.onChangeRotation=function(e,t,r){n.props.object3d.rotation.set(e,t,r),n.props.updateProperties()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return console.log("rendered objectProperties"),r.createElement("div",null,r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Name:"),r.createElement(Le,{value:e.props.object3d.name,onChange:e.onChangeName}))})),r.createElement(Be,null,(function(t){return t&&r.createElement(ze,{name:"Position",x:e.props.object3d.position.x,y:e.props.object3d.position.y,z:e.props.object3d.position.z,onChange:e.onChangePosition})})),r.createElement(Be,null,(function(t){return t&&r.createElement(ze,{name:"Rotation",x:e.props.object3d.rotation.x,y:e.props.object3d.rotation.y,z:e.props.object3d.rotation.z,onChange:e.onChangeRotation,unitConversion:180/Math.PI})})),r.createElement(Be,null,(function(t){return t&&r.createElement(ze,{name:"Scale",x:e.props.object3d.scale.x,y:e.props.object3d.scale.y,z:e.props.object3d.scale.z,onChange:e.onChangeScale})})))}}]),t}(r.PureComponent),Fe=n(201);n(411);function Ne(e){return"rgba(".concat(255*e.x|0,",").concat(255*e.y|0,",").concat(255*e.z|0,",").concat(e.w,")")}var Re=function(e){var t=r.useState(!1),n=Object(z.a)(t,2),a=n[0],i=n[1],o=e.color,s=e.onChange;return r.createElement("div",{className:"color-editor"},r.createElement("button",{style:{backgroundColor:Ne(o),height:"20px"},onClick:function(){i(!a)}}),Ne(o),a?r.createElement("div",{className:"popover"},r.createElement("div",{className:"cover",onClick:function(){i(!1)}}),r.createElement(Fe.SketchPicker,{color:{r:255*o.x|0,g:255*o.y|0,b:255*o.z|0,a:o.w},onChange:function(e){var t=new T.w;t.x=Math.min(255,e.rgb.r)/255,t.y=Math.min(255,e.rgb.g)/255,t.z=Math.min(255,e.rgb.b)/255,t.w=e.rgb.a,s(t)}})):null)},De=(n(412),n(21));function Ve(e,t,n){return e*(1-n)+t*n}var Ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).x=function(e){return Ve(n.props.xFrom,n.props.xTo,e)},n.y=function(e){return Ve(n.props.yFrom,n.props.yTo,e)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.xFrom,r=t.yFrom,a=t.xTo,i=t.yTo;return e.xFrom!==n||e.yFrom!==r||e.xTo!==a||e.yTo!==i}}]),t}(a.a.Component),Ue=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){if(Object(De.a)(Object(u.a)(t.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var n=this.props,r=n.curveColor,a=n.curveWidth,i=n.value,o=Object(z.a)(i.p,4);o[0],o[1],o[2],o[3];return e.curveColor!==r||e.curveWidth!==a||e.value!==i}},{key:"render",value:function(){var e=this.props,t=e.curveColor,n=e.curveWidth,r=e.value,i=this.x,o=this.y,s=Math.floor((i(1)-i(0))/5),l="M".concat(i(0),",").concat(o(r.genValue(0))," ");if(s>0)for(var c=1/s;c<=1;c+=1/s)l+="L".concat(i(c),",").concat(o(r.genValue(c))," ");return l+="L".concat(i(1),",").concat(o(r.genValue(1))," "),a.a.createElement("path",{fill:"none",stroke:t,strokeWidth:n,d:l})}}]),t}(Ae),Je=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){if(Object(De.a)(Object(u.a)(t.prototype),"shouldComponentUpdate",this).call(this,e))return!0;var n=this.props,r=n.xstart,a=n.ystart,i=n.handleRadius,o=n.handleColor,s=n.hover,l=n.down,c=n.background,d=n.handleStroke,p=n.xval,m=n.yval,h=n.onMouseEnter,v=n.onMouseLeave,f=n.onMouseDown;return e.xstart!==r||e.ystart!==a||e.handleRadius!==i||e.handleColor!==o||e.hover!==s||e.down!==l||e.background!==c||e.handleStroke!==d||e.xval!==p||e.yval!==m||e.onMouseDown!==f||e.onMouseLeave!==v||e.onMouseEnter!==h}},{key:"render",value:function(){var e=this.x,t=this.y,n=this.props,r=n.xstart,i=n.ystart,o=n.handleRadius,s=n.handleColor,l=n.hover,c=n.down,u=n.background,d=n.handleStroke,p=n.xval,m=n.yval,h=n.onMouseEnter,v=n.onMouseLeave,f=n.onMouseDown,w=e(r),g=t(i),b=e(p),y=t(m),O=Math.atan2(y-g,b-w),x=b-o*Math.cos(O),C=y-o*Math.sin(O);return a.a.createElement("g",null,a.a.createElement("line",{stroke:s,strokeWidth:l||c?1+d:d,x1:x,y1:C,x2:w,y2:g}),a.a.createElement("circle",{cx:b,cy:y,r:o,stroke:s,strokeWidth:c?2*d:d,fill:c?u:s,onMouseEnter:h,onMouseLeave:v,onMouseDown:f}))}}]),t}(Ae),_e=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).rootRef=Object(r.createRef)(),n.positionForEvent=function(e){if(n.rootRef.current){var t=n.rootRef.current.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}return[0,0]},n.x=function(e){},n.y=function(e){},n.inversex=function(e){},n.inversey=function(e){},n.onDownLeave=function(e){n.state.down&&(n.onDownMove(e),n.setState({down:-1,hover:-1}))},n.onDownMove=function(e){if(n.state.down>=0){e.preventDefault();var t=n.positionForEvent(e),r=Object(z.a)(t,2),a=r[0],i=r[1],o=new X(n.props.value.functions),s=(n.props.width,n.state.curve),l=o.getFunction(s);if(0===n.state.down){var c=l.p[0];if(l.p[0]=(n.props.height-i)/n.props.height,l.p[1]+=l.p[0]-c,o.setStartX(s,a/n.props.width),s-1>=0){var u=o.getFunction(s-1);u.p[3]=(n.props.height-i)/n.props.height,u.p[2]+=l.p[0]-c,o.setFunction(s-1,o.getFunction(s-1).clone())}o.setFunction(s,l.clone())}if(3===n.state.down){var d=l.p[3];if(l.p[3]=(n.props.height-i)/n.props.height,l.p[2]+=l.p[3]-d,o.setEndX(s,a/n.props.width),s+1<o.numOfFunctions){var p=o.getFunction(s+1);p.p[0]=(n.props.height-i)/n.props.height,p.p[1]+=l.p[3]-d,o.setFunction(s+1,o.getFunction(s+1).clone())}o.setFunction(s,l.clone())}1===n.state.down&&(l.p[1]=(n.props.height-i)/n.props.height,o.setFunction(s,l.clone())),2===n.state.down&&(l.p[2]=(n.props.height-i)/n.props.height,o.setFunction(s,l.clone())),n.props.onChange&&n.props.onChange(o)}},n.onDownUp=function(){n.setState({down:-1})},n.state={curve:-1,down:-1,hover:-1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onEnterHandle",value:function(e,t){this.state.down||this.setState({hover:t,curve:e})}},{key:"onDownHandle",value:function(e,t,n){n.preventDefault(),this.setState({hover:-1,down:t,curve:e})}},{key:"onLeaveHandle",value:function(){this.state.down||this.setState({hover:-1})}},{key:"render",value:function(){for(var e=this,n=this.props,a=n.width,i=n.height,o=n.value,s=n.curveWidth,l=void 0===s?1:s,c=n.curveColor,u=void 0===c?"#000":c,d=n.handleRadius,p=void 0===d?t.defaultP.handleRadius:d,m=n.handleColor,h=void 0===m?"#f00":m,v=n.handleStroke,f=void 0===v?1:v,w=n.background,g=void 0===w?"#fff":w,b=this.state,y=b.curve,O=b.down,x=b.hover,C=[],S=function(t){var n=o.getStartX(t),s=o.getEndX(t),c=o.getFunction(t),d=c.getSlope(0),m=c.getSlope(1);C.push(r.createElement("g",{key:t},r.createElement(Ue,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,curveColor:u,curveWidth:l,value:c}),r.createElement(Je,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,0,n)},onMouseEnter:function(n){return e.onEnterHandle(t,0)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:c.p[0],xval:0,yval:c.p[0],handleRadius:p,handleColor:h,down:y===t&&0===O,hover:y===t&&0===x,handleStroke:f,background:g}),r.createElement(Je,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,1,n)},onMouseEnter:function(n){return e.onEnterHandle(t,1)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:0,ystart:c.p[0],xval:1/3,yval:1/3*d+c.p[0],handleRadius:p,handleColor:h,down:y===t&&1===O,hover:y===t&&1===x,handleStroke:f,background:g}),r.createElement(Je,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,2,n)},onMouseEnter:function(n){return e.onEnterHandle(t,2)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:c.p[3],xval:1-1/3,yval:c.p[3]-1/3*m,handleRadius:p,handleColor:h,down:y===t&&2===O,hover:y===t&&2===x,handleStroke:f,background:g}),r.createElement(Je,{xFrom:n*a,xTo:s*a,yFrom:i,yTo:0,onMouseDown:function(n){return e.onDownHandle(t,3,n)},onMouseEnter:function(n){return e.onEnterHandle(t,3)},onMouseLeave:function(t){return e.onLeaveHandle()},xstart:1,ystart:c.p[3],xval:1,yval:c.p[3],handleRadius:p,handleColor:h,down:y===t&&3===O,hover:y===t&&3===x,handleStroke:f,background:g})))},E=0;E<o.numOfFunctions;E++)S(E);return r.createElement("div",{ref:this.rootRef,onMouseMove:this.onDownMove,onMouseUp:this.onDownUp,onMouseLeave:this.onDownLeave},r.createElement("svg",{width:a,height:i},C))}}]),t}(r.PureComponent);_e.defaultP={padding:[0,0,0,0],handleRadius:4};var We={value:["constant","intervalValue"],functionValue:["piecewiseBezier"],color:["color","randomColor"],functionColor:["colorRange","gradient"]},Ge=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeEditor=function(e){var t=null;switch(e.target.value){case"constant":t=new _(0);break;case"color":t=new Q(new T.w(1,1,1,1));break;case"intervalValue":t=new W(0,1);break;case"colorRange":t=new Z(new T.w(0,0,0,1),new T.w(1,1,1,1));break;case"randomColor":t=new K(new T.w(0,0,0,1),new T.w(1,1,1,1));break;case"piecewiseBezier":t=new X}t&&n.props.updateGenerator(t)},n.changeValue=function(e){n.props.updateGenerator(new _(e))},n.changeColor=function(e){n.props.updateGenerator(new Q(e))},n.changeValueA=function(e){var t=n.props.generator;n.props.updateGenerator(new W(e,t.b))},n.changeValueB=function(e){var t=n.props.generator;n.props.updateGenerator(new W(t.a,e))},n.changeColorRangeA=function(e){var t=n.props.generator;n.props.updateGenerator(new Z(e,t.b))},n.changeColorRangeB=function(e){var t=n.props.generator;n.props.updateGenerator(new Z(t.a,e))},n.changeRandomColorA=function(e){var t=n.props.generator;n.props.updateGenerator(new K(e,t.b))},n.changeRandomColorB=function(e){var t=n.props.generator;n.props.updateGenerator(new K(t.a,e))},n.changeCurve=function(e){n.props.updateGenerator(new X(e.functions))};We[e.allowedType[0]][0];return n.state={open:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getEditorType",value:function(e){return e instanceof _?"constant":e instanceof W?"intervalValue":e instanceof X?"piecewiseBezier":e instanceof Q?"color":e instanceof K?"randomColor":e instanceof Z?"colorRange":e instanceof ve?"gradient":"constant"}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.generator,a=e.allowedType,i=[],o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value,p=!0,m=!1,h=void 0;try{for(var v,f=We[d][Symbol.iterator]();!(p=(v=f.next()).done);p=!0){var w=v.value;i.push(w)}}catch(y){m=!0,h=y}finally{try{p||null==f.return||f.return()}finally{if(m)throw h}}}}catch(y){s=!0,l=y}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}var g,b=this.getEditorType(n);switch(b){case"constant":g=r.createElement(r.Fragment,null,r.createElement(Me,{value:n.value,onChange:this.changeValue}));break;case"color":g=r.createElement(r.Fragment,null,r.createElement(Re,{color:n.color,onChange:this.changeColor}));break;case"intervalValue":g=r.createElement(r.Fragment,null,r.createElement(Me,{value:n.a,onChange:this.changeValueA}),"-",r.createElement(Me,{value:n.b,onChange:this.changeValueB}));break;case"piecewiseBezier":g=r.createElement(r.Fragment,null,r.createElement(_e,{height:40,width:240,value:n,onChange:this.changeCurve}));break;case"colorRange":g=r.createElement(r.Fragment,null,r.createElement(Re,{color:n.a,onChange:this.changeColorRangeA}),"-",r.createElement(Re,{color:n.b,onChange:this.changeColorRangeB}));break;case"randomColor":g=r.createElement(r.Fragment,null,r.createElement(Re,{color:n.a,onChange:this.changeRandomColorA}),"-",r.createElement(Re,{color:n.b,onChange:this.changeRandomColorB}))}return r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},t),g,r.createElement("select",{className:"editor-select",onChange:this.changeEditor,value:b},i.map((function(e){return r.createElement("option",{key:e,value:e},e)}))))}}]),t}(r.PureComponent),He=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChangeStartSpeed=function(e){console.log("change start speed"),n.props.particleSystem.startSpeed=e,n.props.updateProperties()},n.onChangeStartLife=function(e){console.log("change start life"),n.props.particleSystem.startLife=e,n.props.updateProperties()},n.onChangeStartSize=function(e){console.log("change start size"),n.props.particleSystem.startSize=e,n.props.updateProperties()},n.onChangeStartColor=function(e){console.log("change start color"),n.props.particleSystem.startColor=e,n.props.updateProperties()},n.OnChangeStartRotation=function(e){console.log("change start rotation"),n.props.particleSystem.startRotation=e,n.props.updateProperties()},n.OnChangeEmissionOverTime=function(e){console.log("change start rotation"),n.props.particleSystem.emissionOverTime=e,n.props.updateProperties()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;console.log("rendered objectProperties");var t=["value","functionValue"],n=["color","functionColor"];return r.createElement("div",null,r.createElement(Be,null,(function(n){return n&&r.createElement(Ge,{name:"Start Life",allowedType:t,generator:e.props.particleSystem.startLife,updateGenerator:e.onChangeStartLife})})),r.createElement(Be,null,(function(n){return n&&r.createElement(Ge,{name:"Start Size",allowedType:t,generator:e.props.particleSystem.startSize,updateGenerator:e.onChangeStartSize})})),r.createElement(Be,null,(function(n){return n&&r.createElement(Ge,{name:"Start Speed",allowedType:t,generator:e.props.particleSystem.startSpeed,updateGenerator:e.onChangeStartSpeed})})),r.createElement(Be,null,(function(t){return t&&r.createElement(Ge,{name:"Start Color",allowedType:n,generator:e.props.particleSystem.startColor,updateGenerator:e.onChangeStartColor})})),r.createElement(Be,null,(function(n){return n&&r.createElement(Ge,{name:"Start Rotation",allowedType:t,generator:e.props.particleSystem.startRotation,updateGenerator:e.OnChangeStartRotation})})),r.createElement(Be,null,(function(n){return n&&r.createElement(Ge,{name:"Emission Over Time",allowedType:t,generator:e.props.particleSystem.emissionOverTime,updateGenerator:e.OnChangeEmissionOverTime})})))}}]),t}(r.PureComponent),Xe=n(207),qe=n(468),Ye=n(12),$e=n(469),Ke=n(470),Ze=n(471),Qe=n(202),et=n.n(Qe),tt=n(485),nt=n(472),rt=n(473),at=n(474),it=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){e.target.files&&n.props.onChange(e.target.files)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.createElement("div",null,r.createElement("input",{accept:"image/*",type:"file",id:"contained-button-file",style:{display:"none"},onChange:this.handleChange}),r.createElement("label",{htmlFor:"contained-button-file"},r.createElement(p.a,{variant:"contained",color:"primary",component:"span"},"Upload")))}}]),t}(r.Component),ot=(n(413),Object(qe.a)((function(e){return Object(v.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450}})}))),st=Object(Ye.a)((function(e){return Object(v.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,r=e.onClose,i=Object(Xe.a)(e,["children","classes","onClose"]);return a.a.createElement($e.a,Object.assign({disableTypography:!0,className:n.root},i),a.a.createElement(w.a,{variant:"h6"},t),r?a.a.createElement(g.a,{"aria-label":"close",className:n.closeButton,onClick:r},a.a.createElement(et.a,null)):null)})),lt=Object(Ye.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ke.a),ct=Object(Ye.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Ze.a),ut=function(e){var t=ot(),n=Object(r.useState)(0),i=Object(z.a)(n,2),o=i[0],s=i[1];return a.a.createElement(tt.a,{onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:e.open},a.a.createElement(st,{id:"customized-dialog-title",onClose:e.handleClose},"Picker Texture"),a.a.createElement(lt,{dividers:!0},a.a.createElement("div",{className:t.root},a.a.createElement(nt.a,{cellHeight:160,className:t.gridList,cols:3},e.textures.map((function(e,t){return a.a.createElement(rt.a,{key:e.img,cols:1,onClick:function(){s(t)},className:t===o?"selected-tile":""},a.a.createElement("img",{src:e.img,alt:e.texture.name}),a.a.createElement(at.a,{title:e.texture.name,subtitle:a.a.createElement("span",null,"by: ",e.texture.name)}))}))))),a.a.createElement(ct,null,a.a.createElement(it,{onChange:e.handleUpload}),a.a.createElement(p.a,{variant:"contained",onClick:function(){e.handleSelect(e.textures[o]),e.handleClose()}},"Confirm")))},dt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChangeStartTile=function(e){n.props.particleSystem.startTileIndex=e,n.props.updateProperties()},n.onChangeUTileCount=function(e){n.props.particleSystem.uTileCount=e,n.props.updateProperties()},n.onChangeVTileCount=function(e){n.props.particleSystem.vTileCount=e,n.props.updateProperties()},n.onChangeBlending=function(e){switch(console.log(e.target.value),e.target.value){case"Normal":n.props.particleSystem.blending=T.l,n.props.particleSystem.emitter.material.blending=T.l;break;case"Additive":n.props.particleSystem.blending=T.a,n.props.particleSystem.emitter.material.blending=T.a}n.props.updateProperties()},n.getValueOfBlending=function(e){switch(e){case T.l:return"Normal";case T.a:return"Additive"}},n.onUploadTexture=function(e){console.log("upload texture");var t=document.createElement("img"),r=new T.s(t);if(t.onload=function(){r.needsUpdate=!0},e&&e[0]){var a=new FileReader;a.onload=function(e){t.src=a.result},a.readAsDataURL(e[0]),r.name=e[0].name;var i={img:URL.createObjectURL(e[0]),texture:r};n.props.context.actions.addTexture(i)}},n.onChangeTexture=function(e){console.log("change texture"),n.props.particleSystem.texture=e.texture,n.props.updateProperties()},n.closeTexturePicker=function(){n.setState({texturePickerOpen:!1})},n.openTexturePicker=function(){n.setState({texturePickerOpen:!0})},n.state={texturePickerOpen:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return console.log("rendered particleRendererProperties"),r.createElement("div",null,"texture?: Texture; blending?: Blending; worldSpace?: boolean;",r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Blend Mode"),r.createElement("select",{className:"editor-select",onChange:e.onChangeBlending,value:e.getValueOfBlending(e.props.particleSystem.blending)},r.createElement("option",{key:0,value:"Normal"},"Normal"),r.createElement("option",{key:1,value:"Additive"},"Additive")))})),r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"UVTile"),r.createElement("label",null,"Column:"),r.createElement(Me,{value:e.props.particleSystem.uTileCount,onChange:e.onChangeUTileCount}),r.createElement("label",null,"Row:"),r.createElement(Me,{value:e.props.particleSystem.vTileCount,onChange:e.onChangeVTileCount}))})),r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Start Tile Index"),r.createElement(Me,{value:e.props.particleSystem.startTileIndex,onChange:e.onChangeStartTile}))})),r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"name"},"Texture"),e.props.particleSystem.texture?e.props.particleSystem.texture.name:".."," ",r.createElement(p.a,{onClick:e.openTexturePicker,variant:"contained"},"Pick"))})),r.createElement(Be,null,(function(t){return t&&r.createElement(ut,{handleClose:e.closeTexturePicker,handleSelect:e.onChangeTexture,handleUpload:e.onUploadTexture,open:e.state.texturePickerOpen,textures:t.textures})})))}}]),t}(r.PureComponent),pt=n(203),mt=n.n(pt),ht=n(150),vt=(n(414),function(e){var t=r.useState(e.value),n=Object(z.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(z.a)(o,2),l=s[0],c=s[1];return r.createElement(mt.a,{value:l?a:e.value,onValueChange:function(e){l&&i(e)},highlight:function(e){return Object(ht.highlight)(e,ht.languages.javascript,"javascript")},padding:10,onBlur:function(t){a!==e.value&&e.onChange(a),c(!1)},onFocus:function(t){a!==e.value&&i(e.value),c(!0)},style:{fontFamily:'"Consolas", monospace',fontSize:12}})}),ft=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChangeScript=function(e){null===n.props.object3d.userData&&(n.props.object3d.userData={}),n.props.object3d.userData.script=e,n.props.object3d.userData.func=new Function("delta",e),n.props.updateProperties()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(Be,null,(function(t){return t&&r.createElement("div",{className:"property"},r.createElement("label",{className:"script"},"Script:"),r.createElement(vt,{value:e.props.object3d.userData.script||"",onChange:e.onChangeScript}))})))}}]),t}(r.PureComponent),wt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getValueOfShape=function(e){return n.props.particleSystem.emitterShape instanceof le?"PointEmitter":n.props.particleSystem.emitterShape instanceof oe?"ConeEmitter":n.props.particleSystem.emitterShape instanceof se?"SphereEmitter":n.props.particleSystem.emitterShape instanceof ce?"DonutEmitter":""},n.onChangeShape=function(e){switch(e.target.value){case"PointEmitter":n.props.particleSystem.emitterShape instanceof le||(n.props.particleSystem.emitterShape=new le,n.props.updateProperties());break;case"ConeEmitter":n.props.particleSystem.emitterShape instanceof oe||(n.props.particleSystem.emitterShape=new oe,n.props.updateProperties());break;case"SphereEmitter":n.props.particleSystem.emitterShape instanceof se||(n.props.particleSystem.emitterShape=new se,n.props.updateProperties());break;case"DonutEmitter":n.props.particleSystem.emitterShape instanceof ce||(n.props.particleSystem.emitterShape=new ce,n.props.updateProperties())}},n.onChangeKeyValue=function(e,t){n.props.particleSystem.emitterShape[e]=t,n.props.updateProperties()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderShapeProperties",value:function(){var e=this,t=[],n=function(n){t.push(a.a.createElement("div",{key:n,className:"property"},a.a.createElement("label",{className:"name"},n,":"),a.a.createElement(Me,{value:e.props.particleSystem.emitterShape[n],onChange:function(t){return e.onChangeKeyValue(n,t)}})))};for(var r in this.props.particleSystem.emitterShape)n(r);return t}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(Be,null,(function(t){return t&&a.a.createElement("div",{className:"property"},a.a.createElement("label",{className:"name"},"Shape"),a.a.createElement("select",{className:"editor-select",onChange:e.onChangeShape,value:e.getValueOfShape(e.props.particleSystem.emitterShape)},a.a.createElement("option",{key:0,value:"PointEmitter"},"PointEmitter"),a.a.createElement("option",{key:1,value:"ConeEmitter"},"ConeEmitter"),a.a.createElement("option",{key:2,value:"SphereEmitter"},"SphereEmitter"),a.a.createElement("option",{key:3,value:"DonutEmitter"},"DonutEmitter")))})),a.a.createElement(Be,null,(function(t){return t&&e.renderShapeProperties()})))}}]),t}(a.a.PureComponent),gt=n(475),bt=n(487),yt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).getSystems=function(){var e=[];return n.props.object3d instanceof U&&e.push(n.props.object3d.system),n.props.object3d.traverse((function(t){t instanceof U&&e.push(t.system)})),e},n.checkPause=function(e){var t=!0;return e.forEach((function(e){e.paused||(t=!1)})),t},n.togglePause=function(){var e=n.getSystems();n.checkPause(e)?e.forEach((function(e){e.play()})):e.forEach((function(e){e.pause()})),n.props.updateProperties()},n.onRestart=function(){n.getSystems().forEach((function(e){e.restart()})),n.props.updateProperties()},n.onStop=function(){n.getSystems().forEach((function(e){e.restart(),e.pause()})),n.props.updateProperties()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(bt.a,{color:"primary","aria-label":"primary button group"}),r.createElement(Be,null,(function(t){return t&&r.createElement(gt.a,{color:"primary","aria-label":"primary button group"},r.createElement(p.a,{disabled:!e.checkPause(e.getSystems()),onClick:e.togglePause},"Play"),r.createElement(p.a,{disabled:e.checkPause(e.getSystems()),onClick:e.togglePause},"Pause"),r.createElement(p.a,{onClick:e.onRestart},"Restart"),r.createElement(p.a,{onClick:e.onStop},"Stop"))})))}}]),t}(r.PureComponent),Ot=n(478),xt=n(486),Ct=n(42),St=n.n(Ct),Et=n(479),kt=(n(417),n(206)),jt=n(465),Bt=n(437),Pt=n(476),Tt=n(477),Mt=n(482),zt=n(204),Lt=n.n(zt)()((function(e){return Object(v.a)({root:{width:"100%"},listRoot:{width:"100%",backgroundColor:e.palette.background.paper}})}));var It=r.memo((function(e){var t=Lt(),n=r.useState([0,1,2,3]),a=Object(z.a)(n,2),i=a[0],o=a[1],s=r.useState(1),l=Object(z.a)(s,2),c=l[0],u=l[1],d=r.useState(null),v=Object(z.a)(d,2),f=v[0],w=v[1],g=function(t){return function(){var n;switch(t){case"ColorOverLife":n=new te(new Z(new T.w(1,1,1,1),new T.w(0,0,0,1)));break;case"RotationOverLife":n=new ne(new X([[new H(0,.3333,.6667,1),0]]));break;case"SizeOverLife":n=new re(new X([[new H(0,.3333,.6667,1),0]]));break;case"FrameOverLife":n=new ae(new X([[new H(0,.3333,.6667,1),0]]));break;case"OrbitOverLife":n=new ie(new X([[new H(0,.3333,.6667,1),0]]));break;case"SpeedOverLife":n=new fe(new X([[new H(1,.6667,.3333,0),0]]))}n&&(e.behaviors.push(n),e.updateProperties()),w(null)}},b=function(t){return function(n){var r=e.behaviors[t];switch(r.type){case"ColorOverLife":r.func=n;break;case"RotationOverLife":r.angularVelocityFunc=n;break;case"SizeOverLife":case"FrameOverLife":r.func=n;break;case"OrbitOverLife":r.angularVelocityFunc=n}console.log("changing"),e.updateProperties()}};return r.createElement("div",{className:t.root},r.createElement(gt.a,{color:"primary","aria-label":"primary button group"},r.createElement(p.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){w(e.currentTarget)},id:"new-button"},"New"),r.createElement(m.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){w(null)}},r.createElement(h.a,{onClick:g("SizeOverLife")},"SizeOverLife"),r.createElement(h.a,{onClick:g("ColorOverLife")},"ColorOverLife"),r.createElement(h.a,{onClick:g("RotationOverLife")},"RotationOverLife"),r.createElement(h.a,{onClick:g("FrameOverLife")},"FrameOverLife"),r.createElement(h.a,{onClick:g("OrbitOverLife")},"OrbitOverLife"),r.createElement(h.a,{onClick:g("SpeedOverLife")},"SpeedOverLife")),r.createElement(p.a,{onClick:function(){e.behaviors.splice(c,1),e.updateProperties()}},"Remove")),r.createElement(jt.a,{dense:!0,className:t.listRoot},r.createElement(Be,null,(function(t){return t&&e.behaviors.map((function(e,t){var n,a,s,l="behavior-list-label-".concat(t),d=null;switch(e.type){case"ColorOverLife":n=["functionColor"],d=e.func;break;case"RotationOverLife":n=["functionValue","value"],d=e.angularVelocityFunc;break;case"SizeOverLife":case"FrameOverLife":n=["functionValue"],d=e.func;break;case"OrbitOverLife":n=["functionValue"],d=e.angularVelocityFunc;break;case"SpeedOverLife":n=["functionValue"],d=e.func;break;default:n=["functionValue"]}return d&&(a=r.createElement(Ge,{name:"Func",allowedType:n,generator:d,updateGenerator:b(t)})),r.createElement(Bt.a,{key:t,selected:c===t,onClick:function(e){return function(e,t){u(t)}(0,t)}},r.createElement(Pt.a,null,r.createElement(Mt.a,{edge:"end",onChange:(s=t,function(){var e=i.indexOf(s),t=Object(kt.a)(i);-1===e?t.push(s):t.splice(e,1),o(t)}),checked:-1!==i.indexOf(t),inputProps:{"aria-labelledby":l}})),r.createElement(Tt.a,{id:l,primary:e.type,secondary:a}))}))}))))})),Ft=O()({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(xt.a),Nt=O()({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:32,"&$expanded":{minHeight:32}},content:{margin:0,"&$expanded":{margin:0}},expandIcon:{padding:0},expanded:{}})(Ot.a),Rt=Object(qe.a)((function(e){return Object(v.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function Dt(e){var t=Rt(),n=r.useState(["Object","EmitterShape","ParticleRenderer","ParticleEmitter","Behaviors","Script"]),a=Object(z.a)(n,2),i=a[0],o=a[1],s=function(e){return function(t,n){n?i.push(e):i.splice(i.indexOf(e),1),o(i)}};return r.createElement("div",{className:t.root},r.createElement(Be,null,(function(t){return t&&r.createElement(yt,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})),r.createElement(Ft,{expanded:-1!==i.indexOf("Object"),onChange:s("Object")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"object-content",id:"object-header"},r.createElement(w.a,{className:t.heading},"Object")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(Ie,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof U&&r.createElement(Ft,{expanded:-1!==i.indexOf("EmitterShape"),onChange:s("EmitterShape")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"emitter-shape-content",id:"emitter-shape-header"},r.createElement(w.a,{className:t.heading},"Emitter Shape")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(wt,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof U&&r.createElement(Ft,{expanded:-1!==i.indexOf("ParticleRenderer"),onChange:s("ParticleRenderer")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"particle-renderer-content",id:"particle-renderer-header"},r.createElement(w.a,{className:t.heading},"Particle Renderer")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(dt,{particleSystem:e.object3d.system,context:t,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof U&&r.createElement(Ft,{expanded:-1!==i.indexOf("ParticleEmitter"),onChange:s("ParticleEmitter")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"particle-emitter-content",id:"particle-emitter-header"},r.createElement(w.a,{className:t.heading},"Particle Emitter")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(He,{particleSystem:e.object3d.system,updateProperties:t.actions.updateProperties})})))),e.object3d instanceof U&&r.createElement(Ft,{expanded:-1!==i.indexOf("Behaviors"),onChange:s("Behaviors")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"behaviors-content",id:"behaviors-header"},r.createElement(w.a,{className:t.heading},"Behaviors")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(It,{behaviors:e.object3d.system.behaviors,updateProperties:t.actions.updateProperties})})))),r.createElement(Ft,{expanded:-1!==i.indexOf("Script"),onChange:s("Script")},r.createElement(Nt,{expandIcon:r.createElement(St.a,null),"aria-controls":"script-content",id:"script-header"},r.createElement(w.a,{className:t.heading},"Script")),r.createElement(Et.a,null,r.createElement(Be,null,(function(t){return t&&r.createElement(ft,{object3d:e.object3d,updateProperties:t.actions.updateProperties})})))))}n(418),n(419);var Vt=n(33),At=(n(428),n(481)),Ut=n(205),Jt=n.n(Ut),_t=n(480),Wt=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"camelize",value:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")}},{key:"camelizeClass",value:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return e.toUpperCase()})).replace(/\s+/g,"")}},{key:"exportBezier",value:function(e){return"new Bezier(".concat(e.p[0],", ").concat(e.p[1],", ").concat(e.p[2],", ").concat(e.p[3],")")}},{key:"exportColor",value:function(e){return"new Vector4(".concat(e.x,", ").concat(e.y,", ").concat(e.z,", ").concat(e.w,")")}},{key:"exportFunction",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof _)return"new ConstantValue(".concat(t.value,")");if(t instanceof Q)return"new ConstantColor(".concat(e.exportColor(t.color),")");if(t instanceof W)return"new IntervalValue(".concat(t.a,", ").concat(t.b,")");if(t instanceof Z)return"new ColorRange(".concat(e.exportColor(t.a),", ").concat(e.exportColor(t.b),")");if(t instanceof K)return"new RandomColor(".concat(e.exportColor(t.a),", ").concat(e.exportColor(t.b),")");if(t instanceof X){for(var r="new PiecewiseBezier(\n",a=0;a<t.functions.length-1;a++)r+=" ".repeat(n+4)+"[".concat(e.exportBezier(t.functions[a][0]),", ").concat(t.functions[a][1],"], ");return r+=" ".repeat(n+4)+"[".concat(e.exportBezier(t.functions[t.functions.length-1][0]),", ").concat(t.functions[t.functions.length-1][1],"]"),r+=" ".repeat(n)+")"}if(t instanceof _)return"new ConstantValue(".concat(t.value,")");throw new Error}},{key:"exportParticleEmitter",value:function(t){var n=e.camelize(t.name),r=t.system,a="        this.".concat(n," = new ParticleSystem({\n");a+="            duration: ".concat(r.duration,",\n"),a+="            looping: ".concat(r.looping,",\n"),a+="            startLife: ".concat(e.exportFunction(r.startLife),",\n"),a+="            startSpeed: ".concat(e.exportFunction(r.startSpeed),",\n"),a+="            startSize: ".concat(e.exportFunction(r.startSize),",\n"),a+="            startColor: ".concat(e.exportFunction(r.startColor),",\n"),a+="            worldSpace: ".concat(r.worldSpace,",\n"),a+="            maxParticle: ".concat(r.maxParticle,",\n"),a+="            emissionOverTime: ".concat(e.exportFunction(r.emissionOverTime),",\n"),a+="            emissionBursts: ".concat(r.emissionBursts,",\n"),a+="            shape: ".concat(r.emitterShape,",\n"),a+="            texture: texture,\n",a+="            blending: ".concat(r.blending,",\n"),a+="            startTileIndex: ".concat(r.startTileIndex,",\n"),a+="            uTileCount: ".concat(r.uTileCount,",\n"),a+="            vTileCount: ".concat(r.vTileCount,",\n"),a+="            renderMode: ".concat(r.renderMode,",\n"),r.renderMode==N.StretchedBillBoard&&(a+="            speedFactor: ".concat(r.speedFactor,",\n")),a+="        }\n";for(var i=0;i<r.behaviors.length;i++)a+="        this.".concat(n,".addBehavior(").concat(r.behaviors[i],");\n");return a+="        this.".concat(n,".emitter.renderOrder = ").concat(r.emitter.renderOrder,";\n"),a+="        this.".concat(n,".emitter.name = '").concat(n,"';\n"),a+="        this.".concat(n,".emitter.rotation.set(").concat(r.emitter.rotation.x,", ").concat(r.emitter.rotation.y,", ").concat(r.emitter.rotation.z,");\n"),a+="        this.add(this.".concat(n,".emitter);\n"),a+="\n"}},{key:"exportCode",value:function(t){for(var n="export class ".concat(e.camelizeClass(t.name)," extends Group {\n"),r=0;r<t.children.length;r++)t.children[r]instanceof U&&(n+="    private ".concat(e.camelize(t.children[r].name),": ParticleSystem;\n"));n+="\n",n+="    constructor() {\n",n+="        super();\n",n+="        this.name = '".concat(t.name,"';\n"),n+='        let texture = new TextureLoader().load( "textures/texture1.png");\n',n+='        texture.name = "textures/texture1.png";\n';for(var a=0;a<t.children.length;a++)t.children[a]instanceof U&&(n+=e.exportParticleEmitter(t.children[a]));n+="    }\n",n+="\n",n+="    update(delta: number) {\n";for(var i=0;i<t.children.length;i++)t.children[i]instanceof U&&(n+="        ".concat(e.camelize(t.children[i].name),".update(delta);\n"));return n+="    }\n",n+="}"}}]),e}();function Gt(e){a.a.useRef(null);return a.a.createElement("div",null,a.a.createElement(tt.a,{open:e.open,onClose:e.handleClose,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},a.a.createElement($e.a,{id:"scroll-dialog-title"},"Particle System Code"),a.a.createElement(Ke.a,{dividers:!0},a.a.createElement(vt,{value:e.content,onChange:function(){}})),a.a.createElement(Ze.a,null,a.a.createElement(p.a,{onClick:e.handleClose,color:"primary"},"Confirm"))))}var Ht=Object(qe.a)((function(e){return Object(v.a)({root:{height:240,flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}})}));function Xt(e){var t,n,r=Ht(),i=a.a.useState([]),o=Object(z.a)(i,2),s=o[0],l=o[1],c=a.a.useState(["1"]),u=Object(z.a)(c,2),d=u[0],p=u[1],m=a.a.useState(""),h=Object(z.a)(m,2),v=h[0],f=h[1],g=function(t,n){if(n.length>0){var r=function e(t,n){if(0==t)return[n,0];t--;var r=!0,a=!1,i=void 0;try{for(var o,s=n.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=e(t,o.value),c=Object(z.a)(l,2),u=c[0],d=c[1];if(u)return[u,d];t=d}}catch(p){a=!0,i=p}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return[null,t]}(parseInt(n[0]),e.scene),a=Object(z.a)(r,1)[0];a&&e.context.actions.select(a)}l(n)},b=function(e,t){"svg"===e.target.tagName&&p(t)},y=function(e){var t="object";t=e instanceof U?"ParticleSystem":e.type;var n="unnamed";return e.name&&(n=e.name),"[".concat(t,"] ").concat(n)};return a.a.createElement("div",null,a.a.createElement(w.a,{className:r.heading}," Scene Graph "),(t=e.context,n=e.scene,a.a.createElement(At.a,{className:r.root,selected:s,expanded:d,onNodeToggle:b,onNodeSelect:g,defaultCollapseIcon:a.a.createElement(St.a,null),defaultExpandIcon:a.a.createElement(Jt.a,null)},function e(t,n,r){var i=[],o=r;r++;var s=!0,l=!1,c=void 0;try{for(var u,d=n.children[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=e(t,u.value,r);i.push(p[0]),r=p[1]}}catch(m){l=!0,c=m}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}return 0!==o?[a.a.createElement(_t.a,{key:n.uuid,nodeId:""+o,label:a.a.createElement(Vt.MenuProvider,{id:"scene-graph-menu",data:{object3d:n}},y(n)+" "+o)},i),r]:[a.a.createElement(a.a.Fragment,null,i),r]}(t,n,0)[0])),a.a.createElement(Vt.Menu,{id:"scene-graph-menu"},a.a.createElement(Vt.Submenu,{label:"Add"},a.a.createElement(Vt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.addObject3d("particle",n.object3d)}},"Particle System"),a.a.createElement(Vt.Item,{onClick:function(e){var t=e.event,n=e.props;return console.log(t,n)}},"Ball")),a.a.createElement(Vt.Separator,null),a.a.createElement(Vt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.duplicateObject3d(n.object3d)}},"Duplicate"),a.a.createElement(Vt.Item,{onClick:function(t){t.event;var n=t.props;n.object3d&&e.context.actions.removeObject3d(n.object3d)}},"Remove"),a.a.createElement(Vt.Separator,null),a.a.createElement(Vt.Item,{onClick:function(e){e.event;var t=e.props;if(console.log(t),t.object3d){var n=document.createElement("a"),r=t.object3d.toJSON(),a=new Blob([JSON.stringify(r)],{type:"application/json"});n.href=URL.createObjectURL(a),n.download="scene.json",n.click()}}},"Export"),a.a.createElement(Vt.Item,{onClick:function(e){e.event;var t=e.props;t.object3d&&f(Wt.exportCode(t.object3d))}},"Copy JS Code")),a.a.createElement(Gt,{content:v,open:""!==v,handleClose:function(){f("")}}))}var qt=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return console.log("render application"),r.createElement(Pe,null,r.createElement("div",{className:"application"},r.createElement("div",{className:"main-menu"},r.createElement(Be,null,(function(e){return e&&r.createElement(k,{onSaveAs:e.actions.onSaveAs,onImport:e.actions.onImport,onOpenDemo:e.actions.onOpenDemo})}))),r.createElement("div",{className:"main"},r.createElement("div",{className:"viewport"},r.createElement(Te,{width:600,height:600})),r.createElement("div",{className:"sidebar"},r.createElement(Be,null,(function(e){return e&&r.createElement(Xt,{context:e,scene:e.scene})})),r.createElement(Be,null,(function(e){return e&&e.selection.length>0&&r.createElement(Dt,{object3d:e.selection[0]})}))))))}}]),t}(r.Component),Yt=n(147),$t=n.n(Yt),Kt=n(146),Zt=n.n(Kt),Qt=n(145),en=n.n(Qt),tn=n(467),nn=en()({palette:{primary:{main:$t.a[500]},secondary:{main:Zt.a[500]}},typography:{fontSize:12}}),rn=function(){return a.a.createElement(tn.a,{theme:nn},a.a.createElement(qt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(rn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[219,1,2]]]);
//# sourceMappingURL=main.167d1d56.chunk.js.map